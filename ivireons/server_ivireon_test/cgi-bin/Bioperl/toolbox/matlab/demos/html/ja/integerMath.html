
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>整数演算</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-26"><meta name="DC.source" content="integerMath.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit integerMath">エディターで integerMath.m を開く</a></div><div class="right"><a href="matlab:echodemo integerMath">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>整数演算</h1><!--introduction--><p>このデモでは、信号とイメージの整数データに対して演算を実行する例を示します。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">整数信号データの読み込み</a></li><li><a href="#2">データのプロット</a></li><li><a href="#4">データ処理</a></li><li><a href="#7">整数イメージ データの読み込み</a></li><li><a href="#9">イメージの表示</a></li><li><a href="#11">イメージのスケーリング</a></li><li><a href="#13">イメージの加算</a></li></ul></div><h2>整数信号データの読み込み<a name="1"></a></h2><p>8 ビットと 16 ビットのデータ A から D を使用する 4 つの計測器から信号を取得し、計測データセットを読み込み、<tt>int8</tt>、<tt>int16</tt>、<tt>uint16</tt> として保存します。時間は <tt>uint16</tt> として格納されています。</p><pre class="codeinput">load <span class="string">integersignal</span>

<span class="comment">% Look at variables</span>
whos <span class="string">Signal1</span> <span class="string">Signal2</span> <span class="string">Signal3</span> <span class="string">Signal4</span> <span class="string">Time1</span>
</pre><pre class="codeoutput">  Name            Size            Bytes  Class     Attributes

  Signal1      7550x1              7550  int8                
  Signal2      7550x1              7550  int8                
  Signal3      7550x1             15100  int16               
  Signal4      7550x1             15100  uint16              
  Time1        7550x1             15100  uint16              

</pre><h2>データのプロット<a name="2"></a></h2><p>最初に 2 つの信号をプロットし、信号の範囲を確認します。</p><pre class="codeinput">plot(Time1, Signal1, Time1, Signal2);
grid;
legend(<span class="string">'Signal1'</span>,<span class="string">'Signal2'</span>);
</pre><img vspace="5" hspace="5" src="../integerMath_01.png" alt=""> <p><tt>int8</tt> の値を確認します。信号が表す実際の物理的な値 (例: 電圧) を計算するためにこれらの値をスケーリングする必要があります。</p><h2>データ処理<a name="4"></a></h2><p><tt>+</tt>、<tt>-</tt>、<tt>*</tt>、<tt>/</tt> など、整数に対して標準の演算を行うことができます。たとえば、Signal1 と Signal2 の和を計算してみます。</p><pre class="codeinput">SumSig = Signal1 + Signal2; <span class="comment">% Here we sum the integer signals.</span>
</pre><p>信号の和をプロットしてどこで飽和するかを確認しましょう。</p><pre class="codeinput">cla;
plot(Time1, SumSig);
hold <span class="string">on</span>;
Saturated = (SumSig == intmin(<span class="string">'int8'</span>)) | (SumSig == intmax(<span class="string">'int8'</span>)); <span class="comment">% Find where it has saturated</span>
plot(Time1(Saturated),SumSig(Saturated),<span class="string">'rd'</span>);grid;
hold <span class="string">off</span>;
</pre><img vspace="5" hspace="5" src="../integerMath_02.png" alt=""> <p>信号が飽和している箇所をマーカーで示します。</p><h2>整数イメージ データの読み込み<a name="7"></a></h2><p>次に、いくつかのイメージ データの演算を見ていきます。</p><pre class="codeinput">street1=imread(<span class="string">'street1.jpg'</span>); <span class="comment">% Load image data</span>
street2=imread(<span class="string">'street2.jpg'</span>);
whos <span class="string">street1</span> <span class="string">street2</span>
</pre><pre class="codeoutput">  Name           Size                Bytes  Class    Attributes

  street1      480x640x3            921600  uint8              
  street2      480x640x3            921600  uint8              

</pre><p>イメージは <tt>uint8</tt> データの 3 平面として格納された 24 ビット カラーであることがわかります。</p><h2>イメージの表示<a name="9"></a></h2><p>1 枚目のイメージを表示します。</p><pre class="codeinput">cla;
image(street1); <span class="comment">% Display image</span>
axis <span class="string">equal</span>; axis <span class="string">off</span>
</pre><img vspace="5" hspace="5" src="../integerMath_03.png" alt=""> <p>2 枚目のイメージを表示します。</p><pre class="codeinput">image(street2); <span class="comment">% Display image</span>
axis <span class="string">equal</span>; axis <span class="string">off</span>
</pre><img vspace="5" hspace="5" src="../integerMath_04.png" alt=""> <h2>イメージのスケーリング<a name="11"></a></h2><p>倍精度の定数でイメージをスケーリングすることができますが、整数として格納されたイメージを保つことができます。たとえば、以下のようになります。</p><pre class="codeinput">duller = 0.5 * street2; <span class="comment">% Scale image with a double constant but create an integer</span>
whos <span class="string">duller</span>
</pre><pre class="codeoutput">  Name          Size                Bytes  Class    Attributes

  duller      480x640x3            921600  uint8              

</pre><pre class="codeinput">subplot(1,2,1);
image(street2);
axis <span class="string">off</span> <span class="string">equal</span> <span class="string">tight</span>
title(<span class="string">'Original'</span>);  <span class="comment">% Display image</span>

subplot(1,2,2);
image(duller);
axis <span class="string">off</span> <span class="string">equal</span> <span class="string">tight</span>
title(<span class="string">'Duller'</span>);    <span class="comment">% Display image</span>
</pre><img vspace="5" hspace="5" src="../integerMath_05.png" alt=""> <h2>イメージの加算<a name="13"></a></h2><p>2 つのストリートのイメージを加えてゴーストのような結果を表示します。</p><pre class="codeinput">combined = street1 + duller; <span class="comment">% Add |uint8| images</span>
subplot(1,1,1)
cla;
image(combined); <span class="comment">% Display image</span>
title(<span class="string">'Combined'</span>);
axis <span class="string">equal</span>; axis <span class="string">off</span>
</pre><img vspace="5" hspace="5" src="../integerMath_06.png" alt=""> <p class="footer">Copyright 1984-2008 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Integer Arithmetic % This gives examples of performing arithmetic on signal % and image integer data.  % Copyright 1984-2008 The MathWorks, Inc.  % $Revision: 1.1.6.11.2.1 $  $Date: 2010/07/29 21:28:52 $  %% Load Integer Signal Data % Load measurement datasets comprising signals from four instruments using % 8 and 16-bit A-to-D's resulting in data saved as |int8|, |int16| and % |uint16|. Time is stored as |uint16|.  load integersignal  % Look at variables whos Signal1 Signal2 Signal3 Signal4 Time1  %% Plot Data % First we will plot two of the signals to see the signal ranges. plot(Time1, Signal1, Time1, Signal2); grid; legend('Signal1','Signal2');  %% % Here we see the values for |int8|. It is likely that these values would  % need to be scaled to calculate the actual physical value that the signal  % represents e.g. Volts.  %% Process Data % We can perform standard arithmetic on integers such as |+|, |-|, |*|, and % |/|. Let's say we wished to find the sum of Signal1 and Signal2.  SumSig = Signal1 + Signal2; % Here we sum the integer signals.  %% % Now let's plot the sum signal and see where it saturates.  cla; plot(Time1, SumSig); hold on; Saturated = (SumSig == intmin('int8')) | (SumSig == intmax('int8')); % Find where it has saturated plot(Time1(Saturated),SumSig(Saturated),'rd');grid; hold off;  %% % The markers show where the signal has saturated.   %% Load Integer Image Data % Next we will look at arithmetic on some image data. street1=imread('street1.jpg'); % Load image data street2=imread('street2.jpg'); whos street1 street2 %%  % Here we see the images are 24-bit color, stored as three planes of |uint8| data.  %% Display Images % Display first image. cla; image(street1); % Display image axis equal; axis off  %% % Display second image image(street2); % Display image axis equal; axis off  %% Scale an Image % We can scale the image by a double precision constant but keep the image % stored as integers. For example,  duller = 0.5 * street2; % Scale image with a double constant but create an integer whos duller  %% subplot(1,2,1); image(street2);  axis off equal tight title('Original');  % Display image  subplot(1,2,2); image(duller); axis off equal tight title('Duller');    % Display image   %% Add the Images % We can add the two street images together and plot the ghostly result. combined = street1 + duller; % Add |uint8| images subplot(1,1,1) cla; image(combined); % Display image title('Combined'); axis equal; axis off   displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>