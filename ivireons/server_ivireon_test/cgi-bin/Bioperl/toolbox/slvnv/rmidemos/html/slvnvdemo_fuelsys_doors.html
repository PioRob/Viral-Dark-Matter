
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML is auto-generated from an M-file.
To make changes, update the M-file and republish this document.
      --><title>Managing Requirements for Fault-Tolerant Fuel Control System (IBM Rational DOORS)</title><meta name="generator" content="MATLAB 7.10"><meta name="date" content="2010-01-04"><meta name="m-file" content="slvnvdemo_fuelsys_doors"><link rel="stylesheet" type="text/css" href="../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit slvnvdemo_fuelsys_doors">Open slvnvdemo_fuelsys_doors.m in the Editor</a></div><div class="right"><a href="matlab:echodemo slvnvdemo_fuelsys_doors">Run in the Command Window</a></div></div><div class="content"><h1>Managing Requirements for Fault-Tolerant Fuel Control System (IBM Rational DOORS)</h1><!--introduction--><p>The Requirements Management Interface (RMI) provides tools for creating and reviewing links between Simulink objects and requirements documents. This demo illustrates linking model objects to requirements stored in Telelogic DOORS. See the <a href="matlab:showdemo('slvnvdemo_fuelsys_office')">General RMI demo</a> for more details on using RMI.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Model Used in this Demo</a></li><li><a href="#2">Basic Linking to DOORS Objects</a></li><li><a href="#3">Link to Current Selection in DOORS</a></li><li><a href="#4">Viewing and Navigating Links from Simulink to DOORS</a></li><li><a href="#5">About Surrogate Modules and Synchronization</a></li><li><a href="#6">Synchronizing your Simulink Model with a DOORS Database</a></li><li><a href="#7">Using Model Advisor for RMI Consistency Checking</a></li><li><a href="#8">Copying Link Information from Simulink to DOORS</a></li><li><a href="#9">Copying Link Information from DOORS to Simulink</a></li><li><a href="#10">Review your Changes Using User Tags</a></li><li><a href="#11">Removing Links in Simulink and DOORS</a></li><li><a href="#12">Optional Direct Links from DOORS to Simulink</a></li></ul></div><h2>Model Used in this Demo<a name="1"></a></h2><p>For the purposes of this demo, an <a href="matlab:open_system('slvnvdemo_fuelsys_doorsreq')">example model of a fault-tolerant fuel control system</a> is included. Use it for the exercises presented below. Some steps will require modifications to the model. If you intend to save your results, create a writable copy of the model before you continue along this demo.</p><pre class="codeinput">open_system(<span class="string">'slvnvdemo_fuelsys_doorsreq'</span>);
</pre><img vspace="5" hspace="5" src="slvnvdemo_fuelsys_doors_01.png" alt=""> <h2>Basic Linking to DOORS Objects<a name="2"></a></h2><p>You can link a model object to requirements stored in a DOORS database (DOORS objects). You do not need to modify DOORS documents when creating links. To try this out with some temporary module in your DOORS database:</p><div><ul><li>Pick some basic block in the main diagram, for example, the <a href="matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/Metered%20Fuel')">Metered Fuel Scope</a>. Right-click the block and select <b>Requirements &gt; Edit/Add Links</b>. Link Settings dialog opens.</li><li>Click <b>New</b> to create a new requirement.</li><li>Select <b>DOORS Item</b> in the <b>Document type</b> drop-down box.</li></ul></div><p><img vspace="5" hspace="5" src="doors_add.jpg" alt=""> </p><div><ul><li>Specify a unique target module ID in the <b>Document</b> input field or use the <b>Browse</b> button to select the target module in DOORS database.</li><li>Enter target object ID in the <b>Location Identifier</b> field, or use the <b>Document Index</b> tab to select the target object in a chosen module.</li><li>Click <b>Apply</b> or <b>OK</b> to store the new requirement link.</li><li>Right-click the same object again to see the new link label listed in the top portion of the context menu for this object.</li></ul></div><h2>Link to Current Selection in DOORS<a name="3"></a></h2><p>An easier way is to use selection-based linking via the <b>Requirements</b> option in context menus of Simulink and Stateflow objects that support requirements linking:</p><p><img vspace="5" hspace="5" src="doors_selection.jpg" alt=""> </p><p>Links created via context menu shortcuts have the <b>Description</b> field set to the header of target object in DOORS. Try this out with some other object in the demo model, for example:</p><div><ul><li>Select any object in your test module in DOORS.</li><li>Right-click <a href="matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/throttle%20sensor')">throttle sensor</a> and select <b>Add link to current DOORS object</b> in <b>Requirements</b> context menu to create a link.</li><li>Right-click the <a href="matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/throttle%20sensor')">throttle sensor</a> again and locate the link label at the top of <b>Requirements</b> context menu to confirm that the link was added. You may use <b>Edit/Add Links</b> dialog later to adjust the description label or keywords.</li></ul></div><p>The <b>DOORS</b> button in the Requirements dialog box provides a combined approach: use the button to automatically fill in all the input fields with the data from the current selected DOORS object, and then adjust as required before saving the changes. You can also use the <b>DOORS</b> button to change existing links to other objects in DOORS.</p><p><img vspace="5" hspace="5" src="doors_add_button.jpg" alt=""> </p><p>The default behavior of selection-based linking is to create a one-way link from Simulink to DOORS. DOORS documents remain unchanged. You can enable two-way linking by activating the <b>Modify documents to insert links to models</b> checkbox in the <b>Selection Linking</b> tab of the Requirements Settings dialog box as demonstrated in the last section of this demo.</p><h2>Viewing and Navigating Links from Simulink to DOORS<a name="4"></a></h2><p>You highlight and navigate DOORS links in the same way you do that with other types of links, see <a href="matlab:web('html/slvnvdemo_fuelsys_office.html')">General RMI demo</a> for details.</p><div><ul><li>Use <b>Tools &gt; Requirements &gt; Highlight model</b> to <a href="matlab:rmidemo_callback('open_highlight','slvnvdemo_fuelsys_doorsreq')">highlight all requirements in the demo model</a>.</li><li>Make sure DOORS is running and logged in.</li><li>Right-click on one of the highlighted objects that you used to create new links in the previous section.</li><li>Expand <b>Requirements</b> submenu. Labels of the links you created should be visible at the top.</li><li>Click on the link label. Your test module opens in DOORS with the correct object selected.</li></ul></div><p>Be careful to only try this with the links you created. There are other links in the model that will not work just yet. We will cover fixing those links in sections below.</p><pre class="codeinput">rmi(<span class="string">'highlightModel'</span>, <span class="string">'slvnvdemo_fuelsys_doorsreq'</span>);
</pre><h2>About Surrogate Modules and Synchronization<a name="5"></a></h2><p>Surrogate module workflow is supported for DOORS to allow two-way linking without needing to modify DOORS requirements modules. The following picture illustrates the workflow.</p><p><img vspace="5" hspace="5" src="doors_synchronization.jpg" alt=""> </p><p>A new formal DOORS module, referred as a <b>surrogate module</b>, is automatically generated by Simulink to be used as a DOORS representation of the Simulink model. You can choose to map all the objects in your model, or only those with links to DOORS, or pick one of the intermediate options as discussed in the documentation.</p><p>You can create direct links to requirements in DOORS, as demonstrated in previous sections (marked 3 in the picture) and optional matching direct links from DOORS documents to Simulink objects, as demonstrated in the last section of this demo (marked 2 in the picture).</p><p>Additionally, with the surrogate module present in DOORS, you can establish links within DOORS between the items in surrogate modules and requirements stored in DOORS (marked 1 in the picture), while navigation to and from Simulink is provided by surrogate item links (marked 4 in the picture).</p><p>Surrogate module workflow provides the following advantages:</p><div><ul><li>Bi-directional linking is possible without the need to modify documents in DOORS or the models in Simulink. All required information is stored in the surrogate modules and corresponding link modules.</li><li>You can manage and analyze links in the DOORS environment without necessarily running Simulink, including using the native reporting capabilities of DOORS.</li></ul></div><p><img vspace="5" hspace="5" src="doors_synchronize.jpg" alt=""> </p><p>Below is an example screenshot of the autogenerated Surrogate module. Note that DOORS hierarchy mirrors the structure of the originating Simulink model, and DOORS object headers match Simulink object names:</p><p><img vspace="5" hspace="5" src="doors_surrogate.jpg" alt=""> </p><h2>Synchronizing your Simulink Model with a DOORS Database<a name="6"></a></h2><p>Normally, you would use <b>Tools &gt; Requirements &gt; Synchronize with DOORS</b> menu item to create a new DOORS surrogate module for your Simulink model.</p><p>For the purposes of this demo, an existing DOORS project is provided as an archive, including the surrogate module with links to other modules. To try out the interactive features of this demo, restore the project into your DOORS database, and then re-synchronize the demo model as explained below.</p><div><ul><li>Use the <b>File &gt; Restore</b> feature in DOORS and point it to <b>DemoRMI.dpa</b> archive provided with your MATLAB installation under <b>toolbox/slvnv/rmidemos/fuelsys_req_docs/</b>. If your already have a project named <b>DemoRMI</b> in your DOORS database, DOORS appends a number to the project name. As shown in the screenshot below, the project includes one link module and three formal modules. One formal module is the DOORS surrogate for <a href="matlab:open_system('slvnvdemo_fuelsys_doorsreq')">slvnvnvdemo_fuelsys_doorsreq model</a>; the other two are example modules produced by importing Microsoft Word documents from <a href="matlab:web('html/slvnvdemo_fuelsys_office.html')">General RMI demo</a>.</li></ul></div><p><img vspace="5" hspace="5" src="doors_restore.jpg" alt=""> </p><div><ul><li>Extract all the included modules and open the surrogate module.</li><li>Note the red and orange link navigation triangles in two of the extracted modules. Right-click to navigate between modules. These links are preserved through the backup-restore procedure.</li></ul></div><p><img vspace="5" hspace="5" src="doors_restored.jpg" alt=""> </p><p>Try navigating from the extracted surrogate module to the corresponding object in Simulink:</p><div><ul><li>Click <b>1.11.4.1 fuel rate</b> in the <b>slvnvdemo_fuelsys_doorsreq</b> surrogate module.</li><li>In main menu of the module window, click <b>MATLAB &gt; Select Item</b>. A correct subsystem diagram opens and the corresponding input is highlighted.</li></ul></div><p>Navigation from Simulink objects to the surrogate module is broken, because the extracted modules have new numeric IDs in your DOORS database, trying to navigate <b>DOORS Surrogate Item</b> link on any object will produce an error.</p><p><img vspace="5" hspace="5" src="doors_wrong_surrogate.jpg" alt=""> </p><p>To repair <b>DOORS Surrogate Item</b> links on all objects in the <a href="matlab:open_system('slvnvdemo_fuelsys_doorsreq')">slvnvnvdemo_fuelsys_doorsreq model</a> after you have successfully restored the <b>DemoRMI</b> project, resynchronize the Simulink model with the restored instance of the surrogate.</p><div><ul><li>In the model window, select <b>Tools &gt; Requirements &gt; Synchronize with DOORS</b> to open a the Synchronization Settings dialog box.</li><li>Enter the following settings, using the correct DOORS path for in the <b>DOORS surrogate module path and name</b> input field, depending on the location of the restored project, or simply make it a current project in DOORS and use "./" notation: enter "./slvnvdemo_fuelsys_doorsreq".</li></ul></div><p><img vspace="5" hspace="5" src="doors_dialog.jpg" alt=""> </p><div><ul><li>Do not enable the <b>Save Simulink model</b> checkbox at the bottom, you will not be able to save changes to demo model unless you use a writable copy.</li><li>Simulink might warn you about the previous synchronization path. Click <b>Continue</b> to proceed with the new path. You may get the following message in the command window: "No update needed for the surrogate module". Your restored surrogate module is correct as is.</li><li>Retry navigation from any object in the model to corresponding DOORS object in the surrogate module by selecting <b>Requirements &gt; DOORS Surrogate Item</b> on the context menu for that Simulink object. This should now highlight the corresponding DOORS item in the surrogate module.</li></ul></div><h2>Using Model Advisor for RMI Consistency Checking<a name="7"></a></h2><p>The demo model comes with some pre-existing links to DOORS document, <b>FuelSys Design Description</b> module. Similarly to the original <b>DOORS Surrogate Item</b> links, these links are broken, because the restored copy of the module has a new ID in your local database. For example, right-click the <a href="matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/fuel%20rate%20controller/Airflow%20calculation')">Airflow calculation</a> subsystem in the model and select "1.2.1 Mass Airflow estimation" from the <b>Requirements</b> submenu. This will produce an error message.</p><p>We will now fix these links using RMI consistency checking in <a href="matlab:rmidemo_callback('check','slvnvdemo_fuelsys_doorsreq')">Model Advisor</a>.</p><div><ul><li>In model window click <b>Tools &gt; Requirements &gt; Consistency checking</b> to bring up the <a href="matlab:rmidemo_callback('check','slvnvdemo_fuelsys_doorsreq')">Model Advisor</a> graphical interface.</li><li>Locate <b>Identify requirement links with missing documents</b> item under <b>Requirements consistency checking</b> and select it with a mouse.</li><li>Click <b>Run This Check</b> button at the top-left of the right-hand panel. Blocks with broken links are listed. You can fix listed inconsistencies one-by-one or you can use <b>Fix All</b> link at the bottom. We will use the <b>Fix All</b> shortcut, because we know that all broken links need to be redirected to the same restored copy of the original module.</li></ul></div><p><img vspace="5" hspace="5" src="advisor_fix_docs.jpg" alt=""> </p><div><ul><li>Click <b>Fix All</b> link at the bottom - DOORS database browser comes up.</li></ul></div><p><img vspace="5" hspace="5" src="doors_browse.jpg" alt=""> </p><div><ul><li>Locate the restored <b>FuelSys Design Description</b> module in your database and select it with a mouse.</li><li>Click <b>OK</b> to close DOORS database browser.</li><li>Click <b>Run This Check</b> again. The check should now pass.</li><li>Re-try navigation: right-click the <a href="matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/fuel%20rate%20controller/Airflow%20calculation')">Airflow calculation</a> subsystem in the model and select "1.2.1 Mass Airflow estimation" from the <b>Requirements</b> submenu. This will now highlight the correct object in one of the DOORS modules you restored from the included archive.</li></ul></div><h2>Copying Link Information from Simulink to DOORS<a name="8"></a></h2><p>Now that your direct links from Simulink to DOORS are correct, you can use synchronization to copy link information into the DOORS database. Links will be duplicated in the DOORS project, where you can use native DOORS navigation, analysis and reporting tools. These links between the surrogate and other DOORS modules can even be reused with a new copy of the model.</p><div><ul><li>Re-open <b>Tools &gt; Requirements &gt; Synchronize with DOORS</b> dialog and configure the following settings:</li></ul></div><p><img vspace="5" hspace="5" src="doors_dialog_sl_to_doors.jpg" alt=""> </p><div><ul><li>Make sure to disable the <b>Remove unmatched in DOORS</b> checkbox, because there are unmatched links in the restored project that you need later.</li><li>Click <b>Synchronize</b> button at the bottom.</li><li>Give it a couple of seconds and check the surrogate module in DOORS. It should now display more links - some that existed in the original restored project (links to the <b>FuelSys Requirements Specification</b> module), and some that were just copied from Simulink (links to the <b>FuelSys Design Description</b> module).</li><li>Locate the <a href="matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/fuel%20rate%20controller/Airflow%20calculation')">Airflow calculation subsystem</a></li><li>Navigate to the corresponding surrogate object using the <b>Requirements &gt; DOORS Surrogate Item</b> on the context menu for this block.</li><li>The new red triangle shows an outgoing link for <b>1.12.5 Airflow calculation</b> item in DOORS. Right-click to navigate this DOORS link - this brings you to item <b>1.2.1 Mass airflow estimation</b> in the <b>FuelSys Design Description</b> module.</li></ul></div><h2>Copying Link Information from DOORS to Simulink<a name="9"></a></h2><p>Synchronization via surrogate module provides a convenient way to propagate system requirements updates in DOORS to corresponding Simulink implementation elements. To demonstrate this workflow, the restored project contains DOORS links from the surrogate module to the <b>FuelSys Requirements Specifications</b> DOORS module that are not present in the Simulink model. For example,</p><div><ul><li>Use DOORS to navigate from <b>2.1 Normal Mode of Operation</b> in the <b>FuelSys Requirements Specification</b> module back to the "1.11.3 fuel" item in the surrogate module.</li><li>Use <b>MATLAB &gt; Select Item</b> in the surrogate module main menu to locate the corresponding source object in Simulink model.</li><li>Right-click the located <a href="matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/engine%20gas%20dynamics/fuel')">fuel input</a> element in simulink and check <b>Requirements</b> in the context menu. <b>DOORS Surrogate Item</b> is the only available link: there are no links to documents.</li></ul></div><p>To copy link information from DOORS to Simulink, re-synchronize with <b>Update links during synchronization</b> enabled, and select <b>from DOORS to Simulink</b>.</p><div><ul><li>Re-open the <b>Tools &gt; Requirements &gt; Synchronize with DOORS</b> dialog.</li><li>Configure the following synchronization options:</li></ul></div><p><img vspace="5" hspace="5" src="doors_dialog_doors_to_sl.jpg" alt=""> </p><p>It is now OK to enable <b>Remove unmatched in Simulink</b> checkbox. After the previous synchronization step, there are no unmatched links in Simulink.</p><p>Note that the demo model is not writable, so leave the <b>Save Simulink model</b> checkbox at the bottom should be unchecked.</p><p><a href="matlab:rmidemo_callback('open_highlight','slvnvdemo_fuelsys_doorsreq/fuel%20rate%20controller')">Keep some diagrams open and highlighted</a> to visualize changes when new links are added in Simulink. Note that only the <a href="matlab:rmidemo_callback('open_highlight','slvnvdemo_fuelsys_doorsreq')">fuel rate controller</a> is highlighted in the root diagram.</p><div><ul><li>Click <b>Synchronize</b>. The surrogate module window may come up to the front, but there are no red markers, because there are no changes in DOORS.</li><li>Check the familiar <a href="matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/engine%20gas%20dynamics/fuel')">fuel input</a>. in Simulink. Right-click and expand the <b>Requirements</b> section of the context menu. Notice the new link below the <b>DOORS Surrogate Item</b> link: "-&gt;2.1  Normal Mode of Operation".  The arrow prefix indicates that this requirement was not created in Simulink but copied from DOORS.</li><li>Click the new link to navigate to the corresponding requirement in DOORS - <b>2.1 Normal Mode of Operation</b> section opens in <b>FuelSys Requirements Specification</b> module.</li></ul></div><h2>Review your Changes Using User Tags<a name="10"></a></h2><p>You now apply the user tag filter to confirm the changes you made to the model. All DOORS requirements that existed in the original version of the demo model were tagged "design". You now use this fact to selectively highlight or hide these links:</p><div><ul><li>Make sure <a href="matlab:rmidemo_callback('open_highlight','slvnvdemo_fuelsys_doorsreq/fuel%20rate%20controller')">fuel rate controller subsystem</a> is open and requirements are highlighted.</li><li>Open the <b>Tools &gt; Requirements &gt; Settings</b> dialog to the <b>Filters</b> tab and configure as shown below.</li></ul></div><p><img vspace="5" hspace="5" src="settings_filter_design.jpg" alt=""> </p><div><ul><li>Check the highlighted objects in diagrams. These are the links that existed in the original model.</li><li>Now modify the <b>Filters</b> settings as shown below to exclude "design" links:</li></ul></div><p><img vspace="5" hspace="5" src="settings_filter_no_design.jpg" alt=""> </p><div><ul><li>Check the Simulink model. The highlighting now points to links you have just copied from DOORS database.</li></ul></div><h2>Removing Links in Simulink and DOORS<a name="11"></a></h2><p>Synchronization also allows you to maintain consistency when links are removed. For example:</p><div><ul><li>Locate again the <a href="matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/engine%20gas%20dynamics/fuel')">fuel input</a>.</li><li>Right-click, select <b>Requirements &gt; Edit/Add links</b>.</li><li>Select the "-&gt;2.1  Normal Mode of Operation" item in the listbox with a mouse</li><li>Click <b>Delete</b> button to remove the item from the list.</li><li>Click <b>OK</b> to apply the changes.</li><li>Check the context menu again to confirm that the link is gone.</li><li>Note that the link is still present in DOORS, connecting <b>1.11.3 fuel</b> in the surrogate module to "2.1 Normal Mode of Operation" in the <b>FuelSys Requirements Specification</b> module.</li><li>Purge the removed link from DOORS by re-running synchronization with link updates option set to <b>Simulink to DOORS</b> and the <b>Remove unmatched in DOORS</b> checkbox enabled.</li></ul></div><p><img vspace="5" hspace="5" src="doors_dialog_sl_to_doors_purge.jpg" alt=""> </p><div><ul><li>Click <b>Synchronize</b>. Observe the link in DOORS disappear.</li></ul></div><p>Similarly, when links are removed in DOORS and you need to propagate the changes to Simulink, rerun synchronization with the <b>DOORS to Simulink</b> option selected and <b>Remove unmatched in Simulink</b> checkbox enabled.</p><h2>Optional Direct Links from DOORS to Simulink<a name="12"></a></h2><p>When using selection linking with DOORS, you have an option to automatically insert reference objects into DOORS documents to enable direct navigation from DOORS to Simulink without the need for the surrogate module.</p><p>WARNING: The DOORS document is modified when you use this feature of RMI.</p><div><ul><li>Open the <b>Selection Linking</b> tab in <b>Tools &gt; Requirements &gt; Settings</b> dialog.</li><li>Enable the <b>Modify documents to insert links to models</b> checkbox.</li></ul></div><p><img vspace="5" hspace="5" src="menu_settings_modify.jpg" alt=""> </p><p>Now, when you use selection linking, Simulink creates navigation objects.</p><div><ul><li>Select "2.2.6 Speed Sensor Failure" in <b>FuelSys Requirements Specification</b> module.</li><li>Locate the <a href="matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/fuel%20rate%20controller/Sensor%20correction%20and%20Fault%20Redundancy/Speed%20Estimate')">Speed Estimate</a>,</li><li>Right-click and expand the <b>Requirements</b> section of the context menu.</li><li>Click <b>Add link to current DOORS object</b>.</li><li>Observe the new object inserted as the first child of the target object in DOORS.</li></ul></div><p><img vspace="5" hspace="5" src="doors_navigation.jpg" alt=""> </p><div><ul><li>Close all Simulink model windows, answer "No" when prompted to save the changes. You do not want to modify the original demo.</li><li>Click the just inserted navigation object in DOORS.</li><li>Use <b>MATLAB &gt; Select Item</b> from the main menu of the <b>FuelSys Requirements Specification</b> module. The correct diagram opens in Simulink and the linked block is highlighted.</li></ul></div><p>Note: You have just enabled navigation from DOORS to Simulink model without needing to save any changes in the model. Consider this workflow when modifications to models need to be avoided.</p><p>Normally, when the Simulink model is saved after creating links, two-way navigation is possible while bypassing the complexity of surrogate synchronization process. However, there is the disadvantage of cluttering DOORS documents with Simulink navigation objects.</p><p>To avoid making unintentional modifications to your DOORS documents, re-open the <b>Tools &gt; Requirements &gt; Settings</b> dialog to the <b>Selection Linking</b> tab and disable <b>Modify documents to insert links to models</b> checkbox.</p><p class="footer">Copyright 2008-2009 The MathWorks, Inc.<br>
          Published with MATLAB&reg; 7.10</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!--
##### SOURCE BEGIN #####
%% Managing Requirements for Fault-Tolerant Fuel Control System (IBM Rational DOORS)
% The Requirements Management Interface (RMI) provides tools for creating and
% reviewing links between Simulink objects and requirements documents. 
% This demo illustrates linking model objects to requirements stored in 
% Telelogic DOORS. See the
% <matlab:showdemo('slvnvdemo_fuelsys_office') General RMI demo>
% for more details on using RMI.

% Copyright 2010 The MathWorks, Inc.
% $Revision: 1.1.4.2 $  $Date: 2009/12/25 17:53:38 $

%% Model Used in this Demo
%
% For the purposes of this demo, an 
% <matlab:open_system('slvnvdemo_fuelsys_doorsreq') example model of a fault-tolerant fuel control system>
% is included. Use it for the exercises presented below. Some steps will
% require modifications to the model. If you intend to save your results,
% create a writable copy of the model before you continue along this demo.

open_system('slvnvdemo_fuelsys_doorsreq');

%% Basic Linking to DOORS Objects
%
% You can link a model object to requirements stored in a DOORS database
% (DOORS
% objects). You do not need to modify DOORS documents when creating links.
% To try this out with some temporary module in your DOORS database:
%
% * Pick some basic block in the main diagram, for example, the
% <matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/Metered%20Fuel') Metered Fuel Scope>.
% Right-click the block and select *Requirements > Edit/Add Links*. Link Settings
% dialog opens.
% * Click *New* to create a new requirement.
% * Select *DOORS Item* in the *Document type* drop-down box.
%
% <<doors_add.jpg>>
%
% * Specify a unique target module ID in the *Document* input field or use
% the *Browse* button to select the target module in DOORS database.
% * Enter target object ID in the *Location Identifier* field, or use the
% *Document Index* tab to select the target object in a
% chosen module.
% * Click *Apply* or *OK* to store the new requirement link.
% * Right-click the same object again to see the new link label listed in
% the top portion of the context menu for this object.


%% Link to Current Selection in DOORS
%
% An easier way is to use selection-based linking via the *Requirements*
% option in context menus of Simulink and Stateflow objects that support
% requirements linking:
%
% <<doors_selection.jpg>>
%
% Links created via context menu shortcuts have the *Description* field
% set to the header of target object in DOORS. Try this out 
% with some other object in the demo model, for example:
%
% * Select any object in your test module in DOORS. 
% * Right-click <matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/throttle%20sensor') throttle sensor> 
% and select *Add link to current DOORS object* in *Requirements* context menu to create a link.
% * Right-click the <matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/throttle%20sensor') throttle sensor>
% again and locate the link label at the top of *Requirements* context menu to confirm that the link was added. 
% You may use *Edit/Add Links* dialog later to adjust the description label or keywords.
%
% The *DOORS* button in the Requirements dialog box provides a combined
% approach: use the button to automatically fill in all the input fields 
% with the data from the current selected DOORS object, and then adjust
% as required before saving the changes. You can also use the *DOORS* button to
% change existing links to other objects in DOORS.
%
% <<doors_add_button.jpg>>
%
% The default behavior of selection-based linking is to create a one-way
% link from Simulink to DOORS. DOORS documents remain unchanged.
% You can enable two-way linking by activating the *Modify documents to insert
% links to models* checkbox in the *Selection Linking* tab of the
% Requirements Settings dialog box as demonstrated in the last section of
% this demo.
%

%% Viewing and Navigating Links from Simulink to DOORS
% 
% You highlight and navigate DOORS links in the same way you do that with
% other types of links, see <matlab:web('html/slvnvdemo_fuelsys_office.html') General RMI demo>
% for details. 
%
% * Use *Tools > Requirements > Highlight model* to 
% <matlab:rmidemo_callback('open_highlight','slvnvdemo_fuelsys_doorsreq') highlight all requirements in the demo model>.
% * Make sure DOORS is running and logged in.
% * Right-click on one of the highlighted objects that you used to create new links in the previous section.
% * Expand *Requirements* submenu. Labels of the links you created should
% be visible at the top.
% * Click on the link label. Your test module opens in DOORS with the
% correct object selected.
% 
% Be careful to only try this with the links you created. 
% There are other links in the model that will not work just yet. We will
% cover fixing those links in sections below.
% 

rmi('highlightModel', 'slvnvdemo_fuelsys_doorsreq');

%% About Surrogate Modules and Synchronization
%
% Surrogate module workflow is supported for DOORS to allow two-way linking
% without needing to modify DOORS requirements modules. The following
% picture illustrates the workflow.
%
% <<doors_synchronization.jpg>>
%
% A new formal DOORS module, referred as a *surrogate module*, is automatically
% generated by Simulink to be used as a DOORS representation of the Simulink model.
% You can choose to map all the objects in your model, or only those with
% links to DOORS, or pick one of the intermediate options as discussed in
% the documentation. 
%
% You can create direct links to requirements in DOORS, as demonstrated 
% in previous sections (marked 3 in the picture) and optional matching 
% direct links from DOORS documents to Simulink objects, as demonstrated 
% in the last section of this demo (marked 2 in the picture).
%
% Additionally, with the surrogate module present in DOORS, you can
% establish links within DOORS between the items in surrogate modules
% and requirements stored in DOORS (marked 1 in the picture), while
% navigation to and from Simulink is provided by surrogate item links
% (marked 4 in the picture).
%
% Surrogate module workflow provides the following advantages:
%
% * Bi-directional linking is possible without the need to modify
% documents in DOORS or the models in Simulink. All required
% information is stored in the surrogate modules and corresponding link
% modules.
% * You can manage and analyze links in the DOORS environment without 
% necessarily running Simulink, including using the native reporting
% capabilities of DOORS. 
%
% <<doors_synchronize.jpg>>
%
% Below is an example screenshot of the autogenerated Surrogate module. Note that
% DOORS hierarchy mirrors the structure of the originating Simulink model,
% and DOORS object headers match Simulink object names:
%
% <<doors_surrogate.jpg>>

%% Synchronizing your Simulink Model with a DOORS Database
%
% Normally, you would use *Tools > Requirements > Synchronize with DOORS* 
% menu item to create a new DOORS
% surrogate module for your Simulink model.
% 
% For the purposes of this demo, an existing DOORS project is provided as
% an archive, including the surrogate module with links to other modules.
% To try out the interactive features of this
% demo, restore the project into your DOORS database, and then
% re-synchronize the demo model as explained below.
% 
% * Use the *File > Restore* feature in DOORS and point it to 
% *DemoRMI.dpa* archive provided with your MATLAB installation
% under *toolbox/slvnv/rmidemos/fuelsys_req_docs/*.
% If your already have a project named *DemoRMI* in your DOORS database,
% DOORS appends a number to the project name. 
% As shown in the screenshot below, the project includes one link module 
% and three formal modules. One formal module is the DOORS surrogate for 
% <matlab:open_system('slvnvdemo_fuelsys_doorsreq') slvnvnvdemo_fuelsys_doorsreq model>;
% the other two are example modules produced by importing
% Microsoft Word documents from
% <matlab:web('html/slvnvdemo_fuelsys_office.html') General RMI demo>.
%
% <<doors_restore.jpg>>
%
% * Extract all the included modules and open the surrogate module.
% * Note the red and orange link navigation triangles in two of the extracted modules. 
% Right-click to navigate between modules. These links are preserved
% through the backup-restore procedure.
%
% <<doors_restored.jpg>>
%
% Try navigating from the extracted surrogate module to the corresponding object
% in Simulink:
%
% * Click *1.11.4.1 fuel rate* in the *slvnvdemo_fuelsys_doorsreq*
% surrogate module.
% * In main menu of the module window, click *MATLAB > Select Item*. A
% correct subsystem diagram opens and the corresponding input is
% highlighted.
% 
% Navigation from Simulink objects to the surrogate module is broken, because
% the extracted modules have new numeric IDs in your DOORS database, trying
% to navigate *DOORS Surrogate Item* link on any object will produce an
% error.
%
% <<doors_wrong_surrogate.jpg>>
%
% To repair *DOORS Surrogate Item* links on all objects in the
% <matlab:open_system('slvnvdemo_fuelsys_doorsreq') slvnvnvdemo_fuelsys_doorsreq model>
% after you have successfully restored the *DemoRMI* project, resynchronize
% the Simulink model with the restored instance of the surrogate.
%
% * In the model window, select 
% *Tools > Requirements > Synchronize with DOORS* to open a the
% Synchronization Settings dialog box. 
% * Enter the following settings, using the correct
% DOORS path for in the *DOORS surrogate module path and name* input field, 
% depending on the location of the restored project, or simply make it a
% current project in DOORS and use "./" notation: enter
% "./slvnvdemo_fuelsys_doorsreq".
% 
% <<doors_dialog.jpg>>
%
% * Do not enable the *Save Simulink model* checkbox at the bottom, you will
% not be able to save changes to demo model unless you use a writable
% copy.
% * Simulink might warn you about the previous synchronization path. Click
% *Continue* to proceed with the new path. 
% You may get the following message in the command window:
% "No update needed for the surrogate module". Your restored surrogate 
% module is correct as is. 
% * Retry navigation from any object in the model to
% corresponding DOORS object in the surrogate module by
% selecting *Requirements > DOORS Surrogate Item* on the context
% menu for that Simulink object. This should now highlight the
% corresponding DOORS item in the surrogate module.
%

%% Using Model Advisor for RMI Consistency Checking
%
% The demo model comes with some pre-existing links to
% DOORS document, *FuelSys Design Description* module. Similarly to the
% original *DOORS Surrogate Item* links, these links are broken, because
% the restored copy of the module has a new ID in your local database. 
% For example, right-click the 
% <matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/fuel%20rate%20controller/Airflow%20calculation') Airflow calculation>
% subsystem in the model and select "1.2.1 Mass Airflow estimation" from
% the *Requirements* submenu. This will produce an error message. 
% 
% We will now fix these links using RMI consistency checking in 
% <matlab:rmidemo_callback('check','slvnvdemo_fuelsys_doorsreq') Model Advisor>.
% 
% * In model window click *Tools > Requirements > Consistency checking* to bring up the 
% <matlab:rmidemo_callback('check','slvnvdemo_fuelsys_doorsreq') Model Advisor>
% graphical interface.
% * Locate *Identify requirement links with missing documents* item under
% *Requirements consistency checking* and select it with a mouse.
% * Click *Run This Check* button at the top-left of the right-hand panel. 
% Blocks with broken links are listed. You can fix listed
% inconsistencies one-by-one or you can use *Fix All* link at the bottom.
% We will use the *Fix All* shortcut, because we know that all broken links
% need to be redirected to the same restored copy of the original module.
% 
% <<advisor_fix_docs.jpg>>
% 
% * Click *Fix All* link at the bottom - DOORS database browser comes up.
%
% <<doors_browse.jpg>>
%
% * Locate the restored *FuelSys Design Description* module in your
% database and select it with a mouse.
% * Click *OK* to close DOORS database browser.
% * Click *Run This Check* again. The check should now pass.
% * Re-try navigation: right-click the 
% <matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/fuel%20rate%20controller/Airflow%20calculation') Airflow calculation>
% subsystem in the model and select "1.2.1 Mass Airflow estimation" from
% the *Requirements* submenu. This will now highlight the correct object in
% one of the DOORS modules you restored from the included archive.

%% Copying Link Information from Simulink to DOORS
%
% Now that your direct links from Simulink to DOORS are correct, you can
% use synchronization to copy link information into the DOORS database.
% Links will be duplicated in the DOORS project, where you can use native
% DOORS navigation, analysis and reporting tools. These links between the
% surrogate and other DOORS modules can even be reused with a new copy of
% the model.
% 
% * Re-open *Tools > Requirements > Synchronize with DOORS* dialog and
% configure the following settings:
%
% <<doors_dialog_sl_to_doors.jpg>>
%
% * Make sure to disable the *Remove unmatched in DOORS* checkbox, because
% there are unmatched links in the restored project that you need later.
% * Click *Synchronize* button at the bottom. 
% * Give it a couple of seconds and check the surrogate module in
% DOORS. It should now display more links - some that existed in the
% original restored project (links to the *FuelSys Requirements Specification* module), 
% and some that were just copied from Simulink (links to the *FuelSys Design Description* module).
% * Locate the
% <matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/fuel%20rate%20controller/Airflow%20calculation') Airflow calculation subsystem>
% * Navigate to the corresponding surrogate object using the
% *Requirements > DOORS Surrogate Item* on the context menu for this block.
% * The new red triangle shows an outgoing link for *1.12.5
% Airflow calculation* item in DOORS. 
% Right-click to navigate this DOORS link - this brings you to item *1.2.1
% Mass airflow estimation* in the *FuelSys Design Description* module.
%

%% Copying Link Information from DOORS to Simulink
%
% Synchronization via surrogate module provides a convenient way to
% propagate system requirements updates in DOORS to corresponding
% Simulink implementation elements.
% To demonstrate this workflow, the restored project contains DOORS links
% from the surrogate module to the *FuelSys Requirements Specifications* DOORS
% module that are not present in the Simulink model. For example, 
%
% * Use DOORS to navigate from *2.1 Normal Mode of Operation* in the
% *FuelSys Requirements Specification* module back to the "1.11.3 fuel"
% item in the surrogate module.
% * Use *MATLAB > Select Item* in the surrogate module main menu to locate the 
% corresponding source object in Simulink model.
% * Right-click the located 
% <matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/engine%20gas%20dynamics/fuel') fuel input>
% element in simulink and check *Requirements* in the context menu. *DOORS Surrogate Item*
% is the only available link: there are no links to documents.
%
% To copy link information from DOORS to Simulink, re-synchronize with
% *Update links during synchronization* enabled, and select *from DOORS to
% Simulink*.
%
% * Re-open the *Tools > Requirements > Synchronize with DOORS* dialog.
% * Configure the following synchronization options:
%
% <<doors_dialog_doors_to_sl.jpg>>
% 
% It is now OK to enable *Remove unmatched in Simulink* checkbox. After
% the previous synchronization step, there are no unmatched links in
% Simulink.
%
% Note that the demo model is not writable, so leave the *Save Simulink
% model* checkbox at the bottom should be unchecked.
% 
% <matlab:rmidemo_callback('open_highlight','slvnvdemo_fuelsys_doorsreq/fuel%20rate%20controller') Keep some diagrams open and highlighted>
% to visualize changes when new links are added in Simulink. Note that only the
% <matlab:rmidemo_callback('open_highlight','slvnvdemo_fuelsys_doorsreq') fuel rate controller> 
% is highlighted in the root diagram.
% 
% * Click *Synchronize*. The surrogate module window may come up to
% the front, but there are no red markers, because there are no changes
% in DOORS.
% * Check the familiar
% <matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/engine%20gas%20dynamics/fuel') fuel input>.
% in Simulink. Right-click and expand the *Requirements* section of the context
% menu. Notice the new link below the *DOORS Surrogate Item* link:
% "->2.1  Normal Mode of Operation".  The arrow prefix indicates that this
% requirement was not created in Simulink but copied from DOORS.
% * Click the new link to navigate to the corresponding requirement in
% DOORS - *2.1 Normal Mode of Operation* section opens in *FuelSys
% Requirements Specification* module.
%

%% Review your Changes Using User Tags
%
% You now apply the user tag filter to confirm the changes you made to the
% model. All DOORS requirements that existed in the original version of the
% demo model were tagged "design". You now use this fact to selectively
% highlight or hide these links:
%
% * Make sure 
% <matlab:rmidemo_callback('open_highlight','slvnvdemo_fuelsys_doorsreq/fuel%20rate%20controller') fuel rate controller subsystem>
% is open and requirements are highlighted.
% * Open the *Tools > Requirements > Settings* dialog to the *Filters* tab and
% configure as shown below. 
%
% <<settings_filter_design.jpg>>
%
% * Check the highlighted objects in diagrams. These are the links that
% existed in the original model.
% * Now modify the *Filters* settings as shown below to exclude "design" links:
%
% <<settings_filter_no_design.jpg>>
% 
% * Check the Simulink model. The highlighting now points to links you have
% just copied from DOORS database.
%

%% Removing Links in Simulink and DOORS
%
% Synchronization also allows you to maintain consistency when links are
% removed. For example:
%
% * Locate again the 
% <matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/engine%20gas%20dynamics/fuel') fuel input>.
% * Right-click, select *Requirements > Edit/Add links*.
% * Select the "->2.1  Normal Mode of Operation" item in the listbox with a
% mouse
% * Click *Delete* button to remove the item from the list.
% * Click *OK* to apply the changes. 
% * Check the context menu again to confirm that the link is gone.
% * Note that the link is still present in DOORS, connecting *1.11.3 fuel* in
% the surrogate module to "2.1 Normal Mode of Operation" in the
% *FuelSys Requirements Specification* module.
% * Purge the removed link from DOORS by re-running synchronization with link
% updates option set to *Simulink to DOORS* and the *Remove unmatched in DOORS*
% checkbox enabled. 
%
% <<doors_dialog_sl_to_doors_purge.jpg>>
%
% * Click *Synchronize*. Observe the link in DOORS disappear.
%
% Similarly, when links are removed in DOORS and you need to propagate the
% changes to Simulink, rerun synchronization with the *DOORS to Simulink*
% option selected and *Remove unmatched in Simulink* checkbox enabled.
%

%% Optional Direct Links from DOORS to Simulink 
%
% When using selection linking with DOORS, you have an option to automatically
% insert reference objects into DOORS documents to enable direct navigation
% from DOORS to Simulink without the need for the surrogate module.
%
% WARNING: The DOORS document is modified when you use this feature of RMI.
%
% * Open the *Selection Linking* tab in *Tools > Requirements > Settings*
% dialog.
% * Enable the *Modify documents to insert links to models* checkbox.
% 
% <<menu_settings_modify.jpg>>
% 
% Now, when you use selection linking, Simulink creates navigation objects.
%
% * Select "2.2.6 Speed Sensor Failure" in *FuelSys Requirements Specification* module.
% * Locate the 
% <matlab:rmidemo_callback('locate','slvnvdemo_fuelsys_doorsreq/fuel%20rate%20controller/Sensor%20correction%20and%20Fault%20Redundancy/Speed%20Estimate') Speed Estimate>,
% * Right-click and expand the *Requirements* section of the context menu.
% * Click *Add link to current DOORS object*.
% * Observe the new object inserted as the first child of the target object in DOORS.
%
% <<doors_navigation.jpg>>
%
% * Close all Simulink model windows, answer "No" when prompted to save the
% changes. You do not want to modify the original demo.
% * Click the just inserted navigation object in DOORS.
% * Use *MATLAB > Select Item* from the main menu of the
% *FuelSys Requirements Specification* module. The correct diagram opens
% in Simulink and the linked block is highlighted.
%
% Note: You have just enabled navigation from DOORS to Simulink model without
% needing to save any changes in the model. Consider this workflow when
% modifications to models need to be avoided.
%
% Normally, when the Simulink model is saved after creating links, 
% two-way navigation is possible while bypassing the complexity of
% surrogate synchronization process. However, there is the disadvantage of
% cluttering DOORS documents with Simulink navigation objects.
%
% To avoid making unintentional modifications to your DOORS documents, 
% re-open the *Tools > Requirements > Settings* dialog to the *Selection
% Linking* tab and disable *Modify documents to insert links to models*
% checkbox. 

displayEndOfDemoMessage(mfilename)

##### SOURCE END #####
--></body></html>