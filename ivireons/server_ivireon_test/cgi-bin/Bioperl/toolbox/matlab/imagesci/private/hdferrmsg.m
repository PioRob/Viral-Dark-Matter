function msg = hdferrmsg(status)
%Use the last error generated by the HDF library to generate an error message

%   Copyright 2007 The MathWorks, Inc.
%   $Revision: 1.1.8.1 $  $Date: 2007/07/31 20:04:15 $

if status==-1
    error_code = hdfhe('value',1);
    if strncmpi(hdfhe('string',error_code),'no error',8)
        msg = sprintf('The NCSA HDF library reported an unknown error.');
    else
        msg = sprintf('The NCSA HDF library reported the following error: \n%s', ...
                  hdfhe('string',error_code));
    end
end
