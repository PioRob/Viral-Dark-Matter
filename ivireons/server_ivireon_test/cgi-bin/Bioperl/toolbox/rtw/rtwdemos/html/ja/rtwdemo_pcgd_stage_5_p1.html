
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>生成したコードを外部環境に統合</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="rtwdemo_pcgd_stage_5_p1.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit rtwdemo_pcgd_stage_5_p1">エディターで rtwdemo_pcgd_stage_5_p1.m を開く</a></div><div class="right"><a href="matlab:echodemo rtwdemo_pcgd_stage_5_p1">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>生成したコードを外部環境に統合</h1><!--introduction--><p><b>概要:</b>必要なファイルと、生成したコードを呼び出すために使用するインターフェイスなど、外部ビルド プロセスの概要を紹介します。</p><p><b>所要時間: </b>45 分</p><p><b>目的</b></p><p>理解する内容は次のとおりです。</p><div><ul><li>Simulink&reg; の外部でのビルドに必要なファイルの収集方法</li><li>外部変数および外部関数とのインターフェイス方法</li></ul></div><p><a href="matlab:RTWDemos.pcgd_open_pcg_model(5,0);"><b>タスク: </b> モデルを開きます。</a></p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">必要なデータおよびファイルのビルドと収集</a></li><li><a href="#2">背景生成したコードを既存のシステムに統合</a></li><li><a href="#3">背景統合環境の概要</a></li><li><a href="#4">システム インターフェイスのマッチング</a></li><li><a href="#5">データ インターフェイスのマッチング入力データの仕様</a></li><li><a href="#6">データ インターフェイスのマッチング出力データの仕様</a></li><li><a href="#7">データ インターフェイスのマッチング付加的データへのアクセス</a></li><li><a href="#8">関数呼び出しインターフェイスのマッチング</a></li><li><a href="#9">Eclipse 環境でのプロジェクトのビルド</a></li><li><a href="#10">一歩進んだ学習トピック</a></li></ul></div><h2>必要なデータおよびファイルのビルドと収集<a name="1"></a></h2><p>
<a name="MyLink2"></a> &lt;! Note:by adding my own &quot;name&quot; I control the link no matter what publish does&gt;
</p><p>
  Real-Time Workshop(R) によって生成されるコードは、MathWorks から提供されるサポート ファイルによって変わります。  生成コードを専用のビルド システムなどの別の開発環境に移動する場合は、必要なサポート ファイルも移動しなければなりません。 Real-Time Workshop </tt>packNGo</tt> ユーティリティを使用すると、自動的に必要なすべてのサポート ファイルを集めて zip ファイルにまとめることができます。 このユーティリティは、コード生成後のビルド プロセスをカスタマイズするための <tt>buildinfo_data</tt> 構造体などのツールと、実行可能イメージをビルドするのに必要なすべてのファイルを検索してまとめるための <tt>packNGo</tt> 関数を使用します。実行可能イメージには、[コンフィギュレーション パラメーター] ダイアログの <b></b>[Real-Time Workshop]、[カスタム コード] ペインで定義する外部ファイルが含まれます。 ファイルは標準の zip ファイルにパッケージされています。 <tt>buildinfo</tt> MAT ファイルはディレクトリ <tt><i>model</i>_ert_rtw</tt> に自動的に保存されます。
</p><p>デモ モデルではコード生成後に自動的に <tt>packNGo</tt> を実行するよう設定されています。</p><p><a href="matlab:RTWDemos.pcgd_buildDemo(5,0)"><b>タスク: </b> フル モデルのコードを生成します。</a></p><p>zip ファイルを手動で生成するには、MATLAB コマンド ウィンドウで次のようにします。</p><p>
  <ol>
     <li>ファイル <tt>buildInfo.mat</tt> (サブディレクトリ <tt>rtwdemo_PCG_Eval_P5_ert_rtw</tt> 内) を読み込みます。
     <li>コマンド <tt>packNGo(buildInfo)</tt> を入力します。
  </ol>
</p><p>zip ファイルに含まれるファイルの数は、Real-Time Workshop Embedded Coder™ のバージョンと使用しているモデルの設定により変わります。zip ファイルに含まれるすべてのファイルがコンパイルに必要なわけではありません。コンパイルされた実行可能ファイルのサイズ (RAM/ROM) はリンクのプロセスによって変わります。必要なオブジェクト ファイルのみを含めてリンクするよう設定する必要があります。</p><h2>背景:生成したコードを既存のシステムに統合<a name="2"></a></h2><p>
  <a name="MyLink1"></a> &lt;! Note: by adding my own &quot;name&quot; I control the link no matter what publish does&gt;
</p><p>このモジュールでは、生成したコードを既存のコード ベースに統合するのに必要なタスクを説明します。この評価のために、Eclipse IDE と Cygwin/gcc コンパイラを使用します。必要な統合のタスクは、すべての統合環境に共通のものです。</p><h2>背景:統合環境の概要<a name="3"></a></h2><p>フル組み込みの制御システムは、ハードウェアとソフトウェアの複数のコンポーネントで構成されます。制御アルゴリズムは、コンポーネントの 1 タイプにすぎません。その他の標準タイプのコンポーネントには以下のものがあります。</p><div><ul><li>オペレーティング システム (OS)</li><li>スケジュール レイヤー</li><li>物理的ハードウェア I/O</li><li>低レベル ハードウェア デバイス ドライバー</li></ul></div><p>一般的に、Real-Time Workshop Embedded Coder はこれらのコンポーネント用のコードは生成しません。その代わり、これらのコンポーネントと接続するインターフェイスを生成します。MathWorks は一般的な組み込みコントローラー用のハードウェア インターフェイス ブロック ライブラリを提供します。たとえば、Target for Freescale™ MPC5xx、Target for Infineon C166&reg;、および Target for TI C2000™用のブロック ライブラリを参照してください。</p><p>この評価用に、フル システムを作成する手順を示すためのファイルが用意されています。メイン ファイルは <tt>example_main.c</tt> です。これは単純なメイン関数で、コードを演習するのに必要な基本アクションを実行します。<i></i>ただし、実際のアプリケーションのメインの例として意図したものではありません。</p><p><a href="matlab:edit(fullfile(matlabroot,'toolbox','rtw','rtwdemos','EmbeddedCoderOverview','stage_5_files','example_main.c'))"><b>タスク: </b><tt>example_main.c</tt> を表示します。</a></p><p><img vspace="5" hspace="5" src="../example_main_s5.jpg"></p><p><tt>example_main.c</tt> の機能には以下のものが含まれています。</p><div><ul><li>関数インターフェイスを定義する (関数プロトタイプ)</li><li>データ定義に必要なファイルをインクルードする</li><li><tt>extern</tt> データを定義する</li><li>データを初期化する</li><li>シミュレートされるハードウェアを呼び出す</li><li>アルゴリズム関数を呼び出す</li></ul></div><p><tt>example_main.c</tt> での関数実行順はサブシステムがテスト ハーネスと <tt>rtwdemo_PCG_Eval_P5.h</tt> で呼び出される順と一致しています。<tt>example_main.c</tt> での実行順を変更すると、実行可能イメージで作成される結果はシミュレーション結果と違ったものになります。</p><h2>システム インターフェイスのマッチング<a name="4"></a></h2><p><i></i><i></i>生成コードと既存のシステム コードの統合では、データ インターフェイスと関数インターフェイスの両方が一致していることが必要です。この例では、<tt>example_main.c</tt> ファイルは #includes と生成したコードからの関数呼び出しを介してデータを定義します。</p><h2>データ インターフェイスのマッチング:入力データの仕様<a name="5"></a></h2><p>システムには 3 つの入力信号、<tt>pos_rqst</tt>、<tt>fbk_1</tt>、<tt>fbk_2</tt> があります。 2 つのフィードバック信号は ImportedExtern (グローバル変数参照)、位置信号は ImportedExternPointer (グローバル変数ポインター参照) です。信号が定義された方法により、Real-Time Workshop は信号用の変数を定義 (作成) しません。その代わり、MATLAB 環境外からの参照として信号変数を定義します。</p><p>デモ用に、ファイル <tt>defineImportedData.c</tt> が作成されています。このファイルは単純な C スタブで、信号変数を定義するのに使用します。生成したコードはファイル <tt>rtwdemo_PCG_Eval_P5_Private.h</tt> の <tt>extern</tt> 定義からデータにアクセスできます。実際のシステムでは、データは他のソフトウェア コンポーネントまたはハードウェア デバイスから取り込みます。</p><p><a href="matlab:edit(fullfile(matlabroot,'','toolbox','rtw','rtwdemos','EmbeddedCoderOverview','stage_5_files','defineImportedData.c'))"><b>タスク: </b><tt>defineImportedData.c</tt> を表示します。</a></p><p><img vspace="5" hspace="5" src="../defineImportedData.jpg"></p><p><a href="matlab:RTWDemos.pcgd_showSection(5,'private');"><b>タスク: </b><tt>rtwdemo_PCG_Eval_P5_Private.h</tt> を表示します。</a></p><p><img vspace="5" hspace="5" src="../Private_Extern_Define.jpg"></p><h2>データ インターフェイスのマッチング:出力データの仕様<a name="6"></a></h2><p>出力データに関してシステムが必要とするものはありません。しかし、ファイル <tt>rtwdemo_PCG_Eval_P5.h</tt> を参照すればデータにアクセスすることができます。</p><p>モジュール <b>Testing the Generated Code</b> は、出力データを標準ログファイルに保存する方法を示しています。</p><p><a href="matlab:RTWDemos.pcgd_showSection(5,'data_def');"><b>タスク: </b><tt>rtwdemo_PCG_Eval_P5.h</tt> を表示します。</a></p><h2>データ インターフェイスのマッチング:付加的データへのアクセス<a name="7"></a></h2><p>Real-Time Workshop Embedded Coder はコード生成のプロセス中にいくつかのデータ構造体を作成します。このデモでは、これらの構造体へのアクセスは必要ありませんでした。ユーザーがアクセスしたい一般的なデータ エレメントの例としては次のものがあります。</p><div><ul><li>ブロック状態値 (積分、伝達関数)</li><li>ローカル パラメーター</li><li>時刻</li></ul></div><p>次の表に一般的な Real-Time Workshop のデータ構造体をまとめてあります。モデルの設定により、これらの構造体のいくつかあるいは全部が生成したコードに現れることがあります。この例では、データはファイル <tt>rtwdemo_PCG_Eval_P5.h</tt> で宣言されています。</p><p>
    <table border = "1">
        <tr valign = "top">
            <td align = "center"><b>データ型</b></td>
            <td align = "center"><b>データの名前</b></td>
            <td align = "center"><b>データの目的</b></td>
        </tr>
        <tr valign = "top">
            <td>定数</td>
            <td><tt>model_cP</tt></td>
            <td>定数パラメーター</td>
        </tr>
        <tr valign = "top">
            <td>定数</td>
            <td><tt>model_cB</tt></td>
            <td>定数ブロック I/O</td>
        </tr>
        <tr valign = "top">
            <td>出力</td>
            <td><tt>model_U</tt></td>
            <td>ルートおよび Atomic サブシステム入力</td>
        </tr>
        <tr valign = "top">
            <td>出力</td>
            <td><tt>model_Y</tt></td>
            <td>ルートおよび Atomic サブシステム出力</td>
        </tr>
        <tr valign = "top">
            <td>内部データ</td>
            <td><tt>model_B</tt></td>
            <td>ブロック出力の値</td>
        </tr>
        <tr valign = "top">
            <td>内部データ</td>
            <td><tt>model_D</tt></td>
            <td>状態情報ベクトル</td>
        </tr>
        <tr valign = "top">
            <td>内部データ</td>
            <td><tt>model_M</tt></td>
            <td>時刻と他の<br>システム レベルのデータ</td>
        </tr>
        <tr valign = "top">
            <td>内部データ</td>
            <td><tt>model_Zero</tt></td>
            <td>ゼロクロッシング</td>
        </tr>
        <tr valign = "top">
            <td>パラメーター</td>
            <td><tt>model_P</tt></td>
            <td>パラメーター</td>
        </tr>
    </table>
</p><h2>関数呼び出しインターフェイスのマッチング<a name="8"></a></h2><p>Real-Time Workshop で生成された関数は、既定により <tt>void Func(void)</tt> インターフェイスを持っています。モデルまたは Atomic サブシステムが再入力可能なコードとして設定されている場合、Real-Time Workshop はより複雑な関数プロトタイプを作成します。以下に示すように、<tt>example_main</tt> 関数は正しい入力引数で関数を呼び出すように設定されています。</p><p><img vspace="5" hspace="5" src="../functionInterface.jpg"></p><p>関数 <tt>PI_Cntrl_Reusable</tt> の呼び出しでは、ユーザー定義変数と Real-Time Workshop 構造体を組み合わせて使用します。構造体は <tt>rtwdemo_PCG_Eval_P5.h</tt> で定義されています。上記のコードでは構造体がユーザー定義変数にマップされるプロセスも示しています。</p><h2>Eclipse 環境でのプロジェクトのビルド<a name="9"></a></h2><p>このデモでは、組み込みシステムをビルドするために Eclipse IDE と Cygwin GCC デバッガーを使用します。両方のプログラムのインストール ファイルはこのデモの一部として提供されます。次の表にソフトウェア コンポーネントとバージョン番号をまとめてあります。</p><p>
    <table border = "1">
        <tr valign = "top">
            <td align = "center"><b>ソフトウェア</b></td>
            <td align = "center"><b>バージョン番号</b></td>
        </tr>
        <tr valign = "top">
            <td>Eclipse SDK</td>
            <td>3.2</td>
        </tr>
        <tr valign = "top">
            <td>Eclipse CDT</td>
            <td>3.3</td>
        </tr>
        <tr valign = "top">
            <td>Cygwin/GCC</td>
            <td>3.4.4-1</td>
        </tr>
        <tr valign = "top">
            <td>Cygwin/GDB</td>
            <td>20060706-2</td>
        </tr>
    </table>
</p><p>Eclipse および GCC のインストール方法および使用方法については、<b>「Cygwin と Eclipse のインストールと使い方」</b>を参照してください。</p><p>次の操作を行うと、このモジュールのファイルが自動的にインストールされます。</p><p><a href="matlab:RTWDemos.pcgd_autoSetup(5)"><b>タスク: </b> ビルド ディレクトリを自動的に設定します。</a></p><p>手動でファイルをインストールするには、以下を行います。</p><p>
       <ol>
          <li>ビルド ディレクトリ (<tt>Eclipse_Build_P5</tt>) を作成します。
          <li>ファイル <tt>rtwdemo_PCG_Eval_P5.zip</tt> をビルド ディレクトリに解凍します。
          <li>以下のファイルは <tt>example_main.c.</tt> で置き換えられるために削除します。
             <ul>
                <li><tt>rtwdemo_PCG_Eval_P5.c</tt>
                <li><tt>ert_main.c</tt>
                <li><tt>rt_logging.c</tt>
            </ul>
       </ol>
</p><p>
  <b>メモ:</b>モデルのコードが生成されないか、または zip ファイルが存在しない場合は、次のモジュールに進む前にモジュール<a href="#MyLink2">「必要なデータとファイル」</a>のステップを完了してください。
</p><p>Eclipse デバッガーを使用すればステップごとに、生成した C コードの実行動作を評価することができます。<b>「生成したコードのテスト」</b>には、モデルの演習の例が入力データ付きで記載されています。</p><h2>一歩進んだ学習トピック<a name="10"></a></h2><div><ul><li><a href="matlab:helpview([docroot,'/toolbox/rtw/helptargets.map'],'pack_and_go_util');">Pack-and-Go ユーティリティの使用</a></li></ul></div><p class="footer">Copyright 2007-2008 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Integrating the Generated Code into the External Environment % *Overview:* Provides an overview of the external build % process, including what files are required and the interfaces you use to call the % generated code. % % *Time*: 45 minutes % % *Goals* %  % Understand... % % * How to collect files required for building outside of Simulink(R) % * How to interface with external variables and functions % % <matlab:RTWDemos.pcgd_open_pcg_model(5,0); *Task:* Open the model.>  %% Building and Collecting the Required Data and Files % <html> %   <a name="MyLink2"></a>  %   <! Note: by adding my own "name" I control the link no matter what publish does> % </html> % % <html> %   The code that Real-Time Workshop(R) generates is dependent on  %   support files provided by The MathWorks.  If you need to relocate  %   generated code to another development environment, such as a dedicated build system,  %   you must also relocate the required support files. You can automatically  %   collect all generated and necessary support files and package them in a %   zip file by using the Real-Time Workshop </tt>packNGo</tt> utility. This %   utility uses tools for customizing the build process after code %   generation, including a <tt>buildinfo_data</tt> structure, and a <tt>packNGo</tt> function  %   to find and package all files needed to build an executable image, including  %   external files you define in the <b>Real-Time Workshop > Custom Code</b> pane %   of the Configuration Parameters dialog. The files are packaged in a standard  %   zip file. The <tt>buildinfo</tt> MAT-file is saved automatically %   in the directory <tt><i>model</i>_ert_rtw</tt>. % </html> % % The demo model is configured to run |packNGo| automatically after code % generation.  % % <matlab:RTWDemos.pcgd_buildDemo(5,0) *Task:* Generate code for the full model.>  % % To generate the zip file manually, do the following in the MATLAB(R) Command Window: % % <html> %   <ol> %      <li>Load the file <tt>buildInfo.mat</tt> (located in the %      subdirectory <tt>rtwdemo_PCG_Eval_P5_ert_rtw</tt>). %      <li>Enter the command <tt>packNGo(buildInfo)</tt>. %   </ol> % </html> %  % The number of files included in the zip file depends on the version of % Real-Time Workshop Embedded Coder(TM) and the configuration of the model you % use. Not all of the files in the zip file are required by the compiler. % The compiled executable size (RAM/ROM) is % dependent on the link process.  The linker should be configured to include   % only required object files. % %% Background: Integrating the Generated Code into an Existing System % <html> %   <a name="MyLink1"></a>  %   <! Note: by adding my own "name" I control the link no matter what %   publish does> % </html> % % This module covers tasks required to integrate the % generated code into an existing code base.  For this evaluation, the   % Eclipse IDE and Cygwin/gcc compiler are used.  The required integration  % tasks are common to all integration environments.   % %% Background: Overview of the Integration Environment % A full embedded controls system is comprised of multiple components, both % hardware and software. Control algorithms are just one type of % component.  The other standard types of components include: % % * An operating system (OS) % * A scheduling layer % * Physical hardware I/O  % * Low-level hardware device drivers % % In general, Real-Time Workshop Embedded Coder does not generate code for any % of these components.  Instead, it generates interfaces that connect % with the components. The MathWorks provides hardware interface block % libraries for many common embedded controllers.  For examples, see the % block libraries for Target for Freescale(TM) MPC5xx, % Target for Infineon C166(R), and Target for TI C2000(TM). % % For this evaluation, files are provided to demonstrate how you can build a  % full system.  The main file is |example_main.c|. It is a simple main function  % that performs the basic actions required to exercise the code.  It is _not_  % intended as an example of an actual application main.  % % <matlab:edit(fullfile(matlabroot,'toolbox','rtw','rtwdemos','EmbeddedCoderOverview','stage_5_files','example_main.c')) *Task:* View |example_main.c|.> % % <html><img vspace="5" hspace="5" src="../example_main_s5.jpg"></html> % % Functions of |example_main.c| include the following: % % * Defines function interfaces (function prototypes) % * Includes required files for data definition % * Defines |extern| data % * Initializes data % * Calls simulated hardware % * Calls algorithmic functions %  % The order of execution of functions in |example_main.c| matches the order % in which the subsystems are called in the test harness and in % |rtwdemo_PCG_Eval_P5.h|.  If you change the order of execution in |example_main.c|,  % results produced by the executable image will differ from simulation % results. % %% Matching the System Interfaces % Integration requires matching both the _Data_ and _Function_ interfaces % of the generated code and the existing system code.  In this example, the % |example_main.c| file defines the data through #includes and calls the % functions from the generated code. % %% Matching Data Interfaces: Input Data Specification % The system has three input signals: |pos_rqst|, |fbk_1|, and % |fbk_2|.  The two feedback signals are imported externs and the position  % signal is an imported extern pointer.  Due to how the signals are defined, % Real-Time Workshop does not define (create) variables for them.  Instead, the % signal variables are defined in a file that is external to the MATLAB environment.   %  % For the demo, the file |defineImportedData.c| was created.  This file is a % simple C stub used to define the signal variables.  The generated code has % access to the data from the |extern| definitions in the file  % |rtwdemo_PCG_Eval_P5_Private.h|.  In a real system, the data would come from other  % software components or from hardware devices. % % <matlab:edit(fullfile(matlabroot,'','toolbox','rtw','rtwdemos','EmbeddedCoderOverview','stage_5_files','defineImportedData.c')) *Task:* View |defineImportedData.c|.> % % <html><img vspace="5" hspace="5" src="../defineImportedData.jpg"></html> % % <matlab:RTWDemos.pcgd_showSection(5,'private'); *Task:* View |rtwdemo_PCG_Eval_P5_Private.h|.> % % <html><img vspace="5" hspace="5" src="../Private_Extern_Define.jpg"></html> % %% Matching Data Interfaces: Output Data Specification % The system does not require you to do anything with the % output data. However, you can access the data by referring to the % file |rtwdemo_PCG_Eval_P5.h|.   % % The module *Testing the Generated Code* shows how the output data can be saved to a standard log file. % % <matlab:RTWDemos.pcgd_showSection(5,'data_def'); *Task:* View |rtwdemo_PCG_Eval_P5.h|.> % %% Matching Data Interfaces: Accessing Additional Data % Real-Time Workshop Embedded Coder creates several data % structures during the code generation process.  For this demo accessing % these structures was not required.  Examples of common data elements that % users wish to access include: %  % * Block state values (integrator, transfer functions) % * Local parameters % * Time % % The following table lists the common Real-Time Workshop data structures. % Depending on the configuration of the model, some or all of  % these structures will appear in the generated code.    In this example, the % data is declared in the file |rtwdemo_PCG_Eval_P5.h|. % % <html> %     <table border = "1"> %         <tr valign = "top"> %             <td align = "center"><b>Data Type</b></td> %             <td align = "center"><b>Data Name</b></td> %             <td align = "center"><b>Data Purpose</b></td> %         </tr>     %         <tr valign = "top"> %             <td>Constants</td> %             <td><tt>model_cP</tt></td> %             <td>Constant parameters</td> %         </tr> %         <tr valign = "top"> %             <td>Constants</td> %             <td><tt>model_cB</tt></td> %             <td>Constant block I/O</td> %         </tr> %         <tr valign = "top"> %             <td>Output</td> %             <td><tt>model_U</tt></td> %             <td>Root and atomic subsystem input</td> %         </tr> %         <tr valign = "top"> %             <td>Output</td> %             <td><tt>model_Y</tt></td> %             <td>Root and atomic subsystem output</td> %         </tr> %         <tr valign = "top"> %             <td>Internal data</td> %             <td><tt>model_B</tt></td> %             <td>Value of block output</td> %         </tr> %         <tr valign = "top"> %             <td>Internal data</td> %             <td><tt>model_D</tt></td> %             <td>State information vectors</td> %         </tr> %         <tr valign = "top"> %             <td>Internal data</td> %             <td><tt>model_M</tt></td> %             <td>Time and other<br>system level data</td> %         </tr> %         <tr valign = "top"> %             <td>Internal data</td> %             <td><tt>model_Zero</tt></td> %             <td>Zero-crossings</td> %         </tr> %         <tr valign = "top"> %             <td>Parameters</td> %             <td><tt>model_P</tt></td> %             <td>Parameters</td> %         </tr> %     </table> % </html> %% Matching Function Call Interfaces % Functions generated by Real-Time Workshop have a |void Func(void)| % interface, by default.  If the model or atomic subsystem is configured as % reentrant code, Real-Time Workshop creates a more complex function prototype. % As shown below, the |example_main| function is configured to call the % functions with the correct input arguments. % % <html><img vspace="5" hspace="5" src="../functionInterface.jpg"></html> % % Calls to the function |PI_Cntrl_Reusable| use a mixture of user-defined % variables and Real-Time Workshop structures.  The structures are defined % in |rtwdemo_PCG_Eval_P5.h|.  The preceding code fragment also shows how the  % structures can be mapped onto user-defined variables.   % %% Building a Project in the Eclipse Environment % This demo uses the Eclipse IDE and the Cygwin GCC debugger % to build the embedded system.  The installation files for both programs are % provided as part of this demo. The following table lists the software % components and versions numbers: % % <html> %     <table border = "1"> %         <tr valign = "top"> %             <td align = "center"><b>Software</b></td> %             <td align = "center"><b>Version #</b></td> %         </tr>     %         <tr valign = "top"> %             <td>Eclipse SDK</td> %             <td>3.2</td> %         </tr> %         <tr valign = "top"> %             <td>Eclipse CDT</td> %             <td>3.3</td> %         </tr> %         <tr valign = "top"> %             <td>Cygwin/GCC</td> %             <td>3.4.4-1</td> %         </tr> %         <tr valign = "top"> %             <td>Cygwin/GDB</td> %             <td>20060706-2</td> %         </tr> %     </table> % </html> % % Instructions on how to install and use Eclipse and GCC appear in  % *Installing and Using Cygwin and Eclipse*. % % To install the files for this module automatically, do the following: % % <matlab:RTWDemos.pcgd_autoSetup(5) *Task:* Automatically set up the build directory.> % % To manually install the files, do the following: %  % <html> %        <ol> %           <li>Create a build directory (<tt>Eclipse_Build_P5</tt>). %           <li>Unzip the file <tt>rtwdemo_PCG_Eval_P5.zip</tt> into your build directory.  %           <li>Delete these files, which are replaced by <tt>example_main.c.</tt> %              <ul> %                 <li><tt>rtwdemo_PCG_Eval_P5.c</tt> %                 <li><tt>ert_main.c</tt> %                 <li><tt>rt_logging.c</tt> %             </ul> %        </ol> % </html>  % % <html> %   <b>Note:</b> If code has not been generated for the model or the zip file %   does not exist, complete the steps in the module  %   <a href="#MyLink2">Required Data and Files</a> before continuing to %   the next module. % </html> % % You can use the Eclipse debugger to step through and evaluate the % execution behavior of the generated C code. *Testing the Generated Code* includes an % example on how to exercise the model with input data. % %% Further Study Topics % % * <matlab:helpview([docroot,'/toolbox/rtw/helptargets.map'],'pack_and_go_util'); Using the Pack-and-Go utility> %   Copyright 2007-2008 The MathWorks, Inc.  displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>