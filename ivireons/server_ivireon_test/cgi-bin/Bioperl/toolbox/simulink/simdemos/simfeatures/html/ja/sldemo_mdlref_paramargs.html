
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This HTML is auto-generated from an M-file. To make changes, update the M-file and republish this document.       --><title>モデル参照のパラメーター化</title><meta name="generator" content="MATLAB 7.10"><meta name="date" content="2009-11-14"><meta name="m-file" content="sldemo_mdlref_paramargs"><link rel="stylesheet" type="text/css" href="../../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left">sldemo_mdlref_paramargs.mdl</div><div class="right"><a href="matlab:sldemo_mdlref_paramargs">このモデルを開く</a></div></div><div class="content"><h1>モデル参照のパラメーター化</h1><!--introduction--><p>このデモでは、参照されるモデルのインスタンスにパラメーター値を渡すための設定について説明します。モデル参照の簡単な紹介を参照するには、<a href="sldemo_mdlref_basic.html">「モデル参照を使用したコンポーネント ベース モデリング」</a> を表示してください。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">デモ モデルを開く</a></li><li><a href="#2">デモの要件</a></li><li><a href="#3">デモの概要</a></li><li><a href="#4">参照モデル <tt>sldemo_mdlref_counter_paramargs</tt> のパラメーター設定</a></li><li><a href="#5"><tt>sldemo_mdlref_paramargs</tt> のパラメーター設定</a></li><li><a href="#6">スタンドアロン アプリケーション用のコード生成 (Real-Time Workshop&reg; が必要)</a></li></ul></div><h2>デモ モデルを開く<a name="1"></a></h2><p><a href="matlab:open_system('sldemo_mdlref_paramargs');">デモ モデルを開く</a></p><img vspace="5" hspace="5" src="../sldemo_mdlref_paramargs_01.png" alt=""> <h2>デモの要件<a name="2"></a></h2><p>このデモの間、Simulink&reg; と Real-Time Workshop&reg; は、現在の作業ディレクトリに作成される Simulink プロジェクト ディレクトリにコードを生成します。このディレクトリにファイルを生成したくない場合 (あるいは生成できない場合) は、作業ディレクトリを変更してください。スタンドアロン アプリケーションに配布されるモデル参照バイナリを生成するには、Real-Time Workshop が必要です。</p><p>デモ モデルを変更する場合は、以下の手順を実行してください。</p><p>1. デモを元の状態のままで保存するために、MATLAB&reg; インストール ディレクトリから、以下のファイルを名前を変更せずに他のディレクトリにコピーします。</p><pre>toolbox/simulink/simdemos/simfeatures/sldemo_mdlref_paramargs.mdl
toolbox/simulink/simdemos/simfeatures/sldemo_mdlref_counter_paramargs.mdl
toolbox/simulink/simdemos/simfeatures/sldemo_mdlref_counter_paramargs_init.mat</pre><p>2. 現在の作業ディレクトリを、ファイルをコピーしたディレクトリに変更します。</p><p>3. デモを続行します。</p><h2>デモの概要<a name="3"></a></h2><p>Simulink モデル <a href="matlab:open_system('sldemo_mdlref_paramargs')"><tt>sldemo_mdlref_paramargs</tt></a> を開きます。このモデルには、CounterA、CounterB および CounterC という 3 つの Model ブロックが含まれています。これらのブロックは、同じモデル  <tt>sldemo_mdlref_counter_paramargs</tt> を参照します。参照されるモデルには、設定する必要があるパラメーターが 2 つあります。それらは、<tt>upper_saturation_limit</tt> と <tt>lower_saturation_limit</tt> です。各 Model ブロックで、<tt>sldemo_mdlref_counter_paramargs</tt> は、各パラメーターに異なる値を設定して呼び出されます。このデモでは、以下の順序で段階を追って、<tt>sldemo_mdlref_counter_paramargs</tt> がパラメーター引数を受け入れるようにし、<tt>sldemo_mdlref_paramargs</tt> が異なるパラメーター値を渡すようにします。</p><p>1. まず、参照されるモデル <tt>sldemo_mdlref_counter_paramargs</tt> を準備します。この作業を行うには、モデル エクスプローラーまたは MATLAB コマンド ラインを使用します。</p><p>2. 次に、<tt>sldemo_mdlref_paramargs</tt> を準備します。</p><p>これらのモデルを準備したら、<tt>sldemo_mdlref_paramargs</tt> のスタンドアロン実行可能ファイルが作成されます。</p><h2>参照モデル <tt>sldemo_mdlref_counter_paramargs</tt> のパラメーター設定<a name="4"></a></h2><p><tt>upper_saturation_limit</tt> パラメーターと <tt>lower_saturation_limit</tt> パラメーターは、<tt>sldemo_mdlref_counter_paramargs</tt> のモデル ワークスペースで定義され、初期化されます。</p><p>モデル ワークスペースは、その他の MATLAB ワークスペースと同様に動作します。このワークスペースで、変数を作成し、MATLAB コマンドを実行できます。<tt>lower_saturation_limit</tt> パラメーターと <tt>upper_saturation_limit</tt> パラメーターは、MATLAB プロンプトで定義し、初期化できます。それを実行する MATLAB コマンドを保存することができます。また、モデル ワークスペースを MDL ファイルまたは MAT ファイルからアップロードすることもできます。さらに、パラメーターを MAT ファイルまたは MDL ファイルに保存することもできます。このデモでは、パラメーターは <tt>sldemo_mdlref_counter_paramargs_init.mat</tt> と呼ばれる MAT ファイルから初期化されます。</p><p><b>モデル エクスプローラーを使用したパラメーターの設定</b></p><p>1. <b>[表示]</b> メニューからモデル エクスプローラーを開きます。</p><p>2. 左側のツリー ビューから、モデル ノードをクリックして、<b>[モデル ワークスペース]</b> を選択します。</p><p>3. ダイアログ ビューから、<b>[データ ソース]</b> のタイプを選択します。このデモでは、タイプは [MAT ファイル] です。</p><p>4. <b>[ファイル名]</b> フィールドにファイルのパスと名前を入力します。このデモで使用されるファイルは <tt>sldemo_mdlref_counter_paramargs_init.mat</tt> です。</p><p>5. <b>[モデル引数]</b> フィールドに値を入力します。このデモでは、値は <tt>lower_saturation_limit, upper_saturation_limit</tt> です。</p><p>6. <tt>sldemo_mdlref_counter_paramargs</tt> を変更した場合は、そのコピーを保存します。</p><p><b>MATLAB コマンド ラインを使用したパラメーターの設定</b></p><p>1. 以下のコマンドを使用して、MATLAB プロンプトから、モデル ワークスペースに対するハンドルを取得します。</p><p><tt>mdlWS = get_param('sldemo_mdlref_counter_paramargs', 'ModelWorkspace')</tt></p><p>2. 以下のコマンドを使用して、データ ソースを登録します。</p><p><tt>mdlWS.DataSource = 'MAT-File'</tt></p><p><tt>mdlWS.FileName ='sldemo_mdlref_counter_paramargs_init.mat'</tt></p><p>3. 以下のコマンドを使用して、参照されるモデルのワークスペースに変数をアップロードします。</p><p><tt>mdlWS.reload</tt></p><p>4. 以下のコマンドを使用して、パラメーター引数の名前を設定します。</p><p><tt>set_param('sldemo_mdlref_counter_paramargs','ParameterArgumentNames','lo wer_saturation_limit,upper_saturation_limit')</tt></p><p>5. <tt>sldemo_mdlref_counter_paramargs</tt> を変更した場合は、そのコピーを保存します。</p><h2><tt>sldemo_mdlref_paramargs</tt> のパラメーター設定<a name="5"></a></h2><p>各 Model ブロックで、<tt>upper_saturation_limit</tt> パラメーターと <tt>lower_saturation_limit</tt> パラメーターの値を設定します。これらの値は、各ブロックの [モデル参照パラメーター] ダイアログを使用して設定できます。以下に示すように、コマンド ラインからこれらの値を設定することもできます。</p><p>CounterA については、以下のコマンドを使用します。</p><p><tt>set_param('sldemo_mdlref_paramargs/CounterA','ParameterArgumentValues',' 0,20')</tt></p><p>CounterB については、以下のコマンドを使用します。</p><p><tt>set_param('sldemo_mdlref_paramargs/CounterB','ParameterArgumentValues',' 0,10')</tt></p><p>CounterC については、以下のコマンドを使用します。</p><p><tt>set_param('sldemo_mdlref_paramargs/CounterC','ParameterArgumentValues',' 0,5')</tt></p><p><tt>sldemo_mdlref_paramargs</tt> を変更した場合は、そのコピーを保存します。<tt>sldemo_mdlref_paramargs</tt> をシミュレーションして、各パラメーターに異なる値を設定した影響を確認できます。</p><h2>スタンドアロン アプリケーション用のコード生成 (Real-Time Workshop&reg; が必要)<a name="6"></a></h2><p><a href="matlab:slbuild('sldemo_mdlref_paramargs','StandaloneRTWTarget')">実行可能ファイルを作成し、<tt>sldemo_mdlref_paramargs</tt> のコードを検査します。</a></p><p class="footer">Copyright 1990-2007 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.10</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.co.jp/trademarks">www.mathworks.co.jp/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Parameterizing Model Reference % This demo illustrates the setup to pass parameter values to % instances of a referenced model. For a brief introduction to Model % Reference, view <sldemo_mdlref_basic.html Component-Based Modeling % with Model Reference>.        % Copyright 1990-2007 The MathWorks, Inc. % $Revision: 1.1.6.4 $  $Date: 2010/03/08 21:47:32 $  %% Open The Demo Model % <matlab:open_system('sldemo_mdlref_paramargs'); Open the demo model> open_system('sldemo_mdlref_paramargs')  %% Demo Requirements  % During this demo, Simulink(R) and Real-Time Workshop(R) generate code % in a Simulink project directory created in the current working directory. % If you do not want to (or if you cannot) generate files in this % directory, you should change your working directory. Real-Time Workshop % is required to generate Model Reference binaries to be deployed in % standalone applications.      %  % If you plan to alter the demo models: %  % 1. Preserve the demo in its original state by copying the following files % from your MATLAB(R) installation directory, without changing their names, to a % different directory:      % %  toolbox/simulink/simdemos/simfeatures/sldemo_mdlref_paramargs.mdl  %  toolbox/simulink/simdemos/simfeatures/sldemo_mdlref_counter_paramargs.mdl  %  toolbox/simulink/simdemos/simfeatures/sldemo_mdlref_counter_paramargs_init.mat     % % 2. Change your current working directory to the directory to which you % copied the files   % % 3. Continue with the demo  %% Demo Outline  % Open the Simulink model <matlab:open_system('sldemo_mdlref_paramargs') % |sldemo_mdlref_paramargs|>. This model contains three Model blocks: % CounterA, CounterB and CounterC. These blocks reference the same model % |sldemo_mdlref_counter_paramargs|. The referenced model has two % parameters that need to be set. These are |upper_saturation_limit| and % |lower_saturation_limit|. In each Model block, % |sldemo_mdlref_counter_paramargs| is called with different values for % each parameter. The demo prepares % |sldemo_mdlref_counter_paramargs| to accept parameter arguments and % |sldemo_mdlref_paramargs| to pass different parameter values, step by % step in the following order:   % % 1. First, the referenced model |sldemo_mdlref_counter_paramargs| is % prepared.  This can be done using the Model Explorer or the MATLAB  % Command Line. %  % 2. Then, |sldemo_mdlref_paramargs| is prepared.            % % After preparing the models, the standalone executable for the % |sldemo_mdlref_paramargs| is created.    %% Parameter Setup For Referenced Model |sldemo_mdlref_counter_paramargs| % The parameters |upper_saturation_limit| and |lower_saturation_limit| are % defined and initialized in the model workspace of % |sldemo_mdlref_counter_paramargs|.      % % The model workspace behaves like any other MATLAB workspace. In this % workspace, you can create variables and execute MATLAB commands. You can % define and initialize the parameters |lower_saturation_limit| and % |upper_saturation_limit| from the  MATLAB prompt. The MATLAB commands  % that do this can be saved. You can also upload the model workspace from % the MDL-file or from a MAT-file. In addition, the parameters can be saved  % to a MAT-file or the MDL-file. In this demo, the parameters are initialized  % from a MAT-File called |sldemo_mdlref_counter_paramargs_init.mat|.  % % *Parameter Setup Using the Model Explorer:*  % % 1. Open the Model Explorer from the *View* Menu. %  % 2. From the left tree view, click on the model node and select *Model % Workspace*. %  % 3. From the dialog view, choose the type of the *Data source*.  In this % demo, the type is a MAT-File.    %  % 4. Enter the path and the name of the file in the *File name* field. The % file used in this demo is % |sldemo_mdlref_counter_paramargs_init.mat|. %  % 5. Fill in the *Model arguments* field. For this demo, the value % is |lower_saturation_limit, upper_saturation_limit|.    %  % 6. Save the copy of |sldemo_mdlref_counter_paramargs| if you have altered it.  % % *Parameter Setup Using the MATLAB Command Line:* %  % 1. Obtain the handle to the model workspace from the MATLAB prompt using % the following command:    % % |mdlWS = get_param('sldemo_mdlref_counter_paramargs', 'ModelWorkspace')| % % 2. Register the data source with the following commands:  %  % |mdlWS.DataSource = 'MAT-File'| %  % |mdlWS.FileName ='sldemo_mdlref_counter_paramargs_init.mat'| % % 3. Upload the variables into the referenced model's workspace using these % commands:   %  % |mdlWS.reload|  % % 4. Set the name of the parameter arguments with the following command:  %  % |set_param('sldemo_mdlref_counter_paramargs','ParameterArgumentNames','lo % wer_saturation_limit,upper_saturation_limit')|   % % 5. Save the copy of |sldemo_mdlref_counter_paramargs| if you have altered % it.  %% Parameter Setup For |sldemo_mdlref_paramargs| % Set the values of the parameters |upper_saturation_limit| and % |lower_saturation_limit| in each Model block. You can set the values % through each block's Model Reference Parameter Dialog. You can also set % them from the command line as shown below.      % % For CounterA use the command:  %  % |set_param('sldemo_mdlref_paramargs/CounterA','ParameterArgumentValues',' % 0,20')|   % % For CounterB use the command:  %  % |set_param('sldemo_mdlref_paramargs/CounterB','ParameterArgumentValues',' % 0,10')|  % % For CounterC use the command:  %  % |set_param('sldemo_mdlref_paramargs/CounterC','ParameterArgumentValues',' % 0,5')|   % % Save the copy of |sldemo_mdlref_paramargs| if you have altered it. You % can simulate |sldemo_mdlref_paramargs| to see the effect of different % values for the parameters.     %% Code Generation For Standalone Applications (Requires Real-Time Workshop(R))  % <matlab:slbuild('sldemo_mdlref_paramargs','StandaloneRTWTarget') Create % the executable and inspect the code for |sldemo_mdlref_paramargs|.>  bdclose all  ##### SOURCE END ##### --></body></html>