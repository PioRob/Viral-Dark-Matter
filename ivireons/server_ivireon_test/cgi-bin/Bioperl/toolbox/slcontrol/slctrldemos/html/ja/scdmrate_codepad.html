
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>マルチレート モデルの線形化</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="scdmrate_codepad.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit scdmrate_codepad">エディターで sscdmrate codepad.m を開く</a></div><div class="right"><a href="matlab:echodemo scdmrate_codepad">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>マルチレート モデルの線形化</h1><!--introduction--><!--/introduction--><h2>目次</h2><div><ul><li><a href="#2">問題の例</a></li><li><a href="#6">手順 1: モデル内のブロックの線形化</a></li><li><a href="#7">手順 2: レート変換</a></li><li><a href="#13">Simulink&reg; Control Design™ コマンドを使用したモデルの線形化</a></li></ul></div><p>この例では、非線形マルチレート Simulink&reg; モデルの線形モデルを抽出するときに、コマンドの線形化で使用されるプロセスを説明します。概念を説明するには、最初に Control System Toolbox™ の関数を使用してプロセスを実行してから、線形化コマンドを使用して繰り返します。</p><h2>問題の例<a name="2"></a></h2><p>Simulink モデル <tt>scdmrate.mdl</tt> には、5 つのブロックで指定された 3 つの異なるサンプリング レートがあります。ブロックは以下のとおりです。</p><div><ul><li><tt>sysC</tt> - 連続線形ブロック</li><li><tt>Integrator</tt> - 連続積分器</li><li><tt>sysTs1</tt> - サンプル時間が 0.01 秒のブロック</li><li><tt>sysTs2</tt> - サンプル時間が 0.025 秒のブロック</li><li><tt>Zero-Order Hold</tt> - 入力信号を 0.01 秒でサンプリングするブロック</li></ul></div><pre class="codeinput">sysC = zpk(-2,-10,0.1);
Integrator = zpk([],0,1);
sysTs1 = zpk(-0.7463,[0.4251 0.9735],0.2212,0.01);
sysTs2 = zpk([],0.7788,0.2212,0.025);
</pre><p>次のモデルは、ブロックの接続方法を示しています。</p><pre class="codeinput">scdmrate
</pre><img vspace="5" hspace="5" src="../scdmrate_codepad_01.png" alt=""> <p>この例では、Constant ブロックの出力と <tt>sysTs2</tt> ブロックの出力間のモデルを線形化します。</p><h2>手順 1: モデル内のブロックの線形化<a name="6"></a></h2><p>線形化の最初の手順として、モデル内の各ブロックを線形化します。Saturation ブロックと Zero-Order Hold ブロックの線形化は 1 です。LTI ブロックは既に線形であるため、そのままです。線形化ブロックを持つ新しいモデルを次に示します。</p><pre class="codeinput">scdmratestep1
</pre><img vspace="5" hspace="5" src="../scdmrate_codepad_02.png" alt=""> <h2>手順 2: レート変換<a name="7"></a></h2><p>モデル内のブロックには、異なるサンプリング レートが含まれているため、最初にレート変換関数を使用して、さまざまなレートを代表的なシングル レートに変換しないと、システムに対してシングルレート線形化モデルを作成することはできません。レート変換関数では、反復法が使用されます。反復は、モデル内のサンプル時間の最小公倍数で開始されます。この例では、サンプル時間は、0 秒、0.01 秒、および 0.025 秒で、最小公倍数は 0.05 です。レート変換関数は、最速のサンプリング レートを持つブロックの組み合わせを取得し、2 番目に速いサンプリング レートでリサンプリングします。この例では、最初の反復で、線形化された連続時間ブロック <tt>sysC</tt> と <tt>integrator</tt> の組み合わせをゼロ次ホールドの連続から離散への変換を使用して、0.01 のサンプル時間に変換します。</p><pre class="codeinput">sysC_Ts1 = c2d(sysC*Integrator,0.01);
</pre><p><tt>sysC</tt> ブロックと <tt>Integrator</tt> ブロックが <tt>sysC_Ts1</tt> に置き換えられました。</p><pre class="codeinput">scdmratestep2
</pre><img vspace="5" hspace="5" src="../scdmrate_codepad_03.png" alt=""> <p>次の反復で、0.01 のサンプル時間を持つすべてのブロックを 0.025 のサンプル時間に変換します。まず、次のコマンドは、フィードバック ループを閉じることで、これらのブロックの組み合わせを表します。</p><pre class="codeinput">sysCL = feedback(sysTs1*sysC_Ts1,1);
</pre><p>次に、ゼロ次ホールド法で、閉ループ システム sysCL を 0.01 のサンプリング レートから 0.025 に変換します。</p><pre class="codeinput">sysCL_Ts2 = d2d(sysCL,0.025);
</pre><p>システム <tt>sysCL_Ts2</tt> がモデル内のフィードバック ループに置き換えられます。</p><pre class="codeinput">scdmratestep3
</pre><img vspace="5" hspace="5" src="../scdmrate_codepad_04.png" alt=""> <p>最後の反復で、閉ループ システムとブロック <tt>sysTs2</tt> の組み合わせが 0.025 秒のレートから 0.05 秒のレートまでリサンプリングされます。</p><pre class="codeinput">sys_L = d2d(sysCL_Ts2*sysTs2,0.05)
</pre><pre class="codeoutput"> 
Zero/pole/gain:
 0.0001057 (z+22.76) (z+0.912) (z-0.9048) (z+0.06495)
-------------------------------------------------------
(z-0.01373) (z-0.6065) (z-0.6386) (z-0.8588) (z-0.9754)
 
Sampling time: 0.05
</pre><h2>Simulink&reg; Control Design™ コマンドを使用したモデルの線形化<a name="13"></a></h2><p>これらの結果は、Simulink&reg; Control Design™ のコマンド ライン インターフェイスを使用して再生できます。</p><pre class="codeinput">model = <span class="string">'scdmrate'</span>;
io(1) = linio(<span class="string">'scdmrate/Constant'</span>,1,<span class="string">'in'</span>);
io(2) = linio(<span class="string">'scdmrate/sysTs2'</span>,1,<span class="string">'out'</span>,<span class="string">'on'</span>);
sys = zpk(linearize(model,io))
</pre><pre class="codeoutput"> 
Zero/pole/gain from input &quot;Constant&quot; to output &quot;sysTs2&quot;:
 0.0001057 (z+22.76) (z+0.912) (z-0.9048) (z+0.06495)
-------------------------------------------------------
(z-0.6065) (z-0.6386) (z-0.8588) (z-0.9754) (z-0.01373)
 
Sampling time: 0.05
</pre><p class="footer">Copyright 2005-2007 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Linearization of Multirate Models % Copyright 2005-2007 The MathWorks, Inc. % $Revision: 1.1.4.2.2.1 $ $Date: 2010/07/29 21:29:23 $  %% % This example illustrates the process that the command linearize uses % when extracting a linear model of a nonlinear multirate Simulink(R) model.  % To illustrate the concepts, the process is first performed using  % functions from the Control System Toolbox(TM)  % before it is repeated using the linearize command.  %% Example Problem %%  % In the Simulink model |scdmrate.mdl| there are three different sample % rates specified in five blocks. These blocks are: % % * |sysC| - a continuous linear block,  % * |Integrator| - a continuous integrator, % * |sysTs1| - a block that has a sample time of 0.01 seconds, % * |sysTs2| - a block that has a sample time of 0.025 seconds, and % * |Zero-Order Hold| - a block that samples the incoming signal at 0.01 seconds. % sysC = zpk(-2,-10,0.1); Integrator = zpk([],0,1); sysTs1 = zpk(-0.7463,[0.4251 0.9735],0.2212,0.01); sysTs2 = zpk([],0.7788,0.2212,0.025);  %% % The model below shows how the blocks are connected. scdmrate  %%  % In this example we linearize the model between the output of the Constant % block and the output of the block |sysTs2|.  %% Step 1: Linearizing the Blocks in the Model  % The first step of the linearization is to linearize each block in the % model.  The linearization of the Saturation and Zero-Order Hold blocks is 1.   % The LTI blocks are already linear and therefore remain the same. The new % model with linearized blocks is shown below. scdmratestep1  %% Step 2: Rate Conversions % Because the blocks in the model contain different sample rates, it is not % possible to create a single-rate linearized model for the system without  % first using rate conversion functions to convert the various sample rates  % to a representative single rate. The rate conversion functions use an % iterative method. The % iterations begin with a least common multiple of the sample times in the % model. In this example the sample times are 0, 0.01, and 0.025 % seconds which yields a least common multiple of 0.05.  The rate conversion  % functions then take the combination of blocks with the fastest sample rate  % and resample them at the next fastest sample rate. In this example the  % first iteration converts the combination of the linearized continuous  % time blocks, |sysC| and |integrator| to a sample time of 0.01 using a  % zero order hold continuous to discrete conversion.   sysC_Ts1 = c2d(sysC*Integrator,0.01);  %%  % The blocks |sysC| and |Integrator| are now replaced by |sysC_Ts1|. scdmratestep2  %% % The next iteration converts all the blocks with a sample % time of 0.01 to a sample time of 0.025. First, the following command  % represents the combination of these blocks by closing the feedback loop. sysCL = feedback(sysTs1*sysC_Ts1,1);  %% % Next, a zero-order hold method converts the closed loop system, sysCL, % from a sample rate of 0.01 to 0.025. sysCL_Ts2 = d2d(sysCL,0.025);  %%  % The system |sysCL_Ts2| then replaces the feedback loop in the model. scdmratestep3  %%  % The final iteration resamples the combination of the closed loop system  % and the block |sysTs2| from a rate of 0.025 seconds to a rate of 0.05  % seconds. sys_L = d2d(sysCL_Ts2*sysTs2,0.05)  %% Linearizing the Model using Simulink(R) Control Design(TM) Commands % We can reproduce these results using the command line interface of  % Simulink(R) Control Design(TM). model = 'scdmrate'; io(1) = linio('scdmrate/Constant',1,'in');  io(2) = linio('scdmrate/sysTs2',1,'out','on');  sys = zpk(linearize(model,io))   displayEndOfDemoMessage(mfilename) ##### SOURCE END ##### --></body></html>