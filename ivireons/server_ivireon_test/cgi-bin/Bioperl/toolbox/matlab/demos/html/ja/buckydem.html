
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>グラフと行列</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-26"><meta name="DC.source" content="buckydem.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit buckydem">エディターで buckydem.m を開く</a></div><div class="right"><a href="matlab:echodemo buckydem">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>グラフと行列</h1><!--introduction--><p>このデモは、グラフと行列の関係の説明と SPARSE 行列の良い応用例を示します。</p><!--/introduction--><p>グラフは、接点間の連結が指定された接点の集合です。この例は、Buckminster Fuller の測地線ドーム (サッカー ボールまたは炭素 60 の分子) の連結グラフです。</p><p>MATLAB&reg; では、測地線ドームのデモは関数 BUCKY で実行することができます。</p><pre class="codeinput"><span class="comment">% Define the variables.</span>
[B,V] = bucky;
H = sparse(60,60);
k = 31:60;
H(k,k) = B(k,k);

<span class="comment">% Visualize the variables.</span>
gplot(B-H,V,<span class="string">'b-'</span>);
hold <span class="string">on</span>
gplot(H,V,<span class="string">'r-'</span>);
hold <span class="string">off</span>
axis <span class="string">off</span> <span class="string">equal</span>
</pre><img vspace="5" hspace="5" src="../buckydem_01.png" alt=""> <p>グラフは、隣接行列で表されています。</p><p>隣接行列を作るために、接点に 1 から N の番号を付けます。そして、接点 i が接点 j と連結している場合、行列の (i,j) 要素を 1 にし、そうでない場合、0 にします。</p><pre class="codeinput"><span class="comment">% Define a matrix A.</span>
A = [0 1 1 0 ; 1 0 0 1 ; 1 0 0 1 ; 0 1 1 0];

<span class="comment">% Draw a picture showing the connected nodes.</span>
cla
subplot(1,2,1);
gplot(A,[0 1;1 1;0 0;1 0],<span class="string">'.-'</span>);
text([-0.2, 1.2 -0.2, 1.2],[1.2, 1.2, -.2, -.2],(<span class="string">'1234'</span>)', <span class="keyword">...</span>
    <span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>)
axis([-1 2 -1 2],<span class="string">'off'</span>)

<span class="comment">% Draw a picture showing the adjacency matrix.</span>
subplot(1,2,2);
xtemp=repmat(1:4,1,4);
ytemp=reshape(repmat(1:4,4,1),16,1)';
text(xtemp-.5,ytemp-.5,char(<span class="string">'0'</span>+A(:)),<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>);
line([.25 0 0 .25 NaN 3.75 4 4 3.75],[0 0 4 4 NaN 0 0 4 4])
axis <span class="string">off</span> <span class="string">tight</span>
</pre><img vspace="5" hspace="5" src="../buckydem_02.png" alt=""> <p>以下は、多角形ごとに番号を付けた C60 構造分子の 1 つの半球内の接点です。</p><pre class="codeinput">subplot(1,1,1);
gplot(B(1:30,1:30),V(1:30,:),<span class="string">'b-'</span>);
<span class="keyword">for</span> j = 1:30,
    text(V(j,1),V(j,2),int2str(j),<span class="string">'FontSize'</span>,10);
<span class="keyword">end</span>
axis <span class="string">off</span> <span class="string">equal</span>
</pre><img vspace="5" hspace="5" src="../buckydem_03.png" alt=""> <p>この半球の隣接行列を可視化するために、関数 SPY を使って非ゼロ要素の輪郭をプロットします。</p><p>この行列は、接点 i が接点 j と結合する場合、接点 j は接点 i と結合しているため、対称行列になります。</p><pre class="codeinput">spy(B(1:30,1:30))
title(<span class="string">'spy(B(1:30,1:30))'</span>)
</pre><img vspace="5" hspace="5" src="../buckydem_04.png" alt=""> <p>半球に番号を付けたものを反対側に映して、全体に番号を付けます。</p><pre class="codeinput">[B,V] = bucky;
H = sparse(60,60);
k = 31:60;
H(k,k) = B(k,k);
gplot(B-H,V,<span class="string">'b-'</span>);
hold <span class="string">on</span>
gplot(H,V,<span class="string">'r-'</span>);
<span class="keyword">for</span> j = 31:60
    text(V(j,1),V(j,2),int2str(j), <span class="keyword">...</span>
        <span class="string">'FontSize'</span>,10,<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>);
<span class="keyword">end</span>
hold <span class="string">off</span>
axis <span class="string">off</span> <span class="string">equal</span>
</pre><img vspace="5" hspace="5" src="../buckydem_05.png" alt=""> <p>最終的に、最後のスパース行列の SPY プロットを表示します。</p><pre class="codeinput">spy(B)
title(<span class="string">'spy(B)'</span>)
</pre><img vspace="5" hspace="5" src="../buckydem_06.png" alt=""> <p>このグラフでは、各接点は他の 2、3 の接点とのみ連結しています。結果として、隣接行列は行ごとに 2、3 の非ゼロ要素を含みます。</p><p>このデモでは、スパース行列が役に立つ例を 1 つ示しました。</p><pre class="codeinput">gplot(B-H,V,<span class="string">'b-'</span>);
axis <span class="string">off</span> <span class="string">equal</span>
hold <span class="string">on</span>
gplot(H,V,<span class="string">'r-'</span>);
hold <span class="string">off</span>
</pre><img vspace="5" hspace="5" src="../buckydem_07.png" alt=""> <p class="footer">Copyright 1984-2007 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Graphs and Matrices % This demo gives an explanation of the relationship between graphs and matrices % and a good application of SPARSE matrices. %  % Copyright 1984-2007 The MathWorks, Inc. % $Revision: 1.1.6.10.2.1 $ $Date: 2010/07/29 21:28:52 $  %% % A graph is a set of nodes with specified connections between them. An example % is the connectivity graph of the Buckminster Fuller geodesic dome (also a % soccer ball or a carbon-60 molecule). %  % In MATLAB(R), the graph of the geodesic dome can be generated with the BUCKY % function.  % Define the variables. [B,V] = bucky; H = sparse(60,60); k = 31:60; H(k,k) = B(k,k);  % Visualize the variables. gplot(B-H,V,'b-'); hold on gplot(H,V,'r-'); hold off axis off equal  %% % A graph can be represented by its adjacency matrix. %  % To construct the adjacency matrix, the nodes are numbered 1 to N.  Then % element (i,j) of the matrix is set to 1 if node i is connected to node j, and % 0 otherwise.  % Define a matrix A. A = [0 1 1 0 ; 1 0 0 1 ; 1 0 0 1 ; 0 1 1 0];  % Draw a picture showing the connected nodes. cla subplot(1,2,1); gplot(A,[0 1;1 1;0 0;1 0],'.-'); text([-0.2, 1.2 -0.2, 1.2],[1.2, 1.2, -.2, -.2],('1234')', ...     'HorizontalAlignment','center') axis([-1 2 -1 2],'off')  % Draw a picture showing the adjacency matrix. subplot(1,2,2); xtemp=repmat(1:4,1,4);  ytemp=reshape(repmat(1:4,4,1),16,1)'; text(xtemp-.5,ytemp-.5,char('0'+A(:)),'HorizontalAlignment','center'); line([.25 0 0 .25 NaN 3.75 4 4 3.75],[0 0 4 4 NaN 0 0 4 4]) axis off tight  %% % Here are the nodes in one hemisphere of the bucky ball, numbered polygon by % polygon.  subplot(1,1,1); gplot(B(1:30,1:30),V(1:30,:),'b-'); for j = 1:30,     text(V(j,1),V(j,2),int2str(j),'FontSize',10); end axis off equal  %% % To visualize the adjacency matrix of this hemisphere, we use the SPY function % to plot the silhouette of the nonzero elements. %  % Note that the matrix is symmetric, since if node i is connected to node j, % then node j is connected to node i.  spy(B(1:30,1:30)) title('spy(B(1:30,1:30))')  %% % Now we extend our numbering scheme to the whole graph by reflecting the % numbering of one hemisphere into the other.  [B,V] = bucky; H = sparse(60,60); k = 31:60; H(k,k) = B(k,k); gplot(B-H,V,'b-'); hold on gplot(H,V,'r-'); for j = 31:60     text(V(j,1),V(j,2),int2str(j), ...         'FontSize',10,'HorizontalAlignment','center');    end hold off axis off equal  %% % Finally, here is a SPY plot of the final sparse matrix.  spy(B) title('spy(B)')  %% % In many useful graphs, each node is connected to only a few other nodes.  As a % result, the adjacency matrices contain just a few nonzero entries per row. %  % This demo has shown one place where SPARSE matrices come in handy.  gplot(B-H,V,'b-'); axis off equal hold on gplot(H,V,'r-'); hold off   displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>