
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>Filter Design and Analysis Tool (FDATool) の紹介</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="introfdatooldemo.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit introfdatooldemo">エディターで introfdatooldemo.m を開く</a></div><div class="right"><a href="matlab:echodemo introfdatooldemo">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>Filter Design and Analysis Tool (FDATool) の紹介</h1><!--introduction--><p>Filter Design and Analysis Tool (FDATool) は、フィルターの設計と解析のための Signal Processing Toolbox™ の強力なグラフィカル ユーザー インターフェイス (GUI) です。</p><p>FDATool では、フィルターの性能仕様を設定したり、MATLAB&reg; ワークスペースからフィルターをインポートしたり、極や零点の追加や移動、削除を行うことで、デジタルの FIR または IIR フィルターを短時間で設計することができます。また、FDATool には、ゲイン応答プロット、位相応答プロット、極-零点プロットなどのフィルター解析ツール群も用意されています。</p><p>コマンド ライン フィルター設計関数の便利な代替手段として FDATool を使用できます。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">ご利用の前に</a></li><li><a href="#2">フィルターの設計</a></li><li><a href="#3">他の解析の表示</a></li><li><a href="#4">設計とフィルター仕様の比較</a></li><li><a href="#5">軸の単位の変更</a></li><li><a href="#6">データ ポイントのマーク</a></li><li><a href="#7">設計の最適化</a></li><li><a href="#8">別のフィルター構造の使用</a></li><li><a href="#9">解析パラメーターの変更</a></li><li><a href="#10">フィルターのエクスポート</a></li><li><a href="#11">MATLAB ファイルの生成</a></li><li><a href="#12">フィルターの量子化</a></li><li><a href="#13">ターゲット</a></li><li><a href="#14">追加機能</a></li></ul></div><h2>ご利用の前に<a name="1"></a></h2><p>MATLAB コマンド プロンプトで fdatool と入力します。</p><p>&gt;&gt;fdatool</p><p><b>[本日のワンポイント]</b> ダイアログが FDATool の使用に関する提案と共に表示されます。次に、GUI が既定フィルターと共に表示されます。</p><p><img vspace="5" hspace="5" src="../ifdadefaultscrn.png" alt=""> </p><p>GUI には次の 3 つの主要領域があります。</p><div><ul><li>[現在のフィルター情報] 領域</li><li>[フィルター表示] 領域</li><li>設計パネル</li></ul></div><p>GUI の上半分には、現在のフィルターのフィルター仕様および応答に関する情報が表示されます。左上の [現在のフィルター情報] 領域には、フィルターのプロパティ、つまり、フィルター構造、次数、使用されるセクション数、フィルターが安定かどうかが表示されます。また、複数のフィルターを処理するためのフィルター マネージャーへのアクセスも提供します。</p><p>右上の [フィルター表示] 領域には、ゲイン応答、群遅延、フィルター係数など、さまざまなフィルター応答が表示されます。</p><p>GUI の下半分は、FDATool の対話部分です。下半分の設計パネルは、フィルター仕様を定義する場所です。このパネルは、他の 2 つの上部領域に何を表示するかを制御します。サイド バーのボタンを使用して、他のパネルを下半分に表示できます。</p><p>このツールには状況依存ヘルプが含まれています。右クリックするか、<b>[これはなに?]</b> ボタンをクリックすることで、このツールのさまざまな部分の情報を得ることができます。</p><h2>フィルターの設計<a name="2"></a></h2><p>ナイキスト周波数 (サンプリング周波数の半分) の 20% 以下のすべての周波数を通過させ、ナイキスト周波数の 50% 以上の周波数を減衰させるロー パス フィルターを設計します。次の仕様で FIR 等リップル フィルターを使用します。</p><div><ul><li>通過帯域の減衰量 1 dB</li><li>遮断帯域の減衰量 80 dB</li><li>通過帯域周波数 0.2 [正規化 (0-1)]</li><li>遮断帯域周波数 0.5 [正規化 (0-1)]</li></ul></div><p>この設計を実現するために、次の仕様を使用します。</p><p><img vspace="5" hspace="5" src="../ifdadesignfir.png" alt=""> </p><p>1. <b>[応答タイプ]</b> の下のドロップダウン メニューから <b>[ローパス]</b> を選択し、<b>[FIR 設計法]</b> の下で <b>[等リップル]</b> を選択します。一般に、応答タイプや設計法を変更すると、フィルター パラメーターと [フィルター表示] 領域が自動的に更新されます。</p><p>2. <b>[フィルター次数]</b> 領域で <b>[次数を指定]</b> を選択し、<b>30</b> と入力します。</p><p>3. FIR 等リップル フィルターには、周波数グリッドの密度をコントロールする <b>[密度係数]</b> オプションがあります。値を増やすと、理想的な等リップル フィルターにより密接に近似するフィルターが作成されますが、計算が増えるため、より多くの時間が必要になります。この値を 20 のままにします。</p><p>4. <b>[周波数仕様]</b> 領域の [単位] プルダウン メニューで <b>[正規化 (0-1)]</b> を選択します。</p><p>5. <b>[周波数仕様]</b> 領域で <b>[wpass]</b> に対して <b>0.2</b> と入力し、<b>[wstop]</b> に対して <b>0.5</b> と入力します。</p><p>6. <b>[ゲイン仕様]</b> 領域の <b>[Wpass]</b> および <b>[Wstop]</b> は、FIR 等リップル フィルターでの最適化中に使用される、帯域ごとに 1 つの正の重みです。これらの値を 1 のままにします。</p><p>7. 設計仕様を設定したら、GUI の下部にある <b>[フィルターの設計]</b> ボタンをクリックしてフィルターを設計します。</p><p>フィルターのゲイン応答は、係数が計算された後に、[フィルター解析] 領域に表示されます。</p><p><img vspace="5" hspace="5" src="../ifdafirmag.png" alt=""> </p><h2>他の解析の表示<a name="3"></a></h2><p>一度、フィルターを設計すると、ツール バーのボタンのいずれかをクリックすることで、ディスプレイ ウィンドウに次のフィルター解析を表示できます。</p><p><img vspace="5" hspace="5" src="../ifdatoolbar.png" alt=""> </p><p>左から右の順に、ボタンは次のとおりです。</p><div><ul><li>ゲイン応答</li><li>位相応答</li><li>ゲイン応答と位相応答</li><li>群遅延応答</li><li>位相遅延応答</li><li>インパルス応答</li><li>ステップ応答</li><li>極-零点プロット</li><li>フィルター係数</li><li>フィルター情報</li></ul></div><h2>設計とフィルター仕様の比較<a name="4"></a></h2><p>FDATool では、応答プロット上にフィルター仕様を重ね合わせる仕様マスクを使用することで、設計がどの程度フィルター仕様を満たすかを測定できます。表示領域で、ゲイン プロットが表示されたら、<b>[表示]</b> メニューから <b>[仕様マスク]</b> を選択して応答プロット上にフィルター仕様を重ね合わせます。</p><p>仕様マスク付きのフィルターのゲイン応答を次に示します。</p><p><img vspace="5" hspace="5" src="../ifdadesignmask.png" alt=""> </p><h2>軸の単位の変更<a name="5"></a></h2><p>x 軸または y 軸の単位を変更するには、軸ラベル上でマウスを右クリックし、希望する単位を選択します。現在の単位にはチェックマークが付いています。</p><p><img vspace="5" hspace="5" src="../ifdamagaxis.png" alt=""> </p><h2>データ ポイントのマーク<a name="6"></a></h2><p>表示領域で、プロット内の任意の点をクリックして、その点の値を表示するデータ マーカーを追加できます。データ マーカーを右クリックすると、データ マーカーの移動や削除、外観の調整を行うことができるメニューが表示されます。</p><p><img vspace="5" hspace="5" src="../ifdadatamarker.png" alt=""> </p><h2>設計の最適化<a name="7"></a></h2><p>フィルターの実装コストを最小限に抑えるために、設計パネルの <b>[最小次数]</b> オプションを使用して係数の数を減らしてみます。</p><p>設計領域で <b>[フィルター次数]</b> の選択を <b>[最小次数]</b> に変更し、他のパラメーターはそのままにします。</p><p><b>[フィルターの設計]</b> ボタンをクリックして新規フィルターを設計します。</p><p><img vspace="5" hspace="5" src="../ifdafirminorder.png" alt=""> </p><p>[現在のフィルター情報] 領域でわかるように、フィルター次数が 30 から 16 に減少し、リップル数が減少し、遷移幅が広くなりました。通過帯域と遮断帯域の仕様は設計基準を満たしたままです。</p><h2>別のフィルター構造の使用<a name="8"></a></h2><p>このデモで使用しているフィルターは直接型 FIR です。通常、直接型 FIR 転置構造はハードウェアに実装されています。[編集] メニューから [構造の変換] ダイアログを使用して、現在のフィルターを新しい構造に変更します。フィルターは、次の表現に変換できます。</p><div><ul><li>状態空間</li><li>直接型 FIR</li><li>直接型 FIR 転置</li><li>直接型対称 FIR</li></ul></div><h2>解析パラメーターの変更<a name="9"></a></h2><p>プロット上で右クリックし、[解析パラメーター] を選択することによって、解析固有のパラメーターを変更するためのダイアログ ボックスを使用できます。([解析] メニューから [解析パラメーター] を選択することもできます。)</p><p><img vspace="5" hspace="5" src="../ifdaanalysisparam.png" alt=""> </p><p>表示パラメーターを既定値として保存するには、<b>[既定として保存]</b> をクリックします。MATLAB 定義の既定値に戻すには、<b>[オリジナルの既定に戻す]</b> をクリックします。</p><h2>フィルターのエクスポート<a name="10"></a></h2><p>設計に満足したら、フィルターを次のエクスポート先にエクスポートできます。</p><div><ul><li>MATLAB ワークスペース</li><li>MAT ファイル</li><li>テキストファイル</li></ul></div><p><b>[ファイル]</b> メニューから <b>[エクスポート]</b> を選択します。</p><p><img vspace="5" hspace="5" src="../ifdaexportcoeff.png" alt=""> </p><p>MATLAB ワークスペースにエクスポートする場合、<b>[エクスポート]</b> プルダウン メニューから選択することで、係数またはオブジェクトとしてエクスポートできます。</p><p><b>オブジェクト</b> としてエクスポートする場合、オブジェクトのプロパティでその外観と動作の多くの側面を制御します。MATLAB コマンド プロンプトから <b>GET</b> および <b>SET</b> コマンドを使用して、オブジェクトのプロパティ値にアクセスし、プロパティ値を操作することができます。</p><h2>MATLAB ファイルの生成<a name="11"></a></h2><p>FDATool を使用すると、フィルターを再作成するための MATLAB コードを生成できます。これにより、既存のコードに設計を組み込んだり、スクリプトでフィルターの作成を自動化したりできます。</p><p><b>[ファイル]</b> メニューから <b>[MATLAB コードの生成]</b> を選択し、[MATLAB コードの生成] ダイアログ ボックスでファイル名を指定します。</p><p>上で設計した最小次数フィルターから次のコードが生成されました。</p><p><img vspace="5" hspace="5" src="../ifdaminordercode.png" alt=""> </p><h2>フィルターの量子化<a name="12"></a></h2><p>Filter Design Toolbox™ がインストールされている場合、サイド バーで <b>[量子化パラメーター設定]</b> パネルを利用できます。</p><p><img vspace="5" hspace="5" src="../ifdaquanpanel.png" alt=""> </p><p>このパネルを使用して倍精度のフィルターを量子化および解析できます。Filter Design Toolbox を使用すると、倍精度から単精度に量子化できます。Fixed Point Toolbox がある場合は、フィルターを固定小数点精度に量子化できます。フィルター内に浮動小数点演算と固定小数点演算を混在させることはできません。</p><h2>ターゲット<a name="13"></a></h2><p>FDATool の <b>[ターゲット]</b> メニューを使用すると、フィルターを表すさまざまなタイプのコードを生成できます。たとえば、C ヘッダー ファイルや、XILINX Coefficient (COE) ファイル (Filter Design Toolbox を使用)、VHDL および Verilog をテスト ベンチと共に (Filter Design HDL Coder™ を使用) 生成できます。</p><h2>追加機能<a name="14"></a></h2><p>また、FDATool は、次に示す他の MathWorks™ 製品から追加機能を統合します。</p><div><ul><li><b>Embedded Target for Texas Instruments™ C6000™ DSP</b>- C6000 DSP ターゲット ボードに対してダウンロード可能なコードを生成します。</li></ul></div><div><ul><li><b>Filter Design HDL Coder</b>- 固定小数点フィルターに対して合成可能な VHDL または Verilog コードを生成します。</li></ul></div><div><ul><li><b>Filter Design Toolbox</b>- 高度な FIR および IIR 設計手法 (つまり、フィルター変換、マルチレート フィルター) を追加します。</li></ul></div><div><ul><li><b>Embedded IDE Link™ CC Development Tool</b>- Code Composer Studio™ で利用可能なコードをエクスポートします。</li></ul></div><div><ul><li><b>Signal Processing Blockset™</b>- フィルターに対して同等の Signal Processing Blockset ブロックを生成します。</li></ul></div><div><ul><li><b>Simulink&reg;</b>- Atomic の Simulink ブロックからフィルターを生成します。</li></ul></div><p class="footer">Copyright 2005-2007 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Introduction to the Filter Design and Analysis Tool (FDATool) % The Filter Design and Analysis Tool (FDATool) is a powerful graphical % user interface (GUI) in the Signal Processing Toolbox(TM) for designing and % analyzing filters. % % FDATool enables you to quickly design digital FIR or IIR filters by % setting filter performance specifications, by importing filters from your % MATLAB(R) workspace or by adding, moving or deleting poles and zeros. % FDATool also provides tools for analyzing filters, such as magnitude and % phase response plots and pole-zero plots.  % % You can use FDATool as a convenient alternative to the command line % filter design functions.  % Copyright 2005-2007 The MathWorks, Inc. % $Revision: 1.1.4.9.2.1 $ $Date: 2010/07/29 21:29:04 $  %% Getting Started % % Type fdatool at the MATLAB command prompt: % % % >>fdatool  % % % A *Tip of the Day* dialog displays with suggestions for using FDATool. % Then, the GUI displays with a default filter.  %  % <<../ifdadefaultscrn.png>> % % The GUI has three main regions: % % * The Current Filter Information region % * The Filter Display region and  % * The Design panel   %  % The upper half of the GUI displays information on filter specifications % and responses for the current filter. The Current Filter Information % region, in the upper left, displays filter properties, namely the filter % structure, order, number of sections used and whether the filter is % stable or not.  It also provides access to the Filter manager for working % with multiple filters.  % % The Filter Display region, in the upper right, displays various filter % responses, such as, magnitude response, group delay and filter % coefficients. % % The lower half of the GUI is the interactive portion of FDATool. The % Design Panel, in the lower half is where you define your filter % specifications.  It controls what is displayed in the other two upper % regions.  Other panels can be displayed in the lower half by using the % sidebar buttons.  % % The tool includes Context-sensitive help.  You can right-click or click % the *What's This?* button to get information on the different parts of % the tool. % % %% Designing a Filter % % We will design a low pass filter that passes all frequencies less than or % equal to 20% of the Nyquist frequency (half the sampling frequency) and % attenuates frequencies greater than or equal to 50% of the Nyquist % frequency.  We will use an FIR Equiripple filter with these % specifications: % % * Passband attenuation 1 dB  % * Stopband attenuation 80 dB  % * A passband frequency 0.2 [Normalized (0 to 1)]  % * A stopband frequency 0.5 [Normalized (0 to 1)]  % % To implement this design, we will use the following specifications: % % <<../ifdadesignfir.png>> %  % % 1. Select *Lowpass* from the dropdown menu under *Response Type* and % *Equiripple* under *FIR Design Method*.  In general, when you change the % Response Type or Design Method, the filter parameters and Filter Display % region update automatically. % % 2. Select *Specify order* in the *Filter Order* area and enter *30*. % % 3. The FIR Equiripple filter has a *Density Factor* option which controls % the density of the frequency grid. Increasing the value creates a filter % which more closely approximates an ideal equiripple filter, but more time % is required as the computation increases.  Leave this value at 20. % % 4. Select *Normalized (0 to 1)* in the Units pull down menu in the *Frequency % Specifications* area. % % 5. Enter *0.2* for *wpass* and *0.5* for *wstop* in the *Frequency % Specifications* area. % % 6. *Wpass* and *Wstop*, in the *Magnitude Specifications* area are % positive weights, one per band, used during optimization in the FIR % Equiripple filter. Leave these values at 1. % % 7. After setting the design specifications, click the *Design Filter* % button at the bottom of the GUI to design the filter. % % The magnitude response of the filter is displayed in the Filter Analysis % area after the coefficients are computed. %  % <<../ifdafirmag.png>> % %% Viewing other Analyses % % Once you have designed the filter, you can view the following filter % analyses in the display window by clicking any of the buttons on the toolbar: % % <<../ifdatoolbar.png>> % % In order from left to right, the buttons are % % * Magnitude response  % * Phase response  % * Magnitude and Phase responses  % * Group delay response  % * Phase delay response  % * Impulse response  % * Step response  % * Pole-zero plot  % * Filter Coefficients % * Filter Information % %% Comparing the Design to Filter Specifications % % FDATool allows you to measure how closely your design meets the filter  % specifications by using Specification masks which overlay the filter % specifications on the response plot. In the Display Region, when the % Magnitude plot is displayed, select *Specification Mask* from the *View* % menu to overlay the filter specifications on the response plot. % % The magnitude response of the filter with Specification mask is shown below: % % <<../ifdadesignmask.png>> % %% Changing Axes Units %  % You can change the x- or y-axis units by right-clicking the mouse on an % axis label and selecting the desired units.  The current units have a % checkmark.   %  % <<../ifdamagaxis.png>> % %% Marking Data Points % % In the Display region, you can click on any point in the plot to add a % data marker, which displays the values at that point.  Right-clicking on % the data marker displays a menu where you can move, delete or adjust the % appearance of the data markers. % % <<../ifdadatamarker.png>> % %% Optimizing the Design % % To minimize the cost of implementation of the filter, we will try to % reduce the number of coefficients by using *Minimum Order* option in the % design panel. %  % Change the selection in *Filter Order* to *Minimum Order* in the % Design Region and leave the other parameters as they are. %  % Click the *Design Filter* button to design the new filter. % % <<../ifdafirminorder.png>> %  % As you can see in the Current Filter Information area, the filter order % decreased from 30 to 16, the number of ripples decreased and the % transition width became wider.  The passband and the stopband % specifications still meet the design criteria. % %% Using a Different Filter Structure % % Our filter is a Direct-form FIR.  Typically, the Direct-Form FIR % transposed structure is implemented in hardware. You can use Convert % Structure dialog from the Edit menu to change the current filter to a new % structure. Filters can be converted to the following representations:  % % * State-Space  % * Direct-Form FIR % * Direct-Form FIR Transposed % * Direct-Form Symmetric FIR % % %% Changing Analyses Parameters % % By right-clicking on the plot and selecting Analysis Parameters, you can % display a dialog box for changing analysis-specific parameters. (You can % also select Analysis Parameters from the Analysis menu.)   % % <<../ifdaanalysisparam.png>> %  % To save the displayed parameters as the default values, click *Save as Default*.  % To restore the MATLAB-defined default values, click *Restore Original Defaults*.  % %% Exporting the Filter % % Once you are satisfied with your design, you can export your filter to % the following destinations: % % * MATLAB workspace % * MAT-file % * Text-file % % Select *Export* from the *File* menu. % % <<../ifdaexportcoeff.png>> % % If exporting to the MATLAB workspace, you can export as coefficients or % as an object by selecting from the *Export* from the pulldown menu. % % If you want to export as an *object*, the object's properties control % many aspects of its apearance and behaviour.  You can use *GET* and *SET* % commands from the MATLAB command prompt to have access and manipulate the % property values of the object.   % % %% Generating a MATLAB File % % FDATool allows you to generate MATLAB code to re-create your filter. % This enables you to embed your design into existing code or automate the % creation of your filters in a script. % % Select *Generate MATLAB code* from the *File* menu and specify the % filename in the Generate MATLAB code dialog box. % % The following code was generated from the minimum order filter we % designed above: % % <<../ifdaminordercode.png>> % %  %% Quantizing a Filter %  % If you have the Filter Design Toolbox(TM) installed, the *Set quantization % parameters* panel is available on the sidebar:  % % <<../ifdaquanpanel.png>> % %  % You can use this panel to quantize and analyze double-precision filters. % With the Filter Design Toolbox you can quantize from double-precision to % single-precision.  If you have the Fixed Point Toolbox, you can quantize % filters to fixed-point precision.  Note that you cannot mix % floating-point and fixed-point arithmetic in your filter. % %  %% Targets % % The *Targets* menu of the FDATool allows you to generate  % various types of code representing your filter.  For example, you can % generate C header files, XILINX coefficients(COE) files (with the Filter % Design Toolbox) and VHDL, Verilog along with test benches (with  % Filter Design HDL Coder(TM)). % %% Additional Features %  % FDATool also integrates additional functionality from these other % MathWorks(TM) products: % % * *Embedded Target for Texas Instruments(TM) C6000(TM) DSP*- Generates %   downloadable code for C6000 DSP target board. % % * *Filter Design HDL Coder*- Generates synthesizable VHDL or Verilog %   code for fixed-point filters % % * *Filter Design Toolbox*- Adds advanced FIR and IIR design techniques (i.e. %   Filter transformations, Multirate filters) % % * *Embedded IDE Link(TM) CC Development Tool*- Exports code usable by %    Code Composer Studio(TM) % % * *Signal Processing Blockset(TM)*- Generates equivalent Signal Processing Blockset %   block for the filter % % * *Simulink(R)*- Generates filters from atomic Simulink blocks     displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>