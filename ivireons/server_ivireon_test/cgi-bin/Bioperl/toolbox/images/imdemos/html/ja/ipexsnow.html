
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>雪片の粒度分布</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="ipexsnow.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit ipexsnow">エディターで ipexsnow.m を開く</a></div><div class="right"><a href="matlab:echodemo ipexsnow">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>雪片の粒度分布</h1><!--introduction--><p>粒度分布は、最初に各オブジェクトを明示的に区分 (検出) せずにイメージ内のオブジェクトの大きさの分布を決定します。目的は、イメージ内の雪片の大きさの分布を計算することです。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">イメージの読み込み</a></li><li><a href="#2">コントラストの強調</a></li><li><a href="#3">強調したイメージの表面積強度分布の決定</a></li><li><a href="#4">分布の 1 次導関数の計算</a></li><li><a href="#5">特定の半径を持つ雪片の抽出</a></li></ul></div><h2>イメージの読み込み<a name="1"></a></h2><p>イメージ 'snowflakes.png' を読み込みます。これは雪片の写真です。</p><pre class="codeinput">I = imread(<span class="string">'snowflakes.png'</span>);
figure,imshow(I)
</pre><img vspace="5" hspace="5" src="../ipexsnow_01.png" alt=""> <h2>コントラストの強調<a name="2"></a></h2><p>最初の手順は、イメージの強度コントラストの最大化です。コントラストに制限を付けた適応ヒストグラム均等化を実行する ADAPTHISTEQ を使用して、実行できます。データ タイプの全ダイナミック レンジを満たすように、IMADJUST を使用してイメージ強度を再スケーリングします。</p><pre class="codeinput">claheI = adapthisteq(I,<span class="string">'NumTiles'</span>,[10 10]);
claheI = imadjust(claheI);
imshow(claheI);
</pre><img vspace="5" hspace="5" src="../ipexsnow_02.png" alt=""> <h2>強調したイメージの表面積強度分布の決定<a name="3"></a></h2><p>粒度分布は、雪片の表面積強度分布をサイズの関数として推定します。粒度分布は、イメージ オブジェクトを、サイズが増大するろ過器を通してふるい分けし、各パス後の残りを収集することによりサイズを決定できる石になぞらえます。イメージ オブジェクトは、サイズ増大の構造体要素でイメージをオープン、オープン後で残りの表面積強度 (イメージでのピクセル値の総和) を数えることによりふるい分けられます。</p><p>構造体要素のサイズを増大させると表面積強度がゼロになるように、カウンターの制限を選択します。表示目的のために、表面積配列の最初のエントリは空白にします。</p><pre class="codeinput"><span class="keyword">for</span> counter = 0:22
remain = imopen(claheI, strel(<span class="string">'disk'</span>, counter));
intensity_area(counter + 1) = sum(remain(:));
<span class="keyword">end</span>
figure,plot(intensity_area, <span class="string">'m - *'</span>), grid <span class="string">on</span>;
title(<span class="string">'Sum of pixel values in opened image as a function of radius'</span>);
xlabel(<span class="string">'radius of opening (pixels)'</span>);
ylabel(<span class="string">'pixel value sum of opened objects (intensity)'</span>);
</pre><img vspace="5" hspace="5" src="../ipexsnow_03.png" alt=""> <h2>分布の 1 次導関数の計算<a name="4"></a></h2><p>2 回連続したオープン処理間で表面積強度が大幅に下がる場合は、イメージに小さいオープン処理と同じようなサイズのオブジェクトがあるということです。これは、表面積強度配列の 1 次導関数と同じで、イメージに雪片のサイズ分布を含んでいます。DIFF 関数で 1 次導関数を計算します。</p><pre class="codeinput">intensity_area_prime= diff(intensity_area);
plot(intensity_area_prime, <span class="string">'m - *'</span>), grid <span class="string">on</span>;
title(<span class="string">'Granulometry (Size Distribution) of Snowflakes'</span>);
set(gca, <span class="string">'xtick'</span>, [0 2 4 6 8 10 12 14 16 18 20 22]);
xlabel(<span class="string">'radius of snowflakes (pixels)'</span>);
ylabel(<span class="string">'Sum of pixel values in snowflakes as a function of radius'</span>);
</pre><img vspace="5" hspace="5" src="../ipexsnow_04.png" alt=""> <h2>特定の半径を持つ雪片の抽出<a name="5"></a></h2><p>グラフの極小値とその半径の値に注意してください。極小値は、その半径を持っている雪片が多いことを通知します。最小ポイントが負になると、その半径での雪片の累積強度が大きくなります。たとえば、負の最小ポイントは、5 ピクセルの半径マークで発生します。5 ピクセルの半径を持つ雪片を、次の手順で抽出できます。</p><pre class="codeinput">open5 = imopen(claheI,strel(<span class="string">'disk'</span>,5));
open6 = imopen(claheI,strel(<span class="string">'disk'</span>,6));
rad5 = imsubtract(open5,open6);
imshow(rad5,[]);
</pre><img vspace="5" hspace="5" src="../ipexsnow_05.png" alt=""> <p class="footer">Copyright 1993-2005 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Granulometry of Snowflakes % Granulometry determines the size distribution of objects in an image without % explicitly segmenting (detecting) each object first. Your goal is to calculate % the size distribution of snowflakes in an image. % % Copyright 1993-2005 The MathWorks, Inc. % $Revision: 1.1.4.2.2.1 $ $Date: 2010/07/29 21:28:50 $  %% Read Image % Read in the 'snowflakes.png' image, which is a photograph of snowflakes.  I = imread('snowflakes.png'); figure,imshow(I)  %% Enhance Contrast % Your first step is to maximize the intensity contrast in the image.  You can % do this using ADAPTHISTEQ, which performs contrast-limited adaptive histogram % equalization. Rescale the image intensity using IMADJUST so that it % fills the data type's entire dynamic range.  claheI = adapthisteq(I,'NumTiles',[10 10]); claheI = imadjust(claheI); imshow(claheI);  %% Determine Intensity Surface Area Distribution in Enhanced Image % Granulometry estimates the intensity surface area distribution of % snowflakes as a function of size. Granulometry likens image objects to stones % whose sizes can be determined by sifting them through screens of increasing % size and collecting what remains after each pass. Image objects are sifted by % opening the image with a structuring element of increasing size and counting % the remaining intensity surface area (summation of pixel values in the image) % after each opening.  % % Choose a counter limit so that the intensity surface area goes to zero as % you increase the size of your structuring element. % For display purposes, leave the first entry in the surface area array empty.  for counter = 0:22     remain = imopen(claheI, strel('disk', counter));     intensity_area(counter + 1) = sum(remain(:));   end figure,plot(intensity_area, 'm - *'), grid on; title('Sum of pixel values in opened image as a function of radius'); xlabel('radius of opening (pixels)'); ylabel('pixel value sum of opened objects (intensity)');  %% Calculate First Derivative of Distribution % A significant drop in intensity surface area between two consecutive openings % indicates that the image contains objects of comparable size to the smaller % opening. This is equivalent to the first derivative of the intensity surface % area array, which contains the size distribution of the snowflakes in the % image. Calculate the first derivative with the DIFF function.  intensity_area_prime= diff(intensity_area); plot(intensity_area_prime, 'm - *'), grid on; title('Granulometry (Size Distribution) of Snowflakes'); set(gca, 'xtick', [0 2 4 6 8 10 12 14 16 18 20 22]); xlabel('radius of snowflakes (pixels)'); ylabel('Sum of pixel values in snowflakes as a function of radius');  %% Extract Snowflakes Having a Particular Radius % Notice the minima and the radii where they occur in the graph.  The minima % tell you that snowflakes in the image have those radii. The more negative the % minimum point, the higher the snowflakes' cumulative intensity at that radius. % For example, the most negative minimum point occurs at the 5 pixel radius % mark. You can extract the snowflakes having a 5 pixel radius with the % following steps.  open5 = imopen(claheI,strel('disk',5)); open6 = imopen(claheI,strel('disk',6)); rad5 = imsubtract(open5,open6); imshow(rad5,[]);   displayEndOfDemoMessage(mfilename) ##### SOURCE END ##### --></body></html>