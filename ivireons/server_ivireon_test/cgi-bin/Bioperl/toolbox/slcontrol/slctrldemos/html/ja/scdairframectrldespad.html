
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>カスケードの複数ループ/複数補償器のフィードバック設計</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="scdairframectrldespad.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit scdairframectrldespad">エディターで scdairframectrldespad.m を開く</a></div><div class="right"><a href="matlab:echodemo scdairframectrldespad">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>カスケードの複数ループ/複数補償器のフィードバック設計</h1><!--introduction--><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">モデルを開く</a></li><li><a href="#4">設計の概要</a></li><li><a href="#8">複数ループ設計におけるループの分離</a></li><li><a href="#9">SISO 設計作業の作成</a></li><li><a href="#11">新規設計の開始</a></li><li><a href="#26">外側のフィードバック ループの影響の除去</a></li><li><a href="#39">設計の完了</a></li><li><a href="#41">完了した設計</a></li><li><a href="#51">Simulink への設計の書き込み</a></li></ul></div><h2>モデルを開く<a name="1"></a></h2><p>少し時間をとって、モデルを調べます。</p><p><a href="matlab:open_system('scdairframectrl')">機体モデルを開く</a></p><pre class="codeinput">open_system(<span class="string">'scdairframectrl'</span>);
</pre><img vspace="5" hspace="5" src="../scdairframectrldespad_01.png" alt=""> <h2>設計の概要<a name="4"></a></h2><p>このデモでは、加速度成分 (az) が、最大立ち上がり時間が 0.5 秒の基準信号を追従するように、2 つのカスケード フィードバック ループを設計するプロセスを紹介します。この例のフィードバック ループ構造では、内側のフィードバック ループとして本体比 (q) を、外側のフィードバック信号として加速度 (az) を、それぞれ使用します。</p><p>調整されるフィードバック コントローラーは、以下の 2 つです。</p><div><ul><li><tt>scdairframectrl/q Control</tt> - Discrete-Time Integrator と Gain ブロック <tt>q Gain</tt> が、この内側ループを安定化させます。</li></ul></div><pre class="codeinput">open_system(<span class="string">'scdairframectrl/q Control'</span>)
</pre><img vspace="5" hspace="5" src="../scdairframectrldespad_02.png" alt=""> <div><ul><li><tt>scdairframectrl/az Control</tt> - Discrete-Time Integrator、Discrete Transfer Function および Gain ブロック <tt>az Gain</tt> が、外側ループを安定化させます。</li></ul></div><pre class="codeinput">open_system(<span class="string">'scdairframectrl/az Control'</span>)
</pre><img vspace="5" hspace="5" src="../scdairframectrldespad_03.png" alt=""> <h2>複数ループ設計におけるループの分離<a name="8"></a></h2><p>カスケード フィードバック システムの一般的な設計手順では、最初に内側ループを設計し、次に外側ループを設計します。Simulink&reg; 補償器設計作業では、両方のループを同時に設計することが可能です。既定の設定では、複数ループのフィードバック システムを設計する際にループ間の結合の影響が考慮されます。しかし、2 つのフィードバック ループを同時に設計する場合は、内側のループを調整するときに外側のループの影響を除去しなければなりません。この例では、外側のループ (az) の影響を除去したうえで、内側のフィードバック ループ (q) を設計しなければなりません。この例では、Simulink 補償器設計作業でフィードバック ループを分離する方法を示します。</p><h2>SISO 設計作業の作成<a name="9"></a></h2><p>この例では、Simulink 補償器設計作業を使用して、フィードバック システムで補償器を調整する SISO 設計作業を作成します。SISO 設計作業を作成する方法は以下の 2 つです。</p><div><ul><li>モデルの左下隅のサブシステムをダブルクリックして、事前に設定されている Simulink&reg; Control Design™ 作業を起動する。</li><li>以下の手順に従って、SISO 設計作業を作成する。</li></ul></div><h2>新規設計の開始<a name="11"></a></h2><p><b>手順 1</b> モデル <tt>scdairframectrl.mdl</tt> の新しい Simulink 補償器設計作業を開始します。開始するには、Simulink モデルから <b></b>[ツール]、[制御設計]、[補償器設計] を選択します。</p><p><b>手順 2</b> 調整する以下のブロックを選択します。</p><div><ul><li><tt>scdairframectrl/q Control/q Gain</tt></li><li><tt>scdairframectrl/az Control/az Gain</tt></li><li><tt>scdairframectrl/az Control/az DTF</tt></li></ul></div><p><b>手順 3</b> 以下の閉ループ信号を選択します。</p><div><ul><li>入力:<tt>scdairframectrl/Step az</tt> - 出力端子 1</li><li>出力:<tt>scdairframectrl/Airframe Model</tt> - 出力端子 1</li></ul></div><p><img vspace="5" hspace="5" src="../../html_extra/scdairframectrldes/closedloopsignals.png" alt=""> </p><p><b>手順 4</b> <b></b>[ブロックの調整...] ボタンをクリックして、設計の設定ウィザードを起動します。</p><p>Simulink 制御設計が、開ループ設計に対する 3 つの潜在的フィードバック ループを自動的に認識します。</p><div><ul><li>出力端子 1 (<tt>scdairframectrl/az Control/az DTF</tt>) の開ループ</li><li>出力端子 1 (<tt>scdairframectrl/az Control/az Gain</tt>) の開ループ</li><li>出力端子 1 (<tt>scdairframectrl/q Control/q Gain</tt>) の開ループ</li></ul></div><p>ウィザードの手順 1 で、調整するループを選択します。</p><div><ul><li>プロット 1:調整するループ - 出力端子 1 (<tt>scdairframectrl/az Control/az DTF</tt>) の開ループ、プロット タイプ - 開ループ ボード線図</li><li>プロット 2:調整するループ - 出力端子 1 (<tt>scdairframectrl/q Control/q Gain</tt>) の開ループ、プロット タイプ - 開ループ ボード線図</li></ul></div><p><img vspace="5" hspace="5" src="../../html_extra/scdairframectrldes/selectloopstep.png" alt=""> </p><p>ウィザードの手順 2 で、プロット 1 に対するステップ応答を選択し、<tt>Closed Loop from scdairframectrl/Step az to scdairframe/Ariframe Model (pt 1)</tt> をこのプロットに追加して、フィードバック システムの閉ループ応答を表示します。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdairframectrldes/selectanalysisstep.png" alt=""> </p><p>ウィザードが完了すると、SISO 設計作業ノードが作成されます。この作業ノードを使用して、設計を完成させます。</p><h2>外側のフィードバック ループの影響の除去<a name="26"></a></h2><p>SISO 設計作業は、複数のフィードバック ループを同時に設計できる状態にあります。ボード線図エディター (以下のイメージを参照) で、左側のプロット (外側のフィードバック ループ az) をクリックし、フィードバック ループのゲインを上げます。右側のプロットの応答が変化することに注意してください。変化の原因は、フィードバック ループ間の結合です。しかし、より体系的な方法は、まず、外側のループが開いている状態で内側のフィードバック ループ q を設計するというものです。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdairframectrldes/bodeeditordlg.png" alt=""> </p><p>内側のループを設計する際に外側のループ (az) の影響を除去するには、以下の手順に従います。</p><p><b>手順 1</b> SISO 設計作業ノードから <b></b>[アーキテクチャ] パネルを選択し、<b></b>[ループの設定...] ボタンをクリックします。</p><p><b>手順 2</b> [開ループの設定] ダイアログで<tt>Open Loop at outport 1 of scdairframe/q Control/q Gain</tt> の [開ループの設定] をオンにします。これにより、モデル内でフィードバック ループを開くための可能な位置のリストが表示されます。ループ間の現在の結合を確認するには、<b></b>[フィードバック ループを強調] ボタンをクリックします。これにより、現在のフィードバック ループ内のブロックが強調表示されます。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdairframectrldes/highlightloop_initial.png" alt=""> </p><p>フィードバック ループを開くには、リストからブロック出力を選択します。この例では、外側の加速度ループの影響をなくすために、<tt>scdairframe/az Control/az DTF</tt> を選択します。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdairframectrldes/openloopdlg.png" alt=""> </p><p><b></b>[フィードバック ループを強調] ボタンをクリックします。これにより、内側のフィードバック ループのみが強調表示され、外側のループは強調表示されません。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdairframectrldes/highlightloop.png" alt=""> </p><p><b>手順 3</b> グラフィカル エディターに戻り、外側の加速度ループのゲインを変更します。内側のフィードバック ループの応答は変化しません。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdairframectrldes/bodeeditordlg.png" alt=""> </p><p>これで、外側のループの影響がない、内側のループの設計を完了できます。また、内側のループの影響を考慮しながら同時に、外側のループを設計することもできます。</p><h2>設計の完了<a name="39"></a></h2><p>SISO 設計作業には、制御システムを調整する 4 つの方法が含まれています。</p><div><ul><li><b></b>[補償器エディター] パネルを使用して、各補償器のパラメーターを手動で調整する。<a href="scdcompeditorpad.html">補償器エディターでの Simulink ブロックの調整</a>のデモを参照してください。</li><li><b></b>[グラフィカルな調整] パネルで設計プロットを設定し、根軌跡、開/閉ループ ボード線図、およびニコルス線図を使用して補償器の極、零点、およびゲインを設計する。</li><li><b></b>[自動調整] パネルの <b></b>[最適化ベースの調整] オプションを使用して (Simulink&reg; Design Optimization™ が必要)、時間領域と周波数領域の両方の設計要件に基づいて補償器を調整する。<a href="../../../sldo/sldodemos/optim/html/airframe_demopad.html">Airframe Controller Tuning</a> のデモを参照してください。</li><li><b></b>[自動調整] パネルの <b></b>[PID 調整]、<b></b>[IMC 調整]、および <b></b>[LQG 合成] の各オプションを使用して、閉ループ時定数などの調整パラメーターに基づいて補償器の初期パラメーターを計算する。</li></ul></div><h2>完了した設計<a name="41"></a></h2><p>以下のコントローラー パラメーターを使用して、設計要件を満たすことができます。</p><div><ul><li><tt>scdairframectrl/q Control/q Gain</tt>:</li></ul></div><pre>         K_q = 2.7717622</pre><div><ul><li><tt>scdairframectrl/az Control/az Gain</tt></li></ul></div><pre>         K_az = 0.00027507</pre><div><ul><li><tt>scdairframectrl/az Control/az DTF</tt></li></ul></div><pre>         Numerator = [100.109745 -99.109745]</pre><pre>         Denominator = [1 -0.88893]</pre><p>閉ループ システムの応答は以下のとおりです。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdairframectrldes/analysisresp.png" alt=""> </p><h2>Simulink への設計の書き込み<a name="51"></a></h2><p>次に、<b></b>[Simulink ブロック パラメーターの更新] ボタンをクリックすると、この設計を非線形モデルに対してテストできます。これにより、パラメーターが Simulink モデルに書き込まれます。</p><pre class="codeinput">bdclose(<span class="string">'scdairframectrl'</span>)
</pre><p class="footer">Copyright 2005-2009 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Cascaded Multi-Loop/Multi-Compensator Feedback Design % % Copyright 2005-2009 The MathWorks, Inc. % $Revision: 1.1.4.9.2.1 $ $Date: 2010/07/29 21:29:21 $  %% Opening the Model % Take a few moments to explore the model.  %% % <matlab:open_system('scdairframectrl') Open the airframe model> open_system('scdairframectrl'); %% %% Design Overview % This demonstration introduces the process of designing two cascaded % feedback loops so that the acceleration component (az) tracks reference % signals with a maximum rise time of 0.5 seconds. The feedback loop % structure in this example uses the body rate (q) as an inner feedback % loop and the acceleration (az) as an outer feedback signal. %% % The two feedback controllers being tuned are: %% % * |scdairframectrl/q Control| - A discrete time integrator and % a gain block |q Gain| stabilize this inner loop. open_system('scdairframectrl/q Control') %% % * |scdairframectrl/az Control| - A discrete time integrator, a discrete % transfer function, and a gain block |az Gain| stabilize the % outer loop. open_system('scdairframectrl/az Control')  %% Decoupling Loops in a Multi-Loop Design % The typical design procedure for cascaded feedback systems is to first % design an inner loop and then an outer loop.  In a Simulink(R) Compensator % Design Task it is possible to design both loops simultaneously; by % default, when designing a multi-loop feedback system the coupling effects % between loops are taken into account. However, when designing two % feedback loops simultaneously it might be necessary to remove the effect % of an outer loop when tuning an inner loop. In this example the design of % the inner feedback loop (q) should be performed with the effect of the % outer loop removed (az).  The example demonstrates how to decouple % feedback loops in a Simulink Compensator Design Task.  %% Creating a SISO Design Task % In this example a Simulink Compensator Design Task will be used to % create a SISO Design Task to tune the compensators in the feedback system. % There are two alternatives for creating the SISO Design Task: %%  % * Launch a preconfigured Simulink(R) Control Design(TM) task by double clicking % on the subsystem in the lower left hand corner of the model. % * Work through the following procedure to create the SISO Design % Task. % %% Starting a New Design % *Step 1* Start a new Simulink Compensator Design Task for the model % |scdairframectrl.mdl| by choosing *Tools -> Control Design -> Compensator % Design* from the Simulink model. %%  % *Step 2* Select the following blocks to tune: %%  % * |scdairframectrl/q Control/q Gain| % * |scdairframectrl/az Control/az Gain| % * |scdairframectrl/az Control/az DTF| %%  % *Step 3* Select the closed loop signals: %% % * Input: |scdairframectrl/Step az| - output port 1  % * Output: |scdairframectrl/Airframe Model| - output port 1 %% % <<../html_extra/scdairframectrldes/closedloopsignals.png>>  %% % *Step 4* Click the *Tune Blocks...* button to launch the Design % Configuration Wizard.   %%  % Simulink Control Design automatically recognizes 3 potential feedback % loops for open-loop design: %% % * Open Loop at outport 1 of |scdairframectrl/az Control/az DTF| % * Open Loop at outport 1 of |scdairframectrl/az Control/az Gain| % * Open Loop at outport 1 of |scdairframectrl/q Control/q Gain| %% % In step 1 of the wizard select the loops to tune: %% % * Plot 1: Loop to Tune - Open Loop at outport 1 of |scdairframectrl/az % Control/az DTF|, Plot Type - Open-Loop Bode % * Plot 2: Loop to Tune - Open Loop at outport 1 of |scdairframectrl/q % Control/q Gain|, Plot Type - Open-Loop Bode %% % <<../html_extra/scdairframectrldes/selectloopstep.png>>  %% % In step 2 of the wizard select Step response for Plot 1 and add the % |Closed Loop from scdairframectrl/Step az to scdairframe/Ariframe Model % (pt 1)| to this plot to view the closed loop response of the feedback % system. %% % <<../html_extra/scdairframectrldes/selectanalysisstep.png>> %% % After completing the wizard a SISO Design Task node is created.  Use this % task node to complete the design.  %% Removing the Effect of an Outer Feedback Loop % The SISO Design Task is ready to simultaneously design the feedback % loops. In the Bode editors (see the image below) click on the left hand % plot (outer feedback loop, az) and increase the gain of the feedback % loop.  Note that the response of the right hand plot changes.  This is a % result of the coupling between the feedback loops.  However, a more % systematic approach is to first design the inner feedback loop, q with % the outer loop open.   %% % <<../html_extra/scdairframectrldes/bodeeditordlg.png>>  %%  % To remove the effect of the outer loop (az) when designing the inner % loop: %%  % *Step 1* From the SISO Design Task node select the *Architecture* panel and % click the *Configure Loops...* button. %% % *Step 2* In the Open-Loop Configuration dialog select the Open-Loop % configuration for: |Open Loop at outport 1 of scdairframe/q Control/q % Gain|.  This displays a list of possible locations to open feedback loops % in the model.  To see the current coupling between the loops click on the % *Highlight feedback loop* button.  This will highlight blocks in the % current feedback loop.  %% % <<../html_extra/scdairframectrldes/highlightloop_initial.png>> %% % To open a feedback loop, select a block output from the list.  For this % example, to remove the effect of the outer acceleration loop, select % |scdairframe/az Control/az DTF|. %% % <<../html_extra/scdairframectrldes/openloopdlg.png>> %% % Click on the *Highlight feedback loop* button.  This now highlights only the % inner feedback loop; the outer loop is not included. %% % <<../html_extra/scdairframectrldes/highlightloop.png>>  %%  % *Step 3* Return to the graphical editor and change the gain of the outer % acceleration loop.  The response of the inner feedback loop does not % change. %% % <<../html_extra/scdairframectrldes/bodeeditordlg.png>>  %%  % You can now complete the design of the inner loop without the effect of % the outer loop and simultaneously design the outer loop while taking % the effect of the inner loop into account.  %% Completing the Design % The SISO Design Task contains 4 methods to tune a control system: %% % * Use the *Compensator Editor* panel to manually tune the parameters of each % compensator.  See the demo <scdcompeditorpad.html "Tuning Simulink Blocks % in the Compensator Editor">. % * Configure Design Plots in the *Graphical Tuning* panel and the them to % design the poles, zeros, and gains of the compensators using Root % Locus, Open/Closed-Loop Bode Plots, and Nichols plots. % * Use the *Optimization based tuning* option in the *Automated Tuning* % panel (requires Simulink(R) Design Optimization(TM)) to tune the compensators using % both time and frequency domain design requirements.  See the demo % <../../../sldo/sldodemos/optim/html/airframe_demopad.html "Airframe % Controller Tuning">. % * Use the *PID tuning*, *IMC tuning*, and *LQG synthesis* options in the *Automated % Tuning* panel to compute initial parameters for the compensators based on % tuning parameters such as closed-loop time constants.  %% Completed Design % The design requirements can be met with the following controller % parameters  %% % * |scdairframectrl/q Control/q Gain|: %% %           K_q = 2.7717622 %% % * |scdairframectrl/az Control/az Gain| %% %           K_az = 0.00027507 %% % * |scdairframectrl/az Control/az DTF| %% %           Numerator = [100.109745 -99.109745] %% %           Denominator = [1 -0.88893] %% % The response of the closed loop system is shown below: %% % <<../html_extra/scdairframectrldes/analysisresp.png>>  %% Writing the Design to Simulink % You can then test the design on the nonlinear model by clicking the % *Update Simulink Block Parameters* button.  This writes the parameters back to % the Simulink model.  bdclose('scdairframectrl') displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>