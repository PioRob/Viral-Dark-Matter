
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Linearization of Models with Model References</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-06-30"><meta name="DC.source" content="scdmdlrefpad.m"><link rel="stylesheet" type="text/css" href="../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit scdmdlrefpad">Open scdmdlrefpad.m in the Editor</a></div><div class="right"><a href="matlab:echodemo scdmdlrefpad">Run in the Command Window</a></div></div><div class="content"><h1>Linearization of Models with Model References</h1><!--introduction--><p>This demonstration illustrates the features available in Simulink&reg; Control Design&#8482; for linearizing models containing references to other models with a Model block.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Linear Analysis</a></li></ul></div><h2>Linear Analysis<a name="1"></a></h2><p>The model <tt>scdspeed_ctrlloop</tt> is a componentized version of the model <tt>scdspeedctrl</tt>. In this model, the engine speed model is a component represented in the model <tt>scdspeed_plantref</tt> which is referenced using a model reference block.  To open the engine model, type</p><pre class="codeinput">topmdl = <span class="string">'scdspeed_ctrlloop'</span>;
open_system(topmdl);
</pre><img vspace="5" hspace="5" src="scdmdlrefpad_01.png" alt=""> <p>Initially, the reference is set to run its simulation in accelerator mode.  The accelerator simulation mode is indicated by the black triangles on the corners of the model block <tt>scdspeed_ctrlloop/Engine Model</tt>.</p><p>By default, Engine Model reference block is set to accelerator simulation mode, as indicated by the block triangles on the block.  Linearizing the model with this block set to accelerator simulation mode numerically perturbs the entire Engine Model block.  The accuracy of this linearization is very sensitive to the blocks within the Engine model. In particular, the variable transport delay block is very problematic.</p><p>To achieve an accurate linearization, set the model reference block to normal simulation mode to allow the block-by-block linearization of the referenced model by typing</p><pre class="codeinput">set_param(<span class="string">'scdspeed_ctrlloop/Engine Model'</span>,<span class="string">'SimulationMode'</span>,<span class="string">'Normal'</span>)
</pre><p>Notice that the corners of the model block are now white triangles indicating that its simulation mode is set to normal, as showing in the following figure.</p><p><img vspace="5" hspace="5" src="../html_extra/scdmdlrefpad/normalmodeimage.png" alt=""> </p><p>Linearize the model between the speed reference and the speed output and plot the resulting step response by typing</p><pre class="codeinput">io(1) = linio(<span class="string">'scdspeed_ctrlloop/Speed Reference'</span>,1,<span class="string">'in'</span>);
io(2) = linio(<span class="string">'scdspeed_ctrlloop/Speed Output'</span>,1,<span class="string">'out'</span>);
sys_normal = linearize(topmdl,io);
step(sys_normal);
</pre><img vspace="5" hspace="5" src="scdmdlrefpad_02.png" alt=""> <p>Close the Simulink model.</p><pre class="codeinput">bdclose(<span class="string">'scdspeed_ctrlloop'</span>);
</pre><p>Another benefit of switching the model reference to normal mode simulation is that you can take advantage of the exact delay representations.</p><p>For more information on linearizing models with delays see the demonstration <a href="scddelaypad.html">"Linearizing Models with Delays"</a>.</p><p class="footer">Copyright 2007 The MathWorks, Inc.<br>
          Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!--
##### SOURCE BEGIN #####
%% Linearization of Models with Model References
% This demonstration illustrates the features available in Simulink(R)
% Control Design(TM) for linearizing models containing references to other
% models with a Model block.  
% Copyright 2007 The MathWorks, Inc.
% $Revision: 1.1.8.5 $ $Date: 2009/11/09 16:35:41 $
%

%% Linear Analysis
% The model |scdspeed_ctrlloop| is a componentized version of the model
% |scdspeedctrl|. In this model, the engine speed model is a component
% represented in the model |scdspeed_plantref| which is referenced using a 
% model reference block.  To open the engine model, type
topmdl = 'scdspeed_ctrlloop';
open_system(topmdl);

%% 
% Initially, the reference is set to run its simulation in accelerator
% mode.  The accelerator simulation mode is indicated by the black
% triangles on the corners of the model block |scdspeed_ctrlloop/Engine
% Model|.

%%
% By default, Engine Model reference block is set to accelerator simulation
% mode, as indicated by the block triangles on the block.  Linearizing the
% model with this block set to accelerator simulation mode numerically
% perturbs the entire Engine Model block.  The accuracy of this
% linearization is very sensitive to the blocks within the Engine model.
% In particular, the variable transport delay block is very problematic.

%%
% To achieve an accurate linearization, set the model reference block to
% normal simulation mode to allow the block-by-block linearization of the
% referenced model by typing
set_param('scdspeed_ctrlloop/Engine Model','SimulationMode','Normal')

%%
% Notice that the corners of the model block are now white triangles
% indicating that its simulation mode is set to normal, as showing in the
% following figure.  
%%
% <<../html_extra/scdmdlrefpad/normalmodeimage.png>>

%%
% Linearize the model between the speed reference and the speed output and
% plot the resulting step response by typing
io(1) = linio('scdspeed_ctrlloop/Speed Reference',1,'in');
io(2) = linio('scdspeed_ctrlloop/Speed Output',1,'out');
sys_normal = linearize(topmdl,io);
step(sys_normal);

%%
% Close the Simulink model.
bdclose('scdspeed_ctrlloop');

%%
% Another benefit of switching the model reference to normal mode
% simulation is that you can take advantage of the exact delay
% representations.  

%% 
% For more information on linearizing models with delays see the
% demonstration <scddelaypad.html "Linearizing Models with Delays">.

displayEndOfDemoMessage(mfilename)
##### SOURCE END #####
--></body></html>