
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>サブシステムをモデル参照に変換</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="sldemo_mdlref_conversion.m"><link rel="stylesheet" type="text/css" href="../../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left">sldemo_mdlref_conversion.mdl</div><div class="right"><a href="matlab:sldemo_mdlref_conversion">このモデルを開く</a></div></div><div class="content"><h1>サブシステムをモデル参照に変換</h1><!--introduction--><p>このデモでは、モデル参照を使用するために、バスを含んでいるモデルの変換を自動化する方法を示します。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">デモの要件</a></li><li><a href="#2">デモ モデルを開く</a></li><li><a href="#3">サブシステムをモデル参照に変換</a></li><li><a href="#4">変換の実行</a></li><li><a href="#5">モデルをシミュレートしてモデルからコードを生成</a></li><li><a href="#6">モデルを閉じてワークスペースをクリア</a></li></ul></div><h2>デモの要件<a name="1"></a></h2><p>このデモの実行中、現在の作業ディレクトリにファイルが生成されます。このディレクトリにファイルを生成したくない場合は、作業ディレクトリを、適切なディレクトリに変更する必要があります。</p><h2>デモ モデルを開く<a name="2"></a></h2><p><a href="matlab:sldemo_mdlref_conversion">デモ モデルを開きます。</a> このモデルには、簡単なカウンターをモデル化する Atomic Subsystem である Bus Counter が含まれています。</p><img vspace="5" hspace="5" src="../sldemo_mdlref_conversion_01.png" alt=""> <h2>サブシステムをモデル参照に変換<a name="3"></a></h2><p><tt>Simulink.SubSystem.convertToModelReference</tt> を使用して、Atomic Subsystem をモデル参照に変換できます。このユーティリティ関数により、新しいモデルが作成され、Atomic Subsystem のコンテンツがモデルにコピーされ、ルート レベルの Inport ブロックおよび Outport ブロックとモデルのコンフィギュレーション パラメーターが再設定されることによって、Atomic Subsystem が変換されます。その後、その入力引数に基づき、Subsystem ブロックが新しいモデルを参照する Model ブロックで置き換えられるか、または、他のモデルとして、Subsystem ブロックから導かれたモデルを参照する Model ブロックを含む一時的なモデルが作成されます。詳細は、Simulink ドキュメンテーションを参照するか、</p><p><tt>&gt;&gt; help Simulink.SubSystem.convertToModelReference</tt></p><p>と MATLAB&reg; プロンプトで入力してください。</p><h2>変換の実行<a name="4"></a></h2><p>以下のコマンドを実行して Bus Counter サブシステムを Model ブロックに<a href="matlab:sldemo_mdlref_util('sldemo_mdlref_conversion','convert')">変換</a>できます。</p><pre><pre>Simulink.SubSystem.convertToModelReference(...
    'sldemo_mdlref_conversion/Bus Counter', ...
    'sldemo_bus_counter', ...
    'ReplaceSubsystem', true, ...
    'BusSaveFormat', 'Object');</pre><img vspace="5" hspace="5" src="../sldemo_mdlref_conversion_02.png" alt=""></pre><img vspace="5" hspace="5" src="../sldemo_mdlref_conversion_02.png" alt=""> <h2>モデルをシミュレートしてモデルからコードを生成<a name="5"></a></h2><p>Model ブロックを含んでいるモデルを更新およびシミュレートし、このモデルのコードを生成できます。</p><h2>モデルを閉じてワークスペースをクリア<a name="6"></a></h2><p><a href="matlab:sldemo_mdlref_util('sldemo_mdlref_conversion','exit')">モデルを閉じて変数を消去</a> (このデモの実行中にワークスペースに追加された変数) します。</p><p class="footer">Copyright 1990-2007 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Converting Subsystems to Model Reference % This demonstration shows a way to automate conversion of a  % model containing buses to use model reference.   % Copyright 1990-2007 The MathWorks, Inc. % $Revision: 1.1.4.9.2.1 $   $Date: 2010/07/29 21:29:17 $    %% Demo Requirements % During this demonstration, Simulink(R) generates files in the current  % working directory. If you do not want to generate files in this  % directory, you should change the working directory to a suitable  % directory.  %% Open the Demo Model % <matlab:sldemo_mdlref_conversion Open the demo model.> This model contains an  % atomic subsystem, Bus Counter, modeling a simple counter.  open_system('sldemo_mdlref_conversion'); sim('sldemo_mdlref_conversion');   %% Convert a Subsystem to Model Reference % You can use |Simulink.SubSystem.convertToModelReference| to convert an atomic  % subsystem to model reference. This utility function converts an atomic  % subsystem by creating a new model, copying the contents of the subsystem % into the model, and reconfiguring the root level Inport and Outport blocks % and configuration parameters of the model. Then, based on its input % arguments, it either replaces the subsystem block with a Model block that % references the new model, or it creates another, temporary model containing % a Model block that references the model derived from the subsystem block. % For more information see Simulink documentation or type: %  % |>> help Simulink.SubSystem.convertToModelReference| % % at the MATLAB(R) prompt.  %% Perform the Conversion % You can run the following command to  % <matlab:sldemo_mdlref_util('sldemo_mdlref_conversion','convert') convert>  % the Bus Counter subsystem to a Model block. % %  Simulink.SubSystem.convertToModelReference(... %      'sldemo_mdlref_conversion/Bus Counter', ... %      'sldemo_bus_counter', ... %      'ReplaceSubsystem', true, ... %      'BusSaveFormat', 'Object');      cmd = ['Simulink.SubSystem.convertToModelReference(', ...        '''sldemo_mdlref_conversion/Bus Counter'', ' ...        '''sldemo_bus_counter'', ' ...        '''ReplaceSubsystem'', true ,' ...        '''BusSaveFormat'', ''Object'')'];   evalc(cmd);  close_system('sldemo_bus_counter'); save_system('sldemo_mdlref_conversion', 'sldemo_mdlref_conversion_');    % This command creates a new model, i.e., sldemo_bus_counter.mdl, and replaces  % the subsystem block with a Model block referencing the new model. It creates  % a set of bus objects in the base workspace and saves the bus objects in  % the file sldemo_bus_counter_bus.m. You can view the bus objects by  % %  (1) viewing the bus structures in the (<matlab:buseditor>). %  (2) opening the sldemo_bus_counter_bus.m file (<matlab:edit('sldemo_bus_counter_bus')>). %  (3) opening the MATLAB workspace in the Model Explorer.    %% Simulate and Generate Code from the Model % You can update, simulate, and generate code for the  % model containing the Model block.  %% Close Models and Clear Workspace % <matlab:sldemo_mdlref_util('sldemo_mdlref_conversion','exit')  % Close the models and clear variables> added to the workspace  % during this demo.    bdclose('all'); delete('sldemo_bus_counter.mdl'); delete('sldemo_bus_counter_bus.m'); delete('sldemo_mdlref_conversion_.mdl'); clear all;  ##### SOURCE END ##### --></body></html>