
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>指定された最小値および最大値を使用した生成コードの最適化</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="rtwdemo_minmax_script.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit rtwdemo_minmax_script">エディターで rtwdemo_minmax_script.m を開く</a></div><div class="right"><a href="matlab:echodemo rtwdemo_minmax_script">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>指定された最小値および最大値を使用した生成コードの最適化</h1><!--introduction--><p>このデモでは、モデル内の信号とパラメーターに指定された最小値および最大値を生成コードの最適化に使用する方法を示します。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">概要</a></li><li><a href="#2">最小値および最大値の情報の確認</a></li><li><a href="#3">この最適化を使用しないコード生成</a></li><li><a href="#4">この最適化の有効化</a></li><li><a href="#5">この最適化を使用したコード生成</a></li></ul></div><h2>概要<a name="1"></a></h2><p>指定された最小値および最大値は通常、気温などの環境的な制限か、センサーの出力範囲などの機械的および電気的な制限を表します。</p><p>この最適化では、これらの値を使用して、たとえば式を定数にしたり、条件文の未使用分岐を削除したりすることによって、生成コードを合理化します。</p><p><b>メモ:</b> 指定された最小値および最大値の正確性と信頼性を確認する必要があります。そうでない場合、最適化によりシミュレーションで数値が一致しなくなる場合があります。</p><p>生成コードの最適化には、次の利点があります。</p><div><ul><li>ROM と RAM の消費を低減する。</li><li>実行速度が向上する。</li></ul></div><h2>最小値および最大値の情報の確認<a name="2"></a></h2><p>モデル <a href="matlab:rtwdemo_minmax">rtwdemo_minmax</a> について考えます。このモデルでは、Inport と Gain ブロックのゲイン パラメーターに最小値と最大値が指定されています。</p><pre class="codeinput">open_system(<span class="string">'rtwdemo_minmax'</span>);
</pre><img vspace="5" hspace="5" src="../rtwdemo_minmax_script_01.png" alt=""> <h2>この最適化を使用しないコード生成<a name="3"></a></h2><p>最初に、最小値と最大値を考慮せずにこのモデルのコードを生成します。</p><div><ol><li>青いボタンをダブルクリックします。</li><li>HTML コード生成レポートが開きます。</li><li>コード生成レポートの &quot;rtwdemo_minmax.c&quot; をクリックします。</li><li>生成コードは、次のようになります。</li></ol></div><pre> void rtwdemo_minmax_step(void)
 {
   if (U1 + U2 &lt;= k * U3) {
     rtY.Out1 = (U1 + U2) + U3;
   } else {
     rtY.Out1 = U1 * U2 * U3;
   }
}</pre><h2>この最適化の有効化<a name="4"></a></h2><div><ol><li>黄色のボタンをダブルクリックして [コンフィギュレーション パラメーター] ダイアログ ボックスを開きます。</li><li>ダイアログの <b>[コード生成]</b> の下の <b>[指定した最小値と最大値を使用した最適化]</b> を選択します。</li></ol></div><h2>この最適化を使用したコード生成<a name="5"></a></h2><p>このモデルでは、U1 および U2 に最小値と最大値が指定され、U1 と U2 の合計の最小値が 50 とされています。U3 の範囲と、Gain ブロック パラメーターに指定された最小値および最大値を考慮すると、Gain ブロックの最大出力値は 40 です。</p><p>したがって、Relational Operator ブロックの出力は常に false であり、Switch ブロックの出力は常に 3 つの入力の積になります。</p><p>青いボタンをダブルクリックしてコードを生成し、コード生成レポートを調べます。生成コードには、条件式が最適化され、出力が常に 3 つの入力の積であることが示されます。</p><pre> void rtwdemo_minmax_step(void)
 {
   rtY.Out1 = U1 * U2 * U3;
 }</pre><p class="footer">Copyright 2010 The MathWorks, Inc.<br> Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Optimizing Generated Code Using Specified Minimum and Maximum Values % This demo shows how the minimum and maximum values specified on signals % and parameters in a model can be used to optimize the generated code.  %   Copyright 2010 The MathWorks, Inc. %   $Revision: 1.1.2.1 $  $Date: 2010/07/29 21:29:01 $  %% Overview % The specified minimum and maximum values usually represent environmental % limits, such as temperature, or mechanical and electrical limits, such as % output ranges of sensors. % % This optimization uses these values to streamline the generated code, for % example, by reducing expressions to constants or by removing dead branches of % conditional statements. % % *NOTE:* You must ensure that the specified minimum and maximum values are % accurate and trustworthy.  Otherwise, this optimization might result in % numerical mismatch with simulation. % % The benefits of optimizing the generated code are: % % * Reducing the ROM and RAM consumption. % * Improving the execution speed.   %% Review Minimum and Maximum Information % Consider the model <matlab:rtwdemo_minmax rtwdemo_minmax>. % In this model, there are minimum and maximum values specified on Inports and % on the gain parameter of the Gain block. open_system('rtwdemo_minmax');  %% Generate Code Without This Optimization %  % First, generate code for this model without considering the min and max values: % % # Double-click the blue button.   % # An HTML Code Generation Report opens. % # In the Code Generation Report, click "rtwdemo_minmax.c". % # The generated code is: % %   void rtwdemo_minmax_step(void) %   { %     if (U1 + U2 <= k * U3) { %       rtY.Out1 = (U1 + U2) + U3; %     } else { %       rtY.Out1 = U1 * U2 * U3; %     } %   } %   %% Enable This Optimization % # Double-click the yellow button to open the Configuration Parameters %   dialog box.   % # In the dialog, under *Code generation*, select  %   *Optimize using the specified minimum and maximum values*. %  %% Generate Code With This Optimization % In the model, with the specified minimum and maximum values for U1 and U2, % the sum of U1 and U2 has a minimum value of 50.  Considering the range of U3 % and the specified minimum and maximum values for the Gain block parameter, the % maximum value of the Gain block's output is 40. % % Therefore, the output of the Relational Operator block is always false, and % the output of the Switch block is always the product of the three inputs. % % To generate code, double-click the blue button and examine the Code Generation % Report.  The generated code shows that the output is always equal to the % product of the three inputs, optimizing out the conditional statement: % %   void rtwdemo_minmax_step(void) %   { %     rtY.Out1 = U1 * U2 * U3; %   }   displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>