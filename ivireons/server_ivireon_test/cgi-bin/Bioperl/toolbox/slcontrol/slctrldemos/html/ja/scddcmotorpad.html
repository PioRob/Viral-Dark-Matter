
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>パラメーターが変化する DC モーターの基準追従</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="scddcmotorpad.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit scddcmotorpad">エディターで scddcmotorpad.m を開く</a></div><div class="right"><a href="matlab:echodemo scddcmotorpad">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>パラメーターが変化する DC モーターの基準追従</h1><!--introduction--><p>このデモでは、Simulink&reg; モデルからの制御システムのプラント変化を表す LTI モデルの配列を生成する方法を説明します。このモデルの配列は、SISO 設計ツールで使用されます。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">DC モーター モデル</a></li><li><a href="#2">モデルを開きバッチ線形化を実行</a></li><li><a href="#6">SISO 設計ツールを開く</a></li><li><a href="#8">補償器の設計</a></li><li><a href="#9">設計のエクスポートと Simulink モデルでの確認</a></li><li><a href="#10">まとめ</a></li></ul></div><h2>DC モーター モデル<a name="1"></a></h2><p>電機子制御の DC モーターでは、印加電圧 Va によってシャフトの角速度 <img src="../scddcmotorpad_eq84050.png" alt="$\omega$"> が制御されます。DC モーターの簡易モデルを下に示します。</p><p><img vspace="5" hspace="5" src="../../html_extra/scddcmotor/DCMotorImage.png" alt=""> </p><h2>モデルを開きバッチ線形化を実行<a name="2"></a></h2><p>DC モーター用の Simulink モデルを開きます。</p><pre class="codeinput">scdDCMotor
mdl = <span class="string">'scdDCMotor'</span>;
</pre><img vspace="5" hspace="5" src="../scddcmotorpad_01.png" alt=""> <p>コントローラーは、基準角速度でのステップ変化に追従することを目的としています。</p><p>この例では、以下のモーターの物理定数を使用します。</p><div><ul><li>R = 2.0 +/- 10% オーム</li><li>L = 0.5 ヘンリー</li><li>Km = 0.1 トルク定数</li><li>Kb = 0.1 逆起電力定数</li><li>Kf = 0.2;               % Nms</li><li>J = 0.02 +/- .01 kg m^2/s^2</li></ul></div><p>パラメーター R およびパラメーター J は、値範囲として指定されることに注意してください。すべての物理パラメーター値で動作する補償器を設計する場合、これらの値をサンプリングして補償器設計を実行するプラント セットを作成します。</p><p>値 R および値 J は、公称値、最小値、および最大値でサンプリングされます。</p><pre class="codeinput">R = [2,1.8,2.2];
J = [.02,.03,.01];
</pre><p>J および R のサンプル値の各組み合わせに対して、DC モーター プラントの線形化されたモデルが取得されます。これは、モデルに示されているように、入力線形化ポイントを補償器ブロックの出力に、ループ開始点のある線形化出力ポイントを負荷ブロックの出力にそれぞれ配置することで取得できます。以下のコードでは、バッチ線形化が実行され、LTI 配列 <tt>sys</tt> が返されます。</p><pre class="codeinput"><span class="comment">% Get the handle to the model workspace</span>
hws = get_param(mdl, <span class="string">'modelworkspace'</span>);

<span class="comment">% Get the linearization I/O specified in the model</span>
io = getlinio(mdl);
ct = 1;
<span class="comment">% Loop over the values of resistor parameters to create an array of plant models</span>
clear <span class="string">sys</span>
<span class="keyword">for</span> ct1 = 1:numel(J)
    <span class="keyword">for</span> ct2 = 1:numel(R)
        <span class="comment">% Write the parameters R and J to the model workspace</span>
        hws.assignin(<span class="string">'J'</span>, J(ct1));
        hws.assignin(<span class="string">'R'</span>, R(ct2));
        <span class="comment">% Linearize the model</span>
        sys(:,:,ct) = linearize(mdl,io);
        ct = ct+1;
    <span class="keyword">end</span>
<span class="keyword">end</span>
</pre><h2>SISO 設計ツールを開く<a name="6"></a></h2><p>これでプラント モデルのセットが取得できました。次は、SISO 設計ツールを使用してコントローラーを設計します。<tt>&gt;&gt; sisotool(G)</tt></p><p>SISO 設計ツールでは、以下に示すとおり、プラント上で効果を同時に表示しながら公称プラント モデル用の補償器を設計できます。根軌跡エディターには、公称モデルの根軌跡とプラント セットに関連付けられている閉ループ極の位置が表示されます。ボード線図エディターには、公称モデル応答とプラント セット応答の両方が表示されます。ステップ応答には、プラント セット内のいずれのモデルに対しても基準追従が達成できなかったことが表示されます。</p><p><img vspace="5" hspace="5" src="../../html_extra/scddcmotor/GraphicalEditor1.png" alt=""> </p><p><img vspace="5" hspace="5" src="../../html_extra/scddcmotor/AnalysisPlot1.png" alt=""> </p><h2>補償器の設計<a name="8"></a></h2><p>SISO 設計ツール内のツールを使用すると、次の補償器を基準追従用に設計できます。</p><p><img src="../scddcmotorpad_eq49869.png" alt="$$ C(s) = 2.5 \frac{(s+2.1)}{s} $$"></p><p>結果の設計を以下に示します。閉ループ ステップ応答によって示されているとおり、基準追従の目的は、プラント セット内で定義されているすべてのモデルに対して定常偏差をゼロにすることにあります。ただし、ゼロ パーセント オーバーショット要件が必要な場合、すべての応答がこの要件を満たすわけではないことがわかります。</p><p><img vspace="5" hspace="5" src="../../html_extra/scddcmotor/GraphicalEditor2.png" alt=""> </p><p><img vspace="5" hspace="5" src="../../html_extra/scddcmotor/AnalysisPlot2.png" alt=""> </p><h2>設計のエクスポートと Simulink モデルでの確認<a name="9"></a></h2><p>Simulink モデルで設計を確認するために、エクスポート ダイアログを使用してコントローラーをエクスポートできます。エクスポート ダイアログは、Control and Estimation Tools Manager で [ファイル] の [エクスポート] のメニュー項目を使用すると表示されます。コントローラーの値は、以下のコマンドを使用してモデル内に設定できます。</p><p><tt>&gt;&gt; [Cnum,Cden] = tfdata(C,'v');</tt></p><p><tt>&gt;&gt; hws.assignin('Cnum',Cnum)</tt></p><p><tt>&gt;&gt; hws.assignin('Cden',Cden)</tt></p><h2>まとめ<a name="10"></a></h2><p>このデモでは、バッチ線形化を使用して、LTI 配列としてプラント変化のモデルを作成しました。次に SISO 設計ツールを使用して、補償器を設計し、このプラントのセットに対して補償器の性能を分析しました。SISO 設計ツールのマルチモデル機能の使用についての詳細は、デモ<a href="../../../control/ctrldemos/html/MultiModelPlantdemo.html">プラント モデル セットのための補償器設計</a>を参照してください。</p><p>モデルを閉じます。</p><pre class="codeinput">bdclose(<span class="string">'scdDCMotor'</span>);
</pre><p class="footer">Copyright 2009-2010 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Reference Tracking of a DC Motor with Parameter Variations % Copyright 2009-2010 The MathWorks, Inc. % $Revision: 1.1.2.1 $ $Date: 2010/07/29 21:29:23 $ % % This demo illustrates how to generate an array of LTI models representing % the plant variations of a control system from a Simulink(R) model. This % array of models will be used in the SISO Design Tool.   %% DC Motor Model % In armature-controlled DC motors, the applied voltage Va controls the % angular velocity $\omega$ of the shaft. A simplified model of the DC % motor is shown below. % % <<../html_extra/scddcmotor/DCMotorImage.png>>    %% Open the Model and Perform Batch Linearization % Open the Simulink model for the DC motor. scdDCMotor mdl = 'scdDCMotor';  %% % The goal of the controller is to provide tracking to step changes in % reference angular velocity. %  % For this example, the physical constants for the motor are: % % * R = 2.0 +/- 10% Ohms % * L = 0.5 Henrys % * Km = 0.1 Torque constant % * Kb = 0.1 Back emf constant % * Kf = 0.2  Nms % * J = 0.02 +/- .01 kg m^2/s^2 % % Note that the parameters R and J are specified as a range of values. In % an attempt to design a compensator which will work for all physical % parameter values we will create a plant set by sampling these values to % perform the compensator design.  %%  % The values of R and J will be sampled at their nominal, min and max values. R = [2,1.8,2.2]; J = [.02,.03,.01];  %% % For each combination of the sample values of J and R a linearized model % of the DC Motor plant is obtained. This is done by placing a input % linearization point at the output of the compensator block and a % linearization output point with loop opening at the output of the load % block as shown in the model. The following code will perform a batch % linearization and return the LTI array |sys|.  % Get the handle to the model workspace hws = get_param(mdl, 'modelworkspace');  % Get the linearization I/O specified in the model io = getlinio(mdl); ct = 1; % Loop over the values of resistor parameters to create an array of plant models clear sys for ct1 = 1:numel(J)     for ct2 = 1:numel(R)         % Write the parameters R and J to the model workspace         hws.assignin('J', J(ct1));         hws.assignin('R', R(ct2));         % Linearize the model         sys(:,:,ct) = linearize(mdl,io);         ct = ct+1;     end end  %% Open the SISO Design Tool % Now that we have a set of plant models we can utilize the SISO Design % Tool to design a controller. % |>> sisotool(G)|  %% % The SISO Design Tool allows you to design a compensator for the nominal % plant model while simultaneously visualizing the effect on the plant set % as shown below. The root locus editor displays the root locus for the % nominal model and the closed loop pole locations associated with the % plant set. The Bode editor displays both the nominal model response and % the plant set responses. The step responses show that reference tracking % is not achieved for any of the models in the plant set. % % <<../html_extra/scddcmotor/GraphicalEditor1.png>> % % <<../html_extra/scddcmotor/AnalysisPlot1.png>>   %% Design Compensator % Using the tools in the SISO Design Tool the following compensator is % designed for reference tracking. % % $$ C(s) = 2.5 \frac{(s+2.1)}{s} $$ % % The resulting design is shown below. As shown by the closed loop step % response, the goal of reference tracking was achieved with zero steady % state error for all models defined in the plant set. However, if a zero % percent overshoot requirement was necessary, you can see that not all % responses would satisfy this requirement. % % <<../html_extra/scddcmotor/GraphicalEditor2.png>> % % <<../html_extra/scddcmotor/AnalysisPlot2.png>>   %% Export Design and Validate in Simulink Model % To validate the design in the Simulink model, the controller can be % exported using the export dialog. The export dialog is opened using the % File:Export menu item on the Control and Estimation Tools Manager. The % values of the controller can be set in the model with the following % commands % % |>> [Cnum,Cden] = tfdata(C,'v');| % % |>> hws.assignin('Cnum',Cnum)| % % |>> hws.assignin('Cden',Cden)|   %% Summary % In this demo we were able to use batch linearizations to model the plant % variations as an LTI array. The SISO Design Tool was then used to design % a compensator and analyze its performance for this set of plants. For % additional information on using the multimodel features of the SISO % Design Tool see  % Demo: <../../../control/ctrldemos/html/MultiModelPlantdemo.html "Compensator Design for a Set of Plant Models">.   %% % Close the model: bdclose('scdDCMotor'); displayEndOfDemoMessage(mfilename)        ##### SOURCE END ##### --></body></html>