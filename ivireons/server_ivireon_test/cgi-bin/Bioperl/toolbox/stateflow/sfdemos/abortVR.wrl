#VRML V2.0 utf8

WorldInfo {
 title "Launch Abort - VR"
 info [
		"Copyright 2007-2009 HUMUSOFT s.r.o. and The MathWorks, Inc.",
		"$Revision: 1.1.8.2 $",
		"$Date: 2009/05/14 18:04:43 $",
		"$Author: batserve $"
	]
}

NavigationInfo {
	type [ "EXAMINE" ]
	headlight	TRUE
 speed 10
	visibilityLimit	70000
	avatarSize [0.5 0.5 0.1]
}

PointLight {
	ambientIntensity	1
	color	1 1 1
	location	0 2000 0
	on	TRUE
}

Inline {
	url	"10kwater_sky3.wrl"
}

PROTO Marker [ 
 exposedField SFVec3f MarkerTranslation 0 0 0
 exposedField SFColor MarkerColor 1 0 0
 exposedField SFVec3f MarkerScale 1 1 1
]
{
 Transform {
  translation IS MarkerTranslation
  rotation 1 0 0 1.5708
  scale IS MarkerScale
  children Shape {
   appearance Appearance {
    material Material {
     diffuseColor IS MarkerColor
     transparency 0.5
    }
   }
   geometry IndexedFaceSet {
    coord Coordinate {
     point[-0.5 0 -0.5, -0.5 0 0.5, 0.5 0 0.5, 0.5 0 -0.5, 0 0.5 0, 0 -0.5 0]
    }
    coordIndex [0 5 1 -1, 0 1 4 -1, 1 5 2 -1, 1 2 4 -1, 2 5 3 -1, 2 3 4 -1, 3 5 0 -1, 3 0 4 -1]
   }
  }
 }
}

Viewpoint {
 description "View on Trajectory"
 position -180 270 790
 orientation 0.147235 0.988555 0.0328823 -0.355597
}

Viewpoint {
 description "Launch Site"
 position 6 3.5 10
 orientation 0 1 0 0.7
}

DEF RTLS Transform {
 translation 0 0.3 100
 children [
  Shape {
   appearance Appearance {
    texture ImageTexture { 
     url "runway.jpg"
    }
    textureTransform TextureTransform {
     scale 1 1
    }
   }

   geometry Box {
    size 50 1e-6 3
   }
  }
  Viewpoint {
   description "RTLS Runway"
   position 25 1 0
   orientation 0 1 0 1.57
  }
 ]
}

DEF DRL Transform {
 translation -202 0.3 -510
 rotation 0 1 0 1.57
 children [
  Shape {
   appearance Appearance {
    texture ImageTexture { 
     url "runway.jpg"
    }
    textureTransform TextureTransform {
     scale 1 1
    }

   }
   geometry Box {
    size 50 1e-6 3
   }
  }
  Viewpoint {
   description "DRL Runway"
   position 25 1 0
   orientation 0 1 0 1.57
  }
 ]
}

Transform {
 translation 0 -0.5 0
 children [
  Inline {
   url "launch_platform.wrl"
  }
 ]
}

DEF Shuttle Transform {
 scale 0.1 0.1 0.1
 rotation 1 0 0 -1.57
	children [
		DEF Shuttle_CS Transform {
			rotation    0 0 1  3.14591
			children [
    DEF ShuttleYaw Transform {
     children [
      DEF ShuttlePitch Transform {
       center 0 -2 0
	      children [
        Transform {
         children [
          Viewpoint {
           position 0 5 30
           description "Pilot"
           orientation 0 1 0 3.14
          }

          Viewpoint {
           position 100 3 2
           description "Chase Plane"
           orientation 0 1 0 1.8
          }

          Viewpoint {
           position 100 20 -100
           description "Follow Plane"
           orientation 0 1 0 2.8
          }

          Transform {
           translation 0 1 0
           children [
            Inline {
             url ["HL20_nogear.wrl"]
            }
           ]
          }

          DEF StageYaw Transform {
           children [
            DEF StagePitch Transform {
             translation 0 -3 0
             children [
		            DEF Nozzle Transform {
			            children [

                DEF Nozzle1 Transform {
					            translation 1.6 -1.6 0
                 rotation 1 0 0 1.5708
                 children [
                  Shape {
			                appearance Appearance {
				                material Material {
					                diffuseColor .61 .61 .61
                     specularColor .39 .39 .39
                     ambientIntensity .25
                     shininess .11
				                }
                   }
                   geometry Extrusion {
                    beginCap FALSE
                    endCap TRUE
                    ccw FALSE
                    convex TRUE
                    creaseAngle 0.5
                    solid FALSE
                    crossSection 
                    [
                     1.0000         0
                     0.9848    0.1736
                     0.9397    0.3420
                     0.8660    0.5000
                     0.7660    0.6428
                     0.6428    0.7660
                     0.5000    0.8660
                     0.3420    0.9397
                     0.1736    0.9848
                     0.0000    1.0000
                     -0.1736    0.9848
                     -0.3420    0.9397
                     -0.5000    0.8660
                     -0.6428    0.7660
                     -0.7660    0.6428
                     -0.8660    0.5000
                     -0.9397    0.3420
                     -0.9848    0.1736
                     -1.0000    0.0000
                     -0.9848   -0.1736
                     -0.9397   -0.3420
                     -0.8660   -0.5000
                     -0.7660   -0.6428
                     -0.6428   -0.7660
                     -0.5000   -0.8660
                     -0.3420   -0.9397
                     -0.1736   -0.9848
                     -0.0000   -1.0000
                     0.1736   -0.9848
                     0.3420   -0.9397
                     0.5000   -0.8660
                     0.6428   -0.7660
                     0.7660   -0.6428
                     0.8660   -0.5000
                     0.9397   -0.3420
                     0.9848   -0.1736
                     1.0000   -0.0000
                    ]

                    spine [0 0 0, 0 1.65 0, 0 2.9 0 ]
                    
                    scale [1.2 1.2, 1 1, 0.7 0.7 ] 
                    
                   }

                  }
                 ]
                }

                DEF Plume1 Transform {
                 scale 1 1 1
					            translation 1.6 -1.6 0
                 rotation 1 0 0 1.5708
                 children [
                  Shape {
			                appearance Appearance {
				                material Material {
                     emissiveColor 1 0 0.5
					                diffuseColor 1 0.8 0
				                }
                   }
                   geometry Extrusion {
                    beginCap FALSE
                    endCap TRUE
                    ccw FALSE
                    convex TRUE
                    creaseAngle 0.5
                    solid FALSE
                    crossSection 
                    [ 1.0000         0
                     0.9848    0.1736
                     0.9397    0.3420
                     0.8660    0.5000
                     0.7660    0.6428
                     0.6428    0.7660
                     0.5000    0.8660
                     0.3420    0.9397
                     0.1736    0.9848
                     0.0000    1.0000
                     -0.1736    0.9848
                     -0.3420    0.9397
                     -0.5000    0.8660
                     -0.6428    0.7660
                     -0.7660    0.6428
                     -0.8660    0.5000
                     -0.9397    0.3420
                     -0.9848    0.1736
                     -1.0000    0.0000
                     -0.9848   -0.1736
                     -0.9397   -0.3420
                     -0.8660   -0.5000
                     -0.7660   -0.6428
                     -0.6428   -0.7660
                     -0.5000   -0.8660
                     -0.3420   -0.9397
                     -0.1736   -0.9848
                     -0.0000   -1.0000
                     0.1736   -0.9848
                     0.3420   -0.9397
                     0.5000   -0.8660
                     0.6428   -0.7660
                     0.7660   -0.6428
                     0.8660   -0.5000
                     0.9397   -0.3420
                     0.9848   -0.1736
                     1.0000   -0.0000
                    ]

                    spine [0 -2.8 0, 0 0 0, 0 2.8 0 ]
                    
                    scale [0.1 0.1, 0.8 0.8, 0.7 0.7 ] 
                    
                   }

                  }
                 ]
                }
			            ]
		            }
		            Transform {
			            translation -3.2 0 0
			            children [
				            USE Nozzle
			            ]
		            }
		            Transform {
			            translation -3.2 3.2 0
			            children [
				            USE Nozzle
			            ]
		            }
		            Transform {
			            translation 0 3.2 0
			            children [
				            USE Nozzle
			            ]
		            }


              DEF MainTank Transform {
               scale 3.9 5.5 3.9
               translation 0 0 2.8
               rotation 1 0 0 1.5708
               children [
                Shape {
			              appearance Appearance {
				              material Material {
					              diffuseColor .61 .61 .61
                   specularColor .39 .39 .39
                   ambientIntensity .25
                   shininess .11
				              }
                 }
                 geometry Extrusion {
                  beginCap TRUE
                  endCap TRUE
                  ccw FALSE
                  convex TRUE
                  creaseAngle 0.5
                  solid TRUE
                  crossSection 
                  [
                   1.0000         0
                   0.9848    0.1736
                   0.9397    0.3420
                   0.8660    0.5000
                   0.7660    0.6428
                   0.6428    0.7660
                   0.5000    0.8660
                   0.3420    0.9397
                   0.1736    0.9848
                   0.0000    1.0000
                   -0.1736    0.9848
                   -0.3420    0.9397
                   -0.5000    0.8660
                   -0.6428    0.7660
                   -0.7660    0.6428
                   -0.8660    0.5000
                   -0.9397    0.3420
                   -0.9848    0.1736
                   -1.0000    0.0000
                   -0.9848   -0.1736
                   -0.9397   -0.3420
                   -0.8660   -0.5000
                   -0.7660   -0.6428
                   -0.6428   -0.7660
                   -0.5000   -0.8660
                   -0.3420   -0.9397
                   -0.1736   -0.9848
                   -0.0000   -1.0000
                   0.1736   -0.9848
                   0.3420   -0.9397
                   0.5000   -0.8660
                   0.6428   -0.7660
                   0.7660   -0.6428
                   0.8660   -0.5000
                   0.9397   -0.3420
                   0.9848   -0.1736
                   1.0000   -0.0000
                  ]

                  spine [0 0 0, 0 8 0, 0 8.8 0, 0 9.4 0, 0 9.8 0, 0 10 0 ]
                  
                  scale [1 1, 1 1, 0.95 0.95, 0.7 0.7, 0.3 0.3, 0 0 ] 
                  
                 }

                }
               ]
              }





              Transform {
               translation 0 0 30
               children [
                DEF dumpedFuel Transform {
                 scale 1 1 5
                 children [
                  Shape {
                   appearance Appearance { 
                    material Material {
                     diffuseColor 0 1 0
                     transparency 0.2
                    }
                   }
                   geometry Sphere { 
                    radius 3 
                   }
                  }
                 ]
                }
               ]
              }

             ]
            }
           ]
          }

          DEF TanksYaw Transform {
           children [
            DEF TanksPitch Transform {
             translation 0 -3 0
             children [
              DEF SideTanks Transform {
	              rotation    0 0 1  3.1415926
               children [
		              DEF Tank1 Transform {
			              children [
				              Transform {
					              translation 5.9188 -1.47572 0
					              rotation    0 0 1  6.03884
					              children [
						              DEF StrapNozzle Transform {
							              children [
								              Transform {
									              translation 0.035 -0.035 0
									              scale       0.5 0.5 0.67857
									              children [
										              USE Nozzle
									              ]
								              }
							              ]
						              }
					              ]
				              }
				              Transform {
					              translation 5.9188 -1.47572 0
					              rotation    0 0 1  6.03884
					              children [
						              Transform {
							              children [
								              Transform {
									              translation -1.74 0 0
									              children [
										              USE StrapNozzle
									              ]
								              }
								              Transform {
									              translation -1.74 1.74 0
									              children [
										              USE StrapNozzle
									              ]
								              }
								              Transform {
									              translation 0 1.74 0
									              children [
										              USE StrapNozzle
									              ]
								              }
							              ]
						              }
					              ]
				              }

                  Transform {
			                translation 5.9188 -1.47572 0
			                rotation    0 0 1  6.03884
                   children [
                    DEF SideTank1 Transform {
                     scale 2.2 1 2.2
                     translation 0 0 1.9
                     rotation 1 0 0 1.5708
                     children [
                      Shape {
			                    appearance Appearance {
				                    material Material {
					                    diffuseColor 1 1 1
				                    }
                       }
                       geometry Extrusion {
                        beginCap TRUE
                        endCap TRUE
                        ccw FALSE
                        convex TRUE
                        creaseAngle 0.5
                        solid TRUE
                        crossSection 
                        [
                         1.0000         0
                         0.9848    0.1736
                         0.9397    0.3420
                         0.8660    0.5000
                         0.7660    0.6428
                         0.6428    0.7660
                         0.5000    0.8660
                         0.3420    0.9397
                         0.1736    0.9848
                         0.0000    1.0000
                         -0.1736    0.9848
                         -0.3420    0.9397
                         -0.5000    0.8660
                         -0.6428    0.7660
                         -0.7660    0.6428
                         -0.8660    0.5000
                         -0.9397    0.3420
                         -0.9848    0.1736
                         -1.0000    0.0000
                         -0.9848   -0.1736
                         -0.9397   -0.3420
                         -0.8660   -0.5000
                         -0.7660   -0.6428
                         -0.6428   -0.7660
                         -0.5000   -0.8660
                         -0.3420   -0.9397
                         -0.1736   -0.9848
                         -0.0000   -1.0000
                         0.1736   -0.9848
                         0.3420   -0.9397
                         0.5000   -0.8660
                         0.6428   -0.7660
                         0.7660   -0.6428
                         0.8660   -0.5000
                         0.9397   -0.3420
                         0.9848   -0.1736
                         1.0000   -0.0000
                        ]
                        spine [0 0 0, 0 33.3 0, -1 39.5 0 ]
                        scale [1 1,  1 1, 0 0 ] 
                       }

                      }
                     ]
                    }
                   ]
                  }
 			             ]
		              }
		              DEF Tank2 Transform {
			              rotation 0 0 1  0.788889
			              children [
				              USE Tank1
			              ]
		              }
		              DEF Tank3 Transform {
			              rotation 0 0 1  2.85885
			              children [
				              USE Tank1
			              ]
		              }
		              DEF Tank4 Transform {
			              rotation 0 0 1  3.64774
			              children [
				              USE Tank1
			              ]
		              }
               ]
              }
             ]
            }
           ]
          }
	        ]
        }
       ]
      }
     ]
    }

    DEF Marker_Switch Switch {
     whichChoice 0
     choice [
      DEF Markers Transform {
       # Markers go here
       children [
        
       ]
      }
     ]
    }
			]
		}
	]
}

Switch {
 whichChoice 0
 choice [
  Transform { # flat land
   translation 0 -0.1 0
   children LOD {
		  level [ 
     Shape {
      appearance Appearance {
       texture ImageTexture { 
        url "flatland.jpg"
       }
       textureTransform TextureTransform {
        scale 0.3 0.3
       }
      }
      geometry Box {
       size 1000 1e-6 1000
      }
     }
     Inline {
      url "flatfaraway.wrl"
     }
    ]
		  range	[ 300 ]
		  center	0 0 0
	  }
  }
 ]
}

Viewpoint {
 description "Observer looking up"
 position 12 2 -2
 orientation 0.0212708 0.778417 -0.627386 3.07166
 fieldOfView 1.1766
}