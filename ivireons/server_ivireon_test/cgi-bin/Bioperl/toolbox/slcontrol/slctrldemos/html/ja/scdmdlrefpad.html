
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>モデル参照を含むモデルの線形化</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="scdmdlrefpad.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit scdmdlrefpad">エディターで scdmdlrefpad.m を開く</a></div><div class="right"><a href="matlab:echodemo scdmdlrefpad">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>モデル参照を含むモデルの線形化</h1><!--introduction--><p>このデモでは、Model ブロックを持つ他のモデルへの参照を含むモデルを線形化するのに使用できる Simulink&reg; Control Design™ の機能を説明します。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">線形解析</a></li></ul></div><h2>線形解析<a name="1"></a></h2><p>モデル <tt>scdspeed_ctrlloop</tt> は、モデル <tt>scdspeedctrl</tt> をカプセル化したものです。このモデルでは、エンジン スピード モデルは、モデル参照ブロックを使用して参照されるモデル <tt>scdspeed_plantref</tt> で表されるコンポーネントです。エンジン モデルを開くには、次のように入力します。</p><pre class="codeinput">topmdl = <span class="string">'scdspeed_ctrlloop'</span>;
open_system(topmdl);
</pre><img vspace="5" hspace="5" src="../scdmdlrefpad_01.png" alt=""> <p>最初に、参照は、シミュレーションをアクセラレータ モードで実行するよう設定されています。アクセラレータ モードのシミュレーションは、モデル ブロック <tt>scdspeed_ctrlloop/Engine Model</tt> の隅に黒い三角形で示されます。</p><p>既定の設定では、Engine Model 参照ブロックは、アクセラレータ モードのシミュレーションに設定され、ブロック上に黒い三角形で示されます。アクセラレータ モードのシミュレーションに設定されている、このブロックを持つモデルを線形化すると、Engine Model ブロック全体に数値的に摂動を与えます。この線形化の精度は、Engine モデル内のブロックの影響を大きく受けます。特に、可変の伝搬遅延ブロックには、大きな問題があります。</p><p>正確な線形化を実現するには、モデル参照ブロックをノーマル モードのシミュレーションに設定し、次のように入力して、参照されたモデルをブロックごとに線形化できるようにします。</p><pre class="codeinput">set_param(<span class="string">'scdspeed_ctrlloop/Engine Model'</span>,<span class="string">'SimulationMode'</span>,<span class="string">'Normal'</span>)
</pre><p>モデル ブロックの隅が白い三角形になっていることに注目してください。これは、次の図に示すように、シミュレーションがノーマル モードに設定されていることを示します。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdmdlrefpad/normalmodeimage.png" alt=""> </p><p>速度の指令値と速度の出力間のモデルを線形化し、結果のステップ応答をプロットします。次のように入力します。</p><pre class="codeinput">io(1) = linio(<span class="string">'scdspeed_ctrlloop/Speed Reference'</span>,1,<span class="string">'in'</span>);
io(2) = linio(<span class="string">'scdspeed_ctrlloop/Speed Output'</span>,1,<span class="string">'out'</span>);
sys_normal = linearize(topmdl,io);
step(sys_normal);
</pre><img vspace="5" hspace="5" src="../scdmdlrefpad_02.png" alt=""> <p>Simulink モデルを閉じます。</p><pre class="codeinput">bdclose(<span class="string">'scdspeed_ctrlloop'</span>);
</pre><p>モデル参照をノーマル モードのシミュレーションに切り替えると、正確な遅延表現を利用できるという利点もあります。</p><p>遅延を持つモデルの線形化の詳細は、<a href="scddelaypad.html">遅延を持つモデルの線形化</a>のデモを参照してください。</p><p class="footer">Copyright 2007 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Linearization of Models with Model References % This demonstration illustrates the features available in Simulink(R) % Control Design(TM) for linearizing models containing references to other % models with a Model block.   % Copyright 2007 The MathWorks, Inc. % $Revision: 1.1.4.2.2.1 $ $Date: 2010/07/29 21:29:23 $ %  %% Linear Analysis % The model |scdspeed_ctrlloop| is a componentized version of the model % |scdspeedctrl|. In this model, the engine speed model is a component % represented in the model |scdspeed_plantref| which is referenced using a  % model reference block.  To open the engine model, type topmdl = 'scdspeed_ctrlloop'; open_system(topmdl);  %%  % Initially, the reference is set to run its simulation in accelerator % mode.  The accelerator simulation mode is indicated by the black % triangles on the corners of the model block |scdspeed_ctrlloop/Engine % Model|.  %% % By default, Engine Model reference block is set to accelerator simulation % mode, as indicated by the block triangles on the block.  Linearizing the % model with this block set to accelerator simulation mode numerically % perturbs the entire Engine Model block.  The accuracy of this % linearization is very sensitive to the blocks within the Engine model. % In particular, the variable transport delay block is very problematic.  %% % To achieve an accurate linearization, set the model reference block to % normal simulation mode to allow the block-by-block linearization of the % referenced model by typing set_param('scdspeed_ctrlloop/Engine Model','SimulationMode','Normal')  %% % Notice that the corners of the model block are now white triangles % indicating that its simulation mode is set to normal, as showing in the % following figure.   %% % <<../html_extra/scdmdlrefpad/normalmodeimage.png>>  %% % Linearize the model between the speed reference and the speed output and % plot the resulting step response by typing io(1) = linio('scdspeed_ctrlloop/Speed Reference',1,'in'); io(2) = linio('scdspeed_ctrlloop/Speed Output',1,'out'); sys_normal = linearize(topmdl,io); step(sys_normal);  %% % Close the Simulink model. bdclose('scdspeed_ctrlloop');  %% % Another benefit of switching the model reference to normal mode % simulation is that you can take advantage of the exact delay % representations.    %%  % For more information on linearizing models with delays see the % demonstration <scddelaypad.html "Linearizing Models with Delays">.  displayEndOfDemoMessage(mfilename) ##### SOURCE END ##### --></body></html>