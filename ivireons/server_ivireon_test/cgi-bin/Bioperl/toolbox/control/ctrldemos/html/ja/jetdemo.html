
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>747&reg; ジェット航空機のヨー ダンパーの設計</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="jetdemo.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit jetdemo">エディターで jetdemo.m を開く</a></div><div class="right"><a href="matlab:echodemo jetdemo">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>747&reg; ジェット航空機のヨー ダンパーの設計</h1><!--introduction--><p>このデモでは、Control System Toolbox™ の古典制御設計の機能を使用して、747&reg; 航空機のヨー ダンパー (YAW DAMPER) の設計を行います。</p><!--/introduction--><p><img vspace="5" hspace="5" src="../../Figures/jetdemofigures_01.png" alt=""> </p><p>以下の飛行中の航空機の簡潔化された平衡モデル</p><p><img src="../jetdemo_eq77170.png" alt="$$ \frac{dx}{dt} = Ax + Bu $$"></p><p><img src="../jetdemo_eq02268.png" alt="$$ y = Cx + Du $$"></p><p>には次の 4 つの状態、つまり</p><pre>   beta (横すべり角)、phi (バンク角)、ヨー レート、ロール レート</pre><p>と 2 つの入力、つまり方向舵と補助翼の偏向角があります。</p><p>すべての角度と角速度の単位はそれぞれラジアンおよびラジアン/秒です。</p><p>平衡モデルの行列 A,B,C,D が与えられたとして、SS コマンドを使用して MATLAB&reg; で状態空間モデルを作成します。</p><pre class="codeinput">A=[-.0558 -.9968 .0802 .0415;
     .598 -.115 -.0318 0;
    -3.05 .388 -.4650 0;
        0 0.0805 1 0];

B=[ .00729  0;
   -0.475   0.00775;
    0.153   0.143;
     0      0];

C=[0 1 0 0;
   0 0 0 1];

D=[0 0;
   0 0];

sys = ss(A,B,C,D);
</pre><p>そして入力、出力、および状態にラベルを付けます。</p><pre class="codeinput">set(sys, <span class="string">'inputname'</span>, {<span class="string">'rudder'</span> <span class="string">'aileron'</span>},<span class="keyword">...</span>
         <span class="string">'outputname'</span>, {<span class="string">'yaw rate'</span> <span class="string">'bank angle'</span>},<span class="keyword">...</span>
         <span class="string">'statename'</span>, {<span class="string">'beta'</span> <span class="string">'yaw'</span> <span class="string">'roll'</span> <span class="string">'phi'</span>});
</pre><p>このモデルは、減衰率の小さな極を 1 組持っています。  これらはダッチ ロール モードと呼ばれるモードに相当します。  これらのモードを表示するには、次のように入力します。</p><pre class="codeinput">axis(gca,<span class="string">'normal'</span>)
h = pzplot(sys);
setoptions(h,<span class="string">'FreqUnits'</span>,<span class="string">'rad/sec'</span>,<span class="string">'Grid'</span>,<span class="string">'off'</span>);
</pre><img vspace="5" hspace="5" src="../jetdemo_01.png" alt=""> <p>右クリックして [グリッド] を選択し、減衰値と固有周波数値をプロットします。これらの 2 つの極の減衰を大きくするような補償器を設計する必要があります。</p><p>まず、開ループ解析を行って、可能な制御方式を決定します。減衰率の小さなモードが存在するかどうかは、インパルス応答を見ることで確認します。</p><pre class="codeinput">impulseplot(sys)
</pre><img vspace="5" hspace="5" src="../jetdemo_02.png" alt=""> <p>20 秒というさらに小さな時間枠での応答を確認する場合は、次のように入力することもできます。</p><pre class="codeinput">impulseplot(sys,20)
</pre><img vspace="5" hspace="5" src="../jetdemo_03.png" alt=""> <p>補助翼からバンク角 phi までのプロットを見てください。このプロットのみを表示するには、右クリックして [I/O セレクタ] を選択してから、(2,2) をクリックします。</p><p>このプロットは、非ゼロ バンク角近傍で振動している航空機を示しています。このように、航空機は補助翼へのインパルス入力に応答して方向を変えています。この動作は後で重要になります。</p><p>一般に、ヨー ダンパーは検知出力としてヨー レートを、入力として方向舵を使用して設計されます。この I/O の組の周波数応答を確認します。</p><pre class="codeinput">sys11 = sys(<span class="string">'yaw'</span>,<span class="string">'rudder'</span>);    <span class="comment">% select I/O pair</span>
h = bodeplot(sys11);
setoptions(h, <span class="string">'FreqUnits'</span>,<span class="string">'rad/sec'</span>,<span class="string">'MagUnits'</span>,<span class="string">'dB'</span>,<span class="string">'PhaseUnits'</span>,<span class="string">'deg'</span>);
</pre><img vspace="5" hspace="5" src="../jetdemo_04.png" alt=""> <p>このプロットは、減衰率の小さなダッチ ロール モード (1 rad/sec) の近傍で、方向舵がかなりの影響力を持っていることを示しています。</p><p>合理的な設計の目的は、固有周波数 Wn &lt; 1.0 rad/sec で、減衰率 zeta &gt; 0.35 を与えることです。最良で単純な補償器はゲインです。根軌跡法を使用して、適切なフィードバック ゲイン値を選択します。</p><pre class="codeinput">h = rlocusplot(sys11);
setoptions(h,<span class="string">'FreqUnits'</span>,<span class="string">'rad/sec'</span>)
</pre><img vspace="5" hspace="5" src="../jetdemo_05.png" alt=""> <p>どうやら正のフィードバックが必要なようです。</p><pre class="codeinput">h = rlocusplot(-sys11);
setoptions(h,<span class="string">'FreqUnits'</span>,<span class="string">'rad/sec'</span>)
</pre><img vspace="5" hspace="5" src="../jetdemo_06.png" alt=""> <p>このほうが良いように思われます。青い曲線をクリックし、黒い四角形を移動して、ゲイン値と減衰値を追跡します。最も達成可能な閉ループ減衰は、K=2.85 のゲインに対して約 0.45 です。</p><p>それでは、この SISO フィードバック ループを閉じて、インパルス応答を見てみましょう。</p><pre class="codeinput">k = 2.85;
cl11 = feedback(sys11,-k);
</pre><p>メモ: feedback は、既定により負のフィードバックを仮定します。</p><pre class="codeinput">impulseplot(sys11,<span class="string">'b--'</span>,cl11,<span class="string">'r'</span>)
legend(<span class="string">'open loop'</span>,<span class="string">'closed loop'</span>,4)
</pre><img vspace="5" hspace="5" src="../jetdemo_07.png" alt=""> <p>応答は良さそうです。</p><p>ここで、完全な MIMO モデルのループを閉じて、補助翼からの応答がどのようになるかを確認します。フィードバック ループには、プラントの入力 1 と出力 1 が含まれます。</p><pre class="codeinput">cloop = feedback(sys,-k,1,1);
impulseplot(sys,<span class="string">'b--'</span>,cloop,<span class="string">'r'</span>,20)           <span class="comment">% MIMO impulse response</span>
</pre><img vspace="5" hspace="5" src="../jetdemo_08.png" alt=""> <p>ヨー レート応答はよく減衰しています。</p><p>ただし、補助翼を移動すると、システムは通常の航空機のようにバンクしなくなります。これは次で示されます。</p><pre class="codeinput">impulseplot(cloop(<span class="string">'bank angle'</span>,<span class="string">'aileron'</span>),<span class="string">'r'</span>,18)
</pre><img vspace="5" hspace="5" src="../jetdemo_09.png" alt=""> <p>これは、スパイラル モードを過度に安定化したことになります。通常、スパイラル モードは非常に遅いので、補助翼の入力が継続的に得られなくても、機体をバンクさせながら方向転換できます。パイロットはこのような動作に慣れているので、このような通常の操作ができない設計は好みません。</p><p>ループを閉じたときに、スパイラル モードが左半面でさらに左側に移らないようにする必要があります。飛行制御設計者がこの問題に対処した 1 つの方法は、washout フィルターを使用することです。</p><p>Washout フィルター: </p><p><img src="../jetdemo_eq21356.png" alt="$$ H(s) = \frac{ks}{s+a} $$"></p><p>SISO 設計ツール (ヘルプ sisotool) を使用すると、パラメーター k および a をグラフィカルに調整して最適な組み合わせを見つけることができます。このデモでは、a = 0.2、つまり 5 秒の時定数を選択します。</p><p>a=0.2 および k=1 に対する washout フィルターを作成します。</p><pre class="codeinput">H = zpk(0,-0.2,1);
</pre><p>washout を直列で設計モデルに接続し、根軌跡法を使用してフィルターのゲイン k を決定します。</p><pre class="codeinput">oloop = H * (-sys11);          <span class="comment">% open loop'</span>
h = rlocusplot(oloop);
setoptions(h,<span class="string">'FreqUnits'</span>,<span class="string">'rad/sec'</span>)
sgrid
</pre><img vspace="5" hspace="5" src="../jetdemo_10.png" alt=""> <p>最適な減衰は k=2.34 に対して約 zeta = 0.305 となりました。MIMO モデルのループを閉じて、インパルス応答を確認します。</p><pre class="codeinput">k = 2.34;
wof = -k * H;            <span class="comment">% washout compensator</span>
cloop = feedback(sys,wof,1,1);
impulseplot(sys,<span class="string">'b--'</span>,cloop,<span class="string">'r'</span>,20)
</pre><img vspace="5" hspace="5" src="../jetdemo_11.png" alt=""> <p>washout フィルターは、通常のバンクおよび方向転換動作も復元しました。これは補助翼からバンク角へのインパルス応答を見ることで確認できます。</p><pre class="codeinput">impulseplot(sys(2,2),<span class="string">'b--'</span>,cloop(2,2),<span class="string">'r'</span>,20)
legend(<span class="string">'open loop'</span>,<span class="string">'closed loop'</span>,4)
</pre><img vspace="5" hspace="5" src="../jetdemo_12.png" alt=""> <p>仕様は完全に満たされていませんが、この設計では減衰を大幅に増加させる一方で、パイロットは航空機を通常どおりに操縦できます。</p><p class="footer">Copyright 1986-2009 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Yaw Damper Design for a 747(R) Jet Aircraft % This demo steps through the design of a YAW DAMPER for a  % 747(R) aircraft using the classical control design features  % in Control System Toolbox(TM).  %   Copyright 1986-2009 The MathWorks, Inc.  %   $Revision: 1.1.4.2.2.1 $  $Date: 2010/07/29 21:28:40 $  %% % <<../Figures/jetdemofigures_01.png>>  %% % A simplified trim model of the aircraft during cruise flight  % % $$ \frac{dx}{dt} = Ax + Bu $$ % % $$ y = Cx + Du $$ % % has four states: % %     beta (sideslip angle), phi (bank angle), yaw rate, roll rate % % and two inputs:  %     the rudder and aileron deflections.  % % All angles and angular velocities are in radians and radians/sec.  %% % Given the matrices A,B,C,D of the trim model, use the SS command to % create the state-space model in MATLAB(R): % A=[-.0558 -.9968 .0802 .0415;      .598 -.115 -.0318 0;     -3.05 .388 -.4650 0;         0 0.0805 1 0];  B=[ .00729  0;    -0.475   0.00775;     0.153   0.143;      0      0];  C=[0 1 0 0;    0 0 0 1];  D=[0 0;    0 0];  sys = ss(A,B,C,D);  %% % and label the inputs, outputs, and states: set(sys, 'inputname', {'rudder' 'aileron'},...          'outputname', {'yaw rate' 'bank angle'},...          'statename', {'beta' 'yaw' 'roll' 'phi'});       %% % This model has a pair of lightly damped poles.  They correspond to what % is called the Dutch roll mode.  To see these modes, type % axis(gca,'normal') h = pzplot(sys); setoptions(h,'FreqUnits','rad/sec','Grid','off'); %% % Right-click and select "Grid" to plot the damping and natural frequency % values.  You need to design a compensator that increases the damping of % these two poles.  %% % Start with some open loop analysis to determine possible control' % strategies.  The presence of lightly damped modes is confirmed by ' % looking at the impulse response:' % impulseplot(sys)  %% % To inspect the response over a smaller time frame of 20 seconds, you % could also type % impulseplot(sys,20)       %% % Look at the plot from aileron to bank angle phi.  To show only this plot, % right-click and choose "I/O Selector", then click on the (2,2) entry. % % This plot shows the aircraft oscillating around a non-zero bank angle. % Thus the aircraft turns in response to an aileron impulse.  This behavior % will be important later.       %% % Typically yaw dampers are designed using yaw rate as the sensed output % and rudder as the input.  Inspect the frequency response for this I/O % pair: % sys11 = sys('yaw','rudder');    % select I/O pair h = bodeplot(sys11); setoptions(h, 'FreqUnits','rad/sec','MagUnits','dB','PhaseUnits','deg');   %% % This plot shows that the rudder has a lot of authority around the lightly % damped Dutch roll mode (1 rad/sec).     %% % A reasonable design objective is to provide a damping ratio zeta > 0.35, % with natural frequency Wn < 1.0 rad/sec.  The simplest compensator is a  % gain.  Use the root locus technique to select an adequate feedback gain  % value: % h = rlocusplot(sys11); setoptions(h,'FreqUnits','rad/sec')       %% % Oops, looks like we need positive feedback! % h = rlocusplot(-sys11); setoptions(h,'FreqUnits','rad/sec')  %% % This looks better.  Click on the blue curve and move the black square to % track the gain and damping values.  The best achievable closed-loop % damping is about 0.45 for a gain of K=2.85.  %% % Now close this SISO feedback loop and look at the impulse response % k = 2.85; cl11 = feedback(sys11,-k);  %% % Note: feedback assumes negative feedback by default  impulseplot(sys11,'bREPLACE_WITH_DASH_DASH',cl11,'r') legend('open loop','closed loop',4)  %% % The response looks pretty good.       %% % Now close the loop around the full MIMO model and see how the response % from the aileron looks.  The feedback loop involves input 1 and output 1 % of the plant: % cloop = feedback(sys,-k,1,1); impulseplot(sys,'bREPLACE_WITH_DASH_DASH',cloop,'r',20)           % MIMO impulse response  %% % The yaw rate response is now well damped.        %% % When moving the aileron, however, the system no longer continues to bank % like a normal aircraft, as seen from % impulseplot(cloop('bank angle','aileron'),'r',18)  %% % You have over-stabilized the spiral mode.  The spiral mode is typically a % very slow mode that allows the aircraft to bank and turn without constant % aileron input.  Pilots are used to this behavior and will not like a % design that does not fly normally.        %% % You need to make sure that the spiral mode doesn't move farther into the % left-half plane when we close the loop.  One way flight control designers % have fixed this problem is by using a washout filter. % % Washout Filter: % % $$ H(s) = \frac{ks}{s+a} $$ % % Using the SISO Design Tool (help sisotool), you can graphically tune the % parameters k and a to find the best combination.  In this demo we choose % a = 0.2 or a time constant of 5 seconds.    %% % Form the washout filter for a=0.2 and k=1 % H = zpk(0,-0.2,1);  %% % connect the washout in series with your design model, and use the root % locus to determine the filter gain k:   oloop = H * (-sys11);          % open loop' h = rlocusplot(oloop); setoptions(h, 'FreqUnits','rad/sec') sgrid        %% % The best damping is now about zeta = 0.305 for k=2.34.  Close the loop % with the MIMO model and check the impulse response: k = 2.34; wof = -k * H;            % washout compensator cloop = feedback(sys,wof,1,1); impulseplot(sys,'bREPLACE_WITH_DASH_DASH',cloop,'r',20)       %% % The washout filter has also restored the normal bank-and-turn behavior % as seen by looking at the impulse response from aileron to bank angle.  impulseplot(sys(2,2),'bREPLACE_WITH_DASH_DASH',cloop(2,2),'r',20) legend('open loop','closed loop',4)  %% % Although it doesn't quite meet the requirements, this design % substantially increases the damping while allowing the pilot to fly the % aircraft normally.   displayEndOfDemoMessage(mfilename) ##### SOURCE END ##### --></body></html>