
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>PolySpace Verification with MISRA C Checking</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-06-30"><meta name="DC.source" content="rtwdemo_polyspace.m"><link rel="stylesheet" type="text/css" href="../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit rtwdemo_polyspace">Open rtwdemo_polyspace.m in the Editor</a></div><div class="right"><a href="matlab:echodemo rtwdemo_polyspace">Run in the Command Window</a></div></div><div class="content"><h1>PolySpace Verification with MISRA C Checking</h1><!--introduction--><p>The embedded software design process is manual and error prone. Design flaws can appear during model update, simulation, or even later during embedded software testing with processor-in-loop (PIL) verification. One category of design flaws is difficult to detect using only model updates and simulations: run-time errors.</p><p>Elimination of run-time errors is important for all software but especially for software that must meet safety standards such as MISRA-C:2004, which prohibits run-time errors in rule 21.2. Examples of run-time errors include fixed-point or integer overflow, division by zero, memory corruption, and out-of-bounds array accesses. These errors manifest through specific combinations of the input signals and parameter values of a model, and are often hard to detect using empirical methods or testing alone.</p><p>This document provides examples of how PolySpace&reg; products prove both the absence and presence of run-time errors for code generated by Real-Time Workshop Embedded Coder software. It also shows the results of MISRA C&reg; compliance for the generated code.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">MISRA-C:2004</a></li><li><a href="#2">Proving the Absence or Presence of Run-Time Errors</a></li><li><a href="#3">Example of Overflowing Operation in the Model</a></li><li><a href="#4">Example of Unreachable Code in the Model</a></li></ul></div><h2>MISRA-C:2004<a name="1"></a></h2><p>This document uses a fixed-point version of the fuelsys model (Fixed-Point Fuel Control System). To activate the PolySpace products, add the PolySpace block from the Simulink&reg; Library browser.</p><p><img vspace="5" hspace="5" src="polyspace_big_model.jpg" alt=""> </p><p>To get the list of MISRA C violations, click on the PolySpace button. The MISRA C checks are performed on the generated C code and on the C code invoked in S-functions.</p><p>You can enable or disable specific MISRA-C:2004 rules from a graphical interface included in the PolySpace products.</p><p><img vspace="5" hspace="5" src="polyspace_misra.jpg" alt=""> </p><h2>Proving the Absence or Presence of Run-Time Errors<a name="2"></a></h2><p>PolySpace products perform code verification aimed at proving the absence of run-time errors in any location in the generated code. A proven code section is colored green when this diagnostic occurs. The following example shows generated code that has been fully verified as not including any run-time errors.</p><p><img vspace="5" hspace="5" src="polyspace_all_green.jpg" alt=""> </p><p>PolySpace products let you trace the verified code back to the Simulink model by right-clicking on the blue hyper-links displayed in the code. The highlighted portion (product operator) in the model produced the green code section.</p><p><img vspace="5" hspace="5" src="polyspace_green_model.jpg" alt=""> </p><p>When PolySpace products cannot prove the absence of an error, the diagnostic indicates one of three results:</p><div><ul><li>Red: A link to the error message associated to the error which occurs at every execution.</li><li>Orange: A link to an unproven message, an error may occur sometimes.</li><li>Grey: A link to a check shown as unreachable code.</li></ul></div><h2>Example of Overflowing Operation in the Model<a name="3"></a></h2><p>PolySpace products can verify a piece of generated code under certain assumptions using specified input data ranges. The verification checks the reliability of the generated code based on external constraints of calibration data, parameter changes, scaling, and more. The following example shows a possible overflow in the generated code from fuelsys where some input range data has been constrained:</p><pre>'throttle'     in [0...120]
'enginespeed'  in [0...1000]
'EGO'          in [0...1536]
'MAP'          in [0...256]</pre><p><img vspace="5" hspace="5" src="polyspace_orange_annotated.jpg" alt=""> </p><p>The following block in fuelsys has the overflowing operation. Using a saturation operator may fix the error (overflow).</p><p><img vspace="5" hspace="5" src="polyspace_ovfl.jpg" alt=""> </p><h2>Example of Unreachable Code in the Model<a name="4"></a></h2><p>Besides run-time errors, PolySpace products also check for unreachable code. For example, unreachable code can show up in a Stateflow&reg; machine or in a sub-system when activating conditions are never met. The following example shows a section of unreachable code in fuelsys.</p><p><img vspace="5" hspace="5" src="polyspace_grey.jpg" alt=""> </p><p class="footer">Copyright 2007-2009 The MathWorks, Inc.<br>
          Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!--
##### SOURCE BEGIN #####
%% PolySpace Verification with MISRA C Checking
%
% The embedded software design process is manual and error prone. 
% Design flaws can appear during model update, simulation, or even 
% later during embedded software testing with processor-in-loop (PIL) 
% verification. One category of design flaws is difficult to detect 
% using only model updates and simulations: run-time errors.
%
% Elimination of run-time errors is important for all software but 
% especially for software that must meet safety standards such as 
% MISRA-C:2004, which prohibits run-time errors in rule 21.2. 
% Examples of run-time errors include fixed-point or integer 
% overflow, division by zero, memory corruption, and out-of-bounds 
% array accesses. These errors manifest through specific combinations 
% of the input signals and parameter values of a model, and are often 
% hard to detect using empirical methods or testing alone.
%
% This document provides examples of how PolySpace(R) products prove 
% both the absence and presence of run-time errors for code 
% generated by Real-Time Workshop Embedded Coder software. It also 
% shows the results of MISRA C(R) compliance for the generated code.
%
%% MISRA-C:2004
%
% This document uses a fixed-point version of the fuelsys model 
% (Fixed-Point Fuel Control System). To activate the PolySpace 
% products, add the PolySpace block from the Simulink(R) Library 
% browser.
%
% <<polyspace_big_model.jpg>>
%
% To get the list of MISRA C violations, click on the PolySpace 
% button. The MISRA C checks are performed on the generated C code 
% and on the C code invoked in S-functions. 
%
% You can enable or disable specific MISRA-C:2004 rules from a 
% graphical interface included in the PolySpace products.
%
% <<polyspace_misra.jpg>>
%
%% Proving the Absence or Presence of Run-Time Errors
%
% PolySpace products perform code verification aimed at proving the 
% absence of run-time errors in any location in the generated code. 
% A proven code section is colored green when this diagnostic occurs. 
% The following example shows generated code that has been fully 
% verified as not including any run-time errors. 
%
% <<polyspace_all_green.jpg>>
%
% PolySpace products let you trace the verified code back to the 
% Simulink model by right-clicking on the blue hyper-links displayed 
% in the code. The highlighted portion (product operator) in the 
% model produced the green code section.
%
% <<polyspace_green_model.jpg>>
%
% When PolySpace products cannot prove the absence of an error, 
% the diagnostic indicates one of three results:
%
% * Red: A link to the error message associated to the error which occurs at every execution.
% * Orange: A link to an unproven message, an error may occur sometimes.
% * Grey: A link to a check shown as unreachable code.
%
%% Example of Overflowing Operation in the Model
%
% PolySpace products can verify a piece of generated code under 
% certain assumptions using specified input data ranges. The verification 
% checks the reliability of the generated code based on external 
% constraints of calibration data, parameter changes, scaling, and 
% more. The following example shows a possible overflow in the 
% generated code from fuelsys where some input range data has been 
% constrained:
%
%  'throttle'     in [0...120] 
%  'enginespeed'  in [0...1000] 
%  'EGO'          in [0...1536] 
%  'MAP'          in [0...256] 
%
% <<polyspace_orange_annotated.jpg>>
%
% The following block in fuelsys has the overflowing operation. 
% Using a saturation operator may fix the error (overflow).
%
% <<polyspace_ovfl.jpg>>
%
%% Example of Unreachable Code in the Model
%
% Besides run-time errors, PolySpace products also check for 
% unreachable code. For example, unreachable code can show up in a 
% Stateflow(R) machine or in a sub-system when activating conditions 
% are never met. The following example shows a section of unreachable 
% code in fuelsys.
%
% <<polyspace_grey.jpg>>
%

%   Copyright 2007-2009 The MathWorks, Inc.


displayEndOfDemoMessage(mfilename)

##### SOURCE END #####
--></body></html>