
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Connecting Models</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-06-29"><meta name="DC.source" content="GSConnectingModels.m"><link rel="stylesheet" type="text/css" href="../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit GSConnectingModels">Open GSConnectingModels.m in the Editor</a></div><div class="right"><a href="matlab:echodemo GSConnectingModels">Run in the Command Window</a></div></div><div class="content"><h1>Connecting Models</h1><!--introduction--><p>This demo shows how to model interconnections of LTI systems, from simple series and parallel connections to complex block diagrams.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Overview</a></li><li><a href="#3">Series Connection</a></li><li><a href="#6">Parallel Connection</a></li><li><a href="#9">Feedback Connections</a></li><li><a href="#13">Concatenating Inputs and Outputs</a></li><li><a href="#21">Building Models from Block Diagrams</a></li><li><a href="#26">Precedence Rules</a></li></ul></div><h2>Overview<a name="1"></a></h2><p>Control System Toolbox&#8482; provides a number of functions to help you build networks of LTI models.  These include functions to perform</p><div><ul><li>Series and parallel connections (<tt>series</tt> and <tt>parallel</tt>)</li><li>Feedback connections (<tt>feedback</tt> and <tt>lft</tt>)</li><li>Input and output concatenations (<tt>[ , ]</tt>, <tt>[ ; ]</tt>, and <tt>append</tt>)</li><li>General block-diagram building (<tt>connect</tt>).</li></ul></div><p>These functions can handle any combination of model representations. For illustration purposes, create the following two SISO transfer function models:</p><pre class="codeinput">H1 = tf(2,[1 3 0])
</pre><pre class="codeoutput"> 
Transfer function:
    2
---------
s^2 + 3 s
 
</pre><pre class="codeinput">H2 = zpk([],-5,5)
</pre><pre class="codeoutput"> 
Zero/pole/gain:
  5
-----
(s+5)
 
</pre><h2>Series Connection<a name="3"></a></h2><p><img vspace="5" hspace="5" src="../Figures/GSConnectingModels_Fig02.png" alt=""> </p><p>Use the <tt>*</tt> operator or the <tt>series</tt> function to connect LTI models in series, for example:</p><pre class="codeinput">H = H2 * H1
</pre><pre class="codeoutput"> 
Zero/pole/gain:
     10
-------------
s (s+5) (s+3)
 
</pre><p>or equivalently</p><pre class="codeinput">H = series(H1,H2);
</pre><h2>Parallel Connection<a name="6"></a></h2><p><img vspace="5" hspace="5" src="../Figures/GSConnectingModels_Fig03.png" alt=""> </p><p>Use the <tt>+</tt> operator or the <tt>parallel</tt> function to connect LTI models in parallel, for example:</p><pre class="codeinput">H = H1 + H2
</pre><pre class="codeoutput"> 
Zero/pole/gain:
5 (s+2.643) (s+0.7566)
----------------------
    s (s+3) (s+5)
 
</pre><p>or equivalently</p><pre class="codeinput">H = parallel(H1,H2);
</pre><h2>Feedback Connections<a name="9"></a></h2><p>The standard feedback configuration is shown below:</p><p><img vspace="5" hspace="5" src="../Figures/GSConnectingModels_Fig04.png" alt=""> </p><p>To build a model of the closed-loop transfer from <tt>u</tt> to <tt>y</tt>, type</p><pre class="codeinput">H = feedback(H1,H2)
</pre><pre class="codeoutput"> 
Zero/pole/gain:
            2 (s+5)
--------------------------------
(s+5.663) (s^2 + 2.337s + 1.766)
 
</pre><p>Note that <tt>feedback</tt> assumes negative feedback by default. To apply positive feedback, use the following syntax:</p><pre class="codeinput">H = feedback(H1,H2,+1);
</pre><p>You can also use the <tt>lft</tt> function to build the more general feedback interconnection sketched below.</p><p><img vspace="5" hspace="5" src="../Figures/GSConnectingModels_Fig08.png" alt=""> </p><h2>Concatenating Inputs and Outputs<a name="13"></a></h2><p>You can concatenate the inputs of the two models <tt>H1</tt> and <tt>H2</tt> by typing</p><pre class="codeinput">H = [ H1 , H2 ]
</pre><pre class="codeoutput"> 
Zero/pole/gain from input 1 to output:
   2
-------
s (s+3)
 
Zero/pole/gain from input 2 to output:
  5
-----
(s+5)
 
</pre><p>The resulting model has two inputs and corresponds to the interconnection:</p><p><img vspace="5" hspace="5" src="../Figures/GSConnectingModels_Fig05.png" alt=""> </p><p>Similarly, you can concatenate the outputs of <tt>H1</tt> and <tt>H2</tt>  by typing</p><pre class="codeinput">H = [ H1 ; H2 ]
</pre><pre class="codeoutput"> 
Zero/pole/gain from input to output...
         2
 #1:  -------
      s (s+3)
 
        5
 #2:  -----
      (s+5)
 
</pre><p>The resulting model <tt>H</tt> has two outputs and one input and corresponds to the following block diagram:</p><p><img vspace="5" hspace="5" src="../Figures/GSConnectingModels_Fig06.png" alt=""> </p><p>Finally, you can append the inputs and outputs of two models using:</p><pre class="codeinput">H = append(H1,H2)
</pre><pre class="codeoutput"> 
Zero/pole/gain from input 1 to output...
         2
 #1:  -------
      s (s+3)
 
 #2:  0
 
Zero/pole/gain from input 2 to output...
 #1:  0
 
        5
 #2:  -----
      (s+5)
 
</pre><p>The resulting model <tt>H</tt> has two inputs and two outputs and corresponds to the block diagram:</p><p><img vspace="5" hspace="5" src="../Figures/GSConnectingModels_Fig07.png" alt=""> </p><p>You can use concatenation to build MIMO models from elementary SISO models, for example:</p><pre class="codeinput">H = [H1 , -tf(10,[1 10]) ; 0 , H2 ]
</pre><pre class="codeoutput"> 
Zero/pole/gain from input 1 to output...
         2
 #1:  -------
      s (s+3)
 
 #2:  0
 
Zero/pole/gain from input 2 to output...
       -10
 #1:  ------
      (s+10)
 
        5
 #2:  -----
      (s+5)
 
</pre><pre class="codeinput">sigma(H), grid
</pre><img vspace="5" hspace="5" src="GSConnectingModels_01.png" alt=""> <h2>Building Models from Block Diagrams<a name="21"></a></h2><p>You can use combinations of the functions and operations introduced so far to construct models of simple block diagrams. For example, consider the following block diagram:</p><p><img vspace="5" hspace="5" src="../Figures/GSConnectingModels_Fig09.png" alt=""> </p><p>with the following data for the blocks <tt>F</tt>, <tt>C</tt>, <tt>G</tt>, <tt>S</tt>:</p><pre class="codeinput">s = tf(<span class="string">'s'</span>);
F = 1/(s+1);
G = 100/(s^2+5*s+100);
C = 20*(s^2+s+60)/s/(s^2+40*s+400);
S = 10/(s+10);
</pre><p>You can compute the closed-loop transfer <tt>T</tt> from <tt>r</tt> to <tt>y</tt> as</p><pre class="codeinput">T = F * feedback(G*C,S);
step(T), grid
</pre><img vspace="5" hspace="5" src="GSConnectingModels_02.png" alt=""> <p>For more complicated block diagrams, the <tt>connect</tt> function provides a systematic and simple way to wire  blocks together. To use <tt>connect</tt>, follow these steps:</p><p>
<ol>
<li> Define all blocks in the diagram, including summation blocks </li>
<li> Name all signals in the diagram </li>
<li> Use signals names to specify the InputName and OutputName properties of
each block. </li>
</ol>
</p><p><img vspace="5" hspace="5" src="../Figures/GSConnectingModels_Fig10.png" alt=""> </p><p>For the block diagram above, these steps amount to:</p><pre class="codeinput">Sum1 = sumblk(<span class="string">'e'</span>,<span class="string">'r'</span>,<span class="string">'y'</span>,<span class="string">'+-'</span>);
Sum2 = sumblk(<span class="string">'u'</span>,<span class="string">'uC'</span>,<span class="string">'uF'</span>,<span class="string">'++'</span>);

<span class="comment">% Define the block I/Os</span>
F.inputname = <span class="string">'r'</span>;   F.OutputName = <span class="string">'uF'</span>;
C.inputname = <span class="string">'e'</span>;   C.OutputName = <span class="string">'uC'</span>;
G.inputname = <span class="string">'u'</span>;   G.OutputName = <span class="string">'ym'</span>;
S.inputname = <span class="string">'ym'</span>;  S.OutputName = <span class="string">'y'</span>;

<span class="comment">% Compute transfer r -&gt; ym</span>
T = connect(F,C,G,S,Sum1,Sum2,<span class="string">'r'</span>,<span class="string">'ym'</span>);
step(T), grid
</pre><img vspace="5" hspace="5" src="GSConnectingModels_03.png" alt=""> <h2>Precedence Rules<a name="26"></a></h2><p>When connecting models of different types, the resulting model type is determined by the precedence rule</p><pre>  FRD &gt; SS &gt; ZPK &gt; TF</pre><p>This rule states that FRD has highest precedence, followed by SS and ZPK, and TF has the lowest precedence. For example, in the series connection:</p><pre class="codeinput">H1 = ss(-1,2,3,0);
H2 = tf(1,[1 0]);
H = H2 * H1;
</pre><p><tt>H2</tt> is automatically converted to the state-space representation and the result <tt>H</tt> is a state-space model:</p><pre class="codeinput">class(H)
</pre><pre class="codeoutput">
ans =

ss

</pre><p>Because the SS and FRD representations are best suited for system interconnections, it is recommended that you cast at least one of the models to SS or FRD to ensure that all computations are performed using one of these two representations. For example, the computation of <tt>T</tt> above is best performed by</p><pre class="codeinput">T = connect(ss(F),C,G,S,Sum1,Sum2,<span class="string">'r'</span>,<span class="string">'ym'</span>);
</pre><p class="footer">Copyright 1986-2007 The MathWorks, Inc.<br>
          Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!--
##### SOURCE BEGIN #####
%% Connecting Models
% This demo shows how to model interconnections of LTI systems, 
% from simple series and parallel connections to complex
% block diagrams.

%   Copyright 1986-2007 The MathWorks, Inc.
%   $Revision: 1.1.6.7 $  $Date: 2007/11/09 19:47:43 $

%% Overview
% Control System Toolbox(TM) provides a number of functions to help you
% build networks of LTI models.  These include functions to perform
%
% * Series and parallel connections (|series| and |parallel|)
% * Feedback connections (|feedback| and |lft|)
% * Input and output concatenations (|[ , ]|, |[ ; ]|, and |append|)
% * General block-diagram building (|connect|).
%
% These functions can handle any combination of model representations.
% For illustration purposes, create the following two SISO transfer 
% function models:
H1 = tf(2,[1 3 0])

%%
H2 = zpk([],-5,5)

%% Series Connection
% <<../Figures/GSConnectingModels_Fig02.png>>

%% 
% Use the |*| operator or the |series| function to connect LTI models in
% series, for example:
H = H2 * H1

%%
% or equivalently
H = series(H1,H2);

%% Parallel Connection
% <<../Figures/GSConnectingModels_Fig03.png>> 

%%
% Use the |+| operator or the |parallel| function to connect LTI models in
% parallel, for example:
H = H1 + H2

%%
% or equivalently
H = parallel(H1,H2);


%% Feedback Connections
% The standard feedback configuration is shown below:
%
% <<../Figures/GSConnectingModels_Fig04.png>>

%%
% To build a model of the closed-loop transfer from |u| to |y|, type
H = feedback(H1,H2)

%%
% Note that |feedback| assumes negative feedback by default. 
% To apply positive feedback, use the following syntax:
H = feedback(H1,H2,+1);

%% 
% You can also use the |lft| function to build the more general 
% feedback interconnection sketched below.
%
% <<../Figures/GSConnectingModels_Fig08.png>>




%% Concatenating Inputs and Outputs
% You can concatenate the inputs of the two models |H1| and |H2| by typing
H = [ H1 , H2 ]

%%
% The resulting model has two inputs and corresponds to the
% interconnection:
%
% <<../Figures/GSConnectingModels_Fig05.png>>

%% 
% Similarly, you can concatenate the outputs of |H1| and |H2|  by typing
H = [ H1 ; H2 ]

%%
% The resulting model |H| has two outputs and one input and 
% corresponds to the following block diagram:
%
% <<../Figures/GSConnectingModels_Fig06.png>>
    
%%
% Finally, you can append the inputs and outputs of two models using:
H = append(H1,H2)

%%
% The resulting model |H| has two inputs and two outputs and 
% corresponds to the block diagram:
%
% <<../Figures/GSConnectingModels_Fig07.png>>
 
%%
% You can use concatenation to build MIMO models from elementary SISO
% models, for example:
H = [H1 , -tf(10,[1 10]) ; 0 , H2 ]

%%
sigma(H), grid

%% Building Models from Block Diagrams
% You can use combinations of the functions and operations introduced so far to construct
% models of simple block diagrams. For example, consider
% the following block diagram:
%
% <<../Figures/GSConnectingModels_Fig09.png>>
%
% with the following data for the blocks |F|, |C|, |G|, |S|:
s = tf('s');
F = 1/(s+1);
G = 100/(s^2+5*s+100);
C = 20*(s^2+s+60)/s/(s^2+40*s+400);
S = 10/(s+10);

%% 
% You can compute the closed-loop transfer |T| from |r| to |y| as
T = F * feedback(G*C,S);
step(T), grid

%%
% For more complicated block diagrams, the |connect| function provides a
% systematic and simple way to wire  blocks together. To use |connect|,
% follow these steps:

%%
% <html>
% <ol>
% <li> Define all blocks in the diagram, including summation blocks </li>
% <li> Name all signals in the diagram </li>
% <li> Use signals names to specify the InputName and OutputName properties of
% each block. </li>
% </ol> 
% </html>

%%
%
% <<../Figures/GSConnectingModels_Fig10.png>>
%
% For the block diagram above, these steps amount to:
Sum1 = sumblk('e','r','y','+-');
Sum2 = sumblk('u','uC','uF','++');

% Define the block I/Os
F.inputname = 'r';   F.OutputName = 'uF';
C.inputname = 'e';   C.OutputName = 'uC';
G.inputname = 'u';   G.OutputName = 'ym';
S.inputname = 'ym';  S.OutputName = 'y';

% Compute transfer r -> ym
T = connect(F,C,G,S,Sum1,Sum2,'r','ym');
step(T), grid

%% Precedence Rules
% When connecting models of different types, the resulting model type is
% determined by the precedence rule 

%%
%    FRD > SS > ZPK > TF

%%
% This rule states that FRD has highest precedence, followed by SS and ZPK, and TF has
% the lowest precedence. For example, in the series connection:
H1 = ss(-1,2,3,0);
H2 = tf(1,[1 0]);
H = H2 * H1;

%%
% |H2| is automatically converted to the state-space representation and the
% result |H| is a state-space model:
class(H)

%%
% Because the SS and FRD representations are best suited for system
% interconnections, it is recommended that you cast at least one of the models to
% SS or FRD to ensure that all computations are performed using one of
% these two representations. For example, the computation of |T| above is 
% best performed by
T = connect(ss(F),C,G,S,Sum1,Sum2,'r','ym');


displayEndOfDemoMessage(mfilename)
##### SOURCE END #####
--></body></html>