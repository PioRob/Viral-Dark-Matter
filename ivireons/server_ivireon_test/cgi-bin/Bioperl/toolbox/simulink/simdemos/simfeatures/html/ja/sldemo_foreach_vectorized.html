
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>For Each Subsystem によるスカラー アルゴリズムのベクトル化</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="sldemo_foreach_vectorized.m"><link rel="stylesheet" type="text/css" href="../../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left">sldemo_foreach_vectorized.mdl</div><div class="right"><a href="matlab:sldemo_foreach_vectorized">このモデルを開く</a></div></div><div class="content"><h1>For Each Subsystem によるスカラー アルゴリズムのベクトル化</h1><!--introduction--><p>このデモの目的は、For Each Subsystem の使用方法を紹介することです。このデモでは、簡単にするために、ベクトルで演算を行います。</p><!--/introduction--><p>デモ モデル <a href="matlab:open_system('sldemo_foreach_vectorized')"><tt>sldemo_foreach_vectorized</tt></a> を開いてください。このモデルには、入力信号を 1 つずつ処理する For Each Subsystem が含まれています。</p><p>For Each Subsystem への入力は、処理する信号、これらの各信号で使用する FIR フィルターの係数、および共通ゲインです。</p><p>各信号はスカラーであり、個別に処理する必要があります。このため、分割幅 1 をスライスすることによって、分割の次元を制御する For Each ブロックが入力信号を次元 1 に沿って分割するように設定されます。また、入力信号ごとに、同じ基準を使用して、対応する係数のセットを分割する必要もあります。ゲインはすべての信号に共通なので、この入力は分割されません。</p><p>出力信号の次元は入力信号の次元と一致しているはずなので、連結の次元は分割の次元に等しくなるように設定されます。信号の次元を変更 (この場合は転置) したい場合は、連結の次元として 2 を選択できます。</p><p>For Each Subsystem の場合、分割の次元と幅を設定する必要がありますが、入力信号のサイズは設定する必要はありません。その後、このサイズが分割幅の倍数であることを確認するチェックが行われます。エラーが検出されなければ、Subsystem は、囲まれた Subsystem が実行する独立実行の数を計算します。特定の含まれたブロックに関連している状態にはそれぞれの実行における一意の値があるという点で独立しています。</p><p>このモデルのベクトル化されていない実装を確認するには、このモデルの左隅にある Subsystem をダブルクリックします。この実装では、For Each Subsystem は使用されません。この実装では、Subsystem を必要な回数だけ複製し、信号を適切に選択して連結することによって、For Each Subsystem の機能を模倣しています。この複製プロセスはエラーを起こしやすい上、スケーラブルではありません。入力信号のサイズを変更する際は、それに応じてモデルを変更する必要があります。</p><img vspace="5" hspace="5" src="../sldemo_foreach_vectorized_01.png" alt=""> <p class="footer">Copyright 2009 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Vectorizing a Scalar Algorithm with For Each Subsystem % The purpose of this demo is to introduce you to the usage % of the For Each Subsystem. In this demo the operations are % performed on vector for simplicity.   % Copyright 2009 The MathWorks, Inc. % $Revision: 1.1.4.8.2.1 $  $Date: 2010/07/29 21:29:14 $  %% % Open the demo model <matlab:open_system('sldemo_foreach_vectorized') % |sldemo_foreach_vectorized|>. This model contains a For Each Subsystem  % that processes the input signals one by one. % % The inputs to the For Each Subsystem are: the signals to process, % the coefficients of the FIR filter to use with each of these % signals, and the common gain. % % Each signal is scalar and needs to be processed individually. Consequently, % the For Each Block that controls the partition dimension is set to partition  % the input signal along dimension 1, by slicing through a partition width of 1. % For each input signal, a corresponding set of coefficients must also % be partitioned using the same criterion. The gain is common to all the signals, % thus this input is not partitioned. %  % Since the output signal dimension is expected to match the input signal  % dimension, the concatenation dimension is set equal to the partition % dimension. If you prefer to change the signal dimension (a  % transpose in this case), you can choose 2 as the concatenation dimension. % % For the For Each Subsystem, you must set the partition dimension and width, but % not the input signal size. A check then ensures that this size is a multiple of % the partition width. If no error is detected, the subsystem then calculates the  % number of independent executions that the enclosed subsystem will perform. % These executions are independent, in that, the state associated with a given  % contained block has a unique value in each of the respective executions. % % To see a non-vectorized implementation for this model, double-click  % on the subsystem in the left corner of the model. % This implementation does not use the For Each Subsystem. It mimics % its functionality by replicating the subsystem as many times as necessary % and also by selecting and concatenating the signals appropriately. This % replication process is prone to error and is not scalable-  % changing the input signal size would require changing the model accordingly.   model = 'sldemo_foreach_vectorized'; open_system(model); evalc('sim(model)');  ##### SOURCE END ##### --></body></html>