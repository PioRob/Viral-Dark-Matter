
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>SISO 設計ツール内の自動 LQG トラッカー デザイン</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="autotunedemo.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit autotunedemo">エディターで autotunedemo.m を開く</a></div><div class="right"><a href="matlab:echodemo autotunedemo">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>SISO 設計ツール内の自動 LQG トラッカー デザイン</h1><!--introduction--><p>このデモでは、ハード ディスクの読み書きヘッドの位置のフィードバック コントローラーを設計するために、SISOTOOL の LQG 統合メソッドを使用する方法を示します。</p><p>システムとモデルの詳細は、Franklin、Powell、Workman による『Digital Control of Dynamic Systems』の第 14 章を参照してください。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">ディスク ドライブ モデル</a></li><li><a href="#3">設計の概要</a></li><li><a href="#4">SISOTOOL 設計作業の作成</a></li><li><a href="#8">フルオーダー LQG トラッカーの設計</a></li><li><a href="#16">低次元化された LQG トラッカーの設計</a></li></ul></div><h2>ディスク ドライブ モデル<a name="1"></a></h2><p>モデル化するシステムの図を以下に示します。</p><p><img vspace="5" hspace="5" src="../../Figures/diskdemofigures_01.png" alt=""> </p><p>モデルの入力は、ボイス コイル モーターを駆動する電流 ic、出力は、位置誤差信号 (PES、トラック幅の比 (%)) です。10 次モデルの詳細は、<a href="diskdemo.html">「ハード ディスク ドライブのデジタル サーボ制御」</a>を参照してください。モデルにはわずかな遅延がありますが、現時点では SISOTOOL は遅延のあるモデルをサポートしていないため、入力からは遅延を削除してフィードバック コントローラーを設計してあります。</p><pre class="codeinput">load <span class="string">diskdemo</span>
Gr = tf(1e6,[1 12.5 0]);
Gf1 = tf(w1*[a1 b1*w1],[1 2*z1*w1 w1^2]); <span class="comment">% first  resonance</span>
Gf2 = tf(w2*[a2 b2*w2],[1 2*z2*w2 w2^2]); <span class="comment">% second resonance</span>
Gf3 = tf(w3*[a3 b3*w3],[1 2*z3*w3 w3^2]); <span class="comment">% third  resonance</span>
Gf4 = tf(w4*[a4 b4*w4],[1 2*z4*w4 w4^2]); <span class="comment">% fourth resonance</span>
G = (ss(Gf1) + Gf2 + Gf3 + Gf4) * Gr;     <span class="comment">% convert to state space for accuracy</span>
</pre><h2>設計の概要<a name="3"></a></h2><p>読み書きヘッドが適切な位置にあるフルオーダー LQG トラッカーの大まかな設計をします。また、LQG トラッカーを調整して、特定の性能要件を達成し、可能な限りコントローラーの次数を低減します。たとえば、LQG トラッカーを PI コントローラー形式に調整します。</p><h2>SISOTOOL 設計作業の作成<a name="4"></a></h2><p>MATLAB&reg; プロンプトで以下のコマンドを入力して SISOTOOL を開きます。</p><p>sisotool(G)</p><p>[SISO 設計作業] が Control and Estimation Tools Manager に追加されます。グラフィカルな調整ツールがある [SISO 設計ツール] ダイアログが表示されます。SISOTOOL で [解析プロット] タブに移動し、閉ループ システムのステップ応答を選択してプロットします。SISO 設計ツールの使用方法の詳細は、<a href="GSSISOTool.html">「SISO 設計ツールの Getting Started」</a>を参照してください。</p><p>ツリー内でSISO 設計作業ノードを選択し、[自動調整] タブを選択します。[設計手法] の一覧には、4 つの補償器設計手法があります。この例では、LQG 合成設計手法を使用します。</p><p><img vspace="5" hspace="5" src="../autotune_cetm_combo.PNG" alt=""> </p><h2>フルオーダー LQG トラッカーの設計<a name="8"></a></h2><p><b>手順 1</b> [設計手法] の一覧で [LQG 合成] を選択します。</p><p>[補償器] の領域で、初期コントローラーは 1 に設定されています。この設定では、大きな振幅のある安定した閉ループ システムが得られます。閉ループのステップ応答プロットを参照してください。</p><p><img vspace="5" hspace="5" src="../autotune_ltiview_init.PNG" alt=""> </p><p><b>手順 2</b> LQG 設計仕様を指定します。</p><p>[仕様] の領域でスライダーを使用して、コントローラーの性能に関する要件を数値で設定します。</p><p>1. コントローラーの応答:スライダーを左側 ([アグレッシブ]) にドラッグすると、閉ループ応答でオーバーシュートと整定時間を減少する、よりアグレッシブなコントローラーとなります。ただし、モデルの精度が不足している場合、アグレッシブなコントローラーは、安定余裕 (ロバスト性) を減少します。</p><p>2. 測定ノイズ: スライダーを左側 ([小規模]) にドラッグすると、ユーザーが測定ノイズは小さいと見なしていることを示します。したがって、コントローラーは、Kalman フィルターによって推定された状態量において、より信頼性を増し、よりアグレッシブに応答します。ただし、測定のノイズが大きい場合は、スライダーを右側にドラッグすると、コントローラーは変化により遅く反応するようになります。</p><p>3. 希望する LQG コントローラー次数:スライダーをドラッグして、希望する LQG トラッカーの次数を設定します。LQG トラッカーには、積分器が自動的に含まれます。閉ループが安定性を失い始めるまで、コントローラーの次元を下げてください。</p><p>設計内の最初の反復としては、既定のスライダー設定を使用します。</p><p><img vspace="5" hspace="5" src="../autotune_cetm_LQG.PNG" alt=""> </p><p><b>手順 3</b> [補償器の更新] ボタンをクリックします。</p><p>新しい補償器が [補償器] 領域に表示され、ステップ応答プロットが更新されます。</p><p><img vspace="5" hspace="5" src="../autotune_ltiview_LQG.PNG" alt=""> </p><p><b>手順 4</b> LQG トラッカーの閉ループの性能を調整します。</p><p>さらにアグレッシブなコントローラーを設計するには、[コントローラーの応答] スライダーを左端に移動します。これによって、オーバーシュートが 50%、整定時間が 70% 減少します。</p><p><img vspace="5" hspace="5" src="../autotune_cetm_LQG_FullAgg.PNG" alt=""> </p><h2>低次元化された LQG トラッカーの設計<a name="16"></a></h2><p>[希望する LQG コントローラー次数] を 1 に設定し、[補償器の更新] ボタンをクリックします。新しい補償器は、基本的に0.57(1+s)/s の PI コントローラーです。このコントローラーによって、大きく振動する閉ループ システムが作成されます。</p><p><img vspace="5" hspace="5" src="../autotune_cetm_LQG_RedAggSISO.PNG" alt=""> </p><p><img vspace="5" hspace="5" src="../autotune_cetm_LQG_RedAgg.PNG" alt=""> </p><p>コントローラーのアグレッシブの度合いを低減するには、[コントローラーの応答] スライダーを右方向に移動します。新しい補償器は、基本的に0.001(1+s)/s の PI コントローラーです。</p><p><img vspace="5" hspace="5" src="../autotune_cetm_LQG_RedRobSISO.PNG" alt=""> </p><p><img vspace="5" hspace="5" src="../autotune_cetm_LQG_RedRob.PNG" alt=""> </p><p>応答プロットには、PI コントローラーの設計によって、最適化ベースの設計を開始するための適切な設計が用意されたことが示されています。詳細は、<a href="GSSISOTool.html">「SISO 設計ツールの Getting Started」</a>を参照してください。</p><p class="footer">Copyright 2005-2007 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Automated LQG Tracker Design in the SISO Design Tool  % This demo shows how to use the LQG synthesis method in SISOTOOL to % design a feedback controller for a disk drive read/write head.  % % For details about the system and model, see Chapter 14 of "Digital % Control of Dynamic Systems," by Franklin, Powell, and Workman. % % Copyright 2005-2007 The MathWorks, Inc. % $Revision: 1.1.4.2.2.1 $ $Date: 2010/07/29 21:28:40 $  %% Disk Drive Model % Below is a picture of the system to be modeled. % % <<../Figures/diskdemofigures_01.png>>  %%  % The model input is the current ic driving the voice coil motor, and the % output is the position error signal (PES, in % of track width). To learn % more about the 10th order model, see <diskdemo.html "Digital Servo % Control of a Hard-Disk Drive">. Because the model contains a small time % delay and SISOTOOL does not yet support models with a time delay, we  % remove the time delay in the input to design a feedback controller.    load diskdemo Gr = tf(1e6,[1 12.5 0]); Gf1 = tf(w1*[a1 b1*w1],[1 2*z1*w1 w1^2]); % first  resonance Gf2 = tf(w2*[a2 b2*w2],[1 2*z2*w2 w2^2]); % second resonance Gf3 = tf(w3*[a3 b3*w3],[1 2*z3*w3 w3^2]); % third  resonance Gf4 = tf(w4*[a4 b4*w4],[1 2*z4*w4 w4^2]); % fourth resonance G = (ss(Gf1) + Gf2 + Gf3 + Gf4) * Gr;     % convert to state space for accuracy  %% Design Overview % We want to get a rough design of a full-ordered LQG tracker, which % places the read/write head at the correct position. % We also want to tune the LQG tracker to achieve specific % performance requirements and reduce the controller order as much as % possible. For example, turn the LQG tracker into a PI controller format.  %% Creating a SISOTOOL Design Task % Open SISOTOOL by typing the following command at the MATLAB(R) prompt: %  % sisotool(G)  %% % A SISO Design Task is added to the Control and Estimation Tools % Manager.  You also see a SISO Design Tool dialog that contains % graphical tuning tools.  Go to the 'Analysis Plot' tab in SISOTOOL and % select to plot the step response of the closed loop system.  Details % about how to use SISO Design Tool are described in <GSSISOTool.html % "Getting Started with the SISO Design Tool">.   %% % Select the SISO Design Task node in the tree, and then select the % 'Automated Tuning' tab.  There are four compensator design methods available % in the 'Design Method' list.  In this example, we use the LQG synthesis  % design method.  %% % <<../autotune_cetm_combo.PNG>>  %% Design a Full-Order LQG Tracker % *Step 1* Select 'LQG Synthesis' in the 'Design Method' list.   % % In the 'Compensator' area, the initial controller is set to 1. This % results in a stable closed-loop system with large oscillations. % See the closed-loop step response plot.    %% % <<../autotune_ltiview_init.PNG>>  %%  % *Step 2* Determine LQG Design Specifications. % % In the 'Specifications' area, use sliders to qualitatively set requirements  % on the controller performance: % % 1. Controller Response: Drag the slider to the left (Aggressive) % results a more aggressive controller that reduces the overshoot and  % settling time in the closed-loop response. However, if you model is not % sufficiently accurate, an aggressive controller reduces the stability % margin (robustness). % % 2. Measurement Noise: Drag the slider to the left (Small) indicates % that you consider your measurement noise to be small. Therefore,   % the controller has more confidence in the states estimated by the Kalman % filter and responds more aggressively. However, if you consider your % measurements to be noisy, drag the slider to the right to cause the % controller to react more slowly to changes. % % 3. Desired LQG Controller Order: Drag the slider to set the desired order % of the LQG tracker. The LQG tracker automatically contains an integrator.  % Try reducing the controller order until you begin to lose closed-loop stability.   % % As a first iteration in the design, use default slider settings.     %% % <<../autotune_cetm_LQG.PNG>>  %% % *Step 3* Click the 'Update Compensator' button. % % The new compensator is displayed in the 'Compensator' area, and the % step response plot is updated.  %% % <<../autotune_ltiview_LQG.PNG>>  %% % *Step 4* Tune Closed-Loop Performance of the LQG Tracker.   % % To design a more aggressive controller, move the Controller Response slider  % to the far left. This reduces the overshoot by 50% and reduces the settling % time by 70%.  %% % <<../autotune_cetm_LQG_FullAgg.PNG>>  %% Design a Reduced-Order LQG Tracker % % Set Desired LQG Controller Order to 1 and click the 'Update Compensator' % button.  The new compensator is essentially a PI controller: 0.57(1+s)/s. % This produces a heavily oscillating closed-loop system.    %% % <<../autotune_cetm_LQG_RedAggSISO.PNG>>  %% % <<../autotune_cetm_LQG_RedAgg.PNG>>  %% % To make the controller less aggressive, move the Controller Response % slider to the right.  The new compensator is essentially a PI controller: % 0.001(1+s)/s.    %% % <<../autotune_cetm_LQG_RedRobSISO.PNG>>  %% % <<../autotune_cetm_LQG_RedRob.PNG>>  %% % The response plot shows that the PI controller design provides a good % starting point for optimization-based design.  For information, see % <GSSISOTool.html "Getting Started with the SISO Design Tool">.  %% displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>