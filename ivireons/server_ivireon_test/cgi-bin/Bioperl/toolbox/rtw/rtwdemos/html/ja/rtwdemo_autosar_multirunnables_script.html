
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>複数実行エンティティに対する AUTOSAR コードの生成</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="rtwdemo_autosar_multirunnables_script.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit rtwdemo_autosar_multirunnables_script">エディターで rtwdemo_autosar_multirunnables_script.m を開く</a></div><div class="right"><a href="matlab:echodemo rtwdemo_autosar_multirunnables_script">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>複数実行エンティティに対する AUTOSAR コードの生成</h1><!--introduction--><p>このデモでは、複数実行エンティティを使用して AUTOSAR 準拠のコードを設定および生成し、 Simulink&reg; モデルに対して AUTOSAR ソフトウェア コンポーネントの記述 XML ファイルをエクスポートする方法を示します。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">複数実行のサポートの概要</a></li><li><a href="#2">複数実行エンティティの指定</a></li><li><a href="#3">実行間変数の定義</a></li><li><a href="#4">AUTOSAR ポート設定の変更</a></li><li><a href="#5">AUTOSAR 準拠コードの生成</a></li><li><a href="#6">メモ:オーサーリング ツールへのマージ</a></li><li><a href="#7">詳細情報</a></li></ul></div><h2>複数実行のサポートの概要<a name="1"></a></h2><p>rtwdemo_autosar_multirunnables モデルを使用して、複数実行エンティティを指定するための Simulink モデルの作成方法を確認できます。</p><div><ul><li>rtwdemo_autosar_multirunnables モデルを開きます。</li></ul></div><pre class="codeinput"><span class="comment">% Model defines</span>
modelName = <span class="string">'rtwdemo_autosar_multirunnables'</span>;

<span class="comment">% open the model</span>
open_system( modelName );
</pre><img vspace="5" hspace="5" src="../rtwdemo_autosar_multirunnables_script_01.png" alt=""> <h2>複数実行エンティティの指定<a name="2"></a></h2><p>アトミック ソフトウェア コンポーネントを表す ASWC サブシステムをダブルクリックします。アトミック ソフトウェア コンポーネントを構成する複数実行エンティティが表示されます。各関数呼び出しサブシステムは、実行エンティティを定義します。このモデルには、Runnable1、Runnable2、Runnable3 の 3 つの関数呼び出しサブシステムが含まれています。コード生成時に、各関数呼び出しサブシステムの初期化関数を集めた追加の実行エンティティも作成されます。</p><pre class="codeinput"><span class="comment">% open the ASWC subsystem</span>
open_system( [modelName, <span class="string">'/ASWC'</span>] );
</pre><img vspace="5" hspace="5" src="../rtwdemo_autosar_multirunnables_script_02.png" alt=""> <h2>実行間変数の定義<a name="3"></a></h2><p>実行間変数により、実行エンティティ間でデータの整合性が保たれます。エンティティに接続する信号を使用して、これらの変数を定義します。信号には、実行間変数の名前をラベル付けします。このモデルには、irv1、irv2、irv3、irv4 の 4 つの実行間変数があります。実行間変数は Goto および From ブロックを経由できますが、各ライン セグメントに示すラベルの整合性を維持しなければなりません。</p><h2>AUTOSAR ポート設定の変更<a name="4"></a></h2><p><a href="matlab:helpview([docroot,'/toolbox/ecoder/helptargets.map'],'autosar_interface_dialog_box')">AUTOSAR インターフェイスのダイアログの概要</a></p><p>AUTOSAR ポート設定を変更できます。</p><div><ol><li>ASWC サブシステムを右クリックし、[<b></b>Real-Time Workshop]、[<b></b>AUTOSAR 複数実行コンポーネント]、[<b></b>設定] を選択します。</li><li>変更内容を確認したら、[<b></b>検証] ボタンをクリックします。</li></ol></div><h2>AUTOSAR 準拠コードの生成<a name="5"></a></h2><p>モデルから AUTOSAR 準拠コードを生成するには、次の手順を実行します。</p><div><ol><li>ASWC サブシステムを右クリックし、[<b></b>Real-Time Workshop]、[<b></b>AUTOSAR 複数実行コンポーネント]、[<b></b>関数のエクスポート] を選択します。</li><li>パラメーター ダイアログが表示されたら、[<b></b>ビルド] ボタンをクリックします。</li></ol></div><p>このほか、モデルから AUTOSAR 準拠コードを生成する方法として、次のコマンドを実行することもできます。</p><pre class="codeinput">rtwbuild( [modelName, <span class="string">'/ASWC'</span>], <span class="string">'Mode'</span>, <span class="string">'ExportFunctionCalls'</span>);
</pre><pre class="codeoutput">### Starting Real-Time Workshop build procedure for model:ASWC
### Generating XML files description for model:ASWC
### Successful completion of Real-Time Workshop code generation for model:ASWC
</pre><h2>メモ:オーサーリング ツールへのマージ<a name="6"></a></h2><p>このデモでは BasicSoftwarePorts を使用します。生成した XML ファイルを AUTOSAR オーサリング ツールにインポートする場合は、BasicSoftwarePorts によって参照されるサーバー インターフェイス (<a href="matlab:web(fullfile(matlabroot,'toolbox','rtw','rtwdemos','NvMInterface.arxml'))">NvMInterface.arxml</a>) を含める必要があります。</p><h2>詳細情報<a name="7"></a></h2><p><a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'ecoder_autosar')">AUTOSAR ターゲットのドキュメンテーション</a></p><p class="footer">Copyright 1990-2008 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% AUTOSAR Code Generation for Multiple Runnable Entities % This demonstration shows you how to configure and generate AUTOSAR-compliant % code and export AUTOSAR software component description XML files for a % Simulink(R) model with multiple runnable entities.  %   Copyright 1990-2008 The MathWorks, Inc. %   $Revision: 1.1.4.2.2.1 $  $Date: 2010/07/29 21:28:58 $  %% Overview of Multi-Runnable Support % You can use the rtwdemo_autosar_multirunnables model to see how to construct a % Simulink model to designate multiple runnable entities. % % * Open the model rtwdemo_autosar_multirunnables. %  % Model defines modelName = 'rtwdemo_autosar_multirunnables';  % open the model open_system( modelName );  %% Designate Multiple Runnable Entities % Double-click the ASWC subsystem, which represents the atomic software % component. You can see the multiple runnable entities that compose the atomic % software component. Each function-call subsystem defines a runnable % entity. This model contains three function-call subsystems: Runnable1, % Runnable2, Runnable3. An additional runnable entity aggregating the % initialization functions for each of the function-call subsystems is also % created at code generation.  % open the ASWC subsystem open_system( [modelName, '/ASWC'] );  %% Define the Inter-RunnableVariables % Inter-runnable variables ensure data consistency between runnable % entities. You define these variables through the signals that connect the % entities. The signals are labeled with their inter-runnable variable % name. This model has four inter-runnable variables: irv1, irv2, irv3, irv4. % The interrunnable variables may route through Goto and From blocks, but % any labels present on the respective line segments must be consistent.  %% Change the AUTOSAR Port Settings % <matlab:helpview([docroot,'/toolbox/ecoder/helptargets.map'],'autosar_interface_dialog_box') Overview of the AUTOSAR Interface dialog> % % You can change the AUTOSAR port settings. % % # Right-click on the ASWC subsystem and select: *Real-Time Workshop* > % *AUTOSAR Multi-Runnable Component* > *Configure*  % # Click the *Validate* button % once you are happy with your changes.  %% Generate AUTOSAR-Compliant Code % To generate AUTOSAR-compliant code from the model: % % # Right-click on the ASWC subsystem and select: *Real-Time Workshop* > % *AUTOSAR Multi-Runnable Component* > *Export Functions*  % # Click the *Build* % button once the parameter dialog appears. % % An alternative method to generate AUTOSAR-compliant code from the model is to % execute the following command.  rtwbuild( [modelName, '/ASWC'], 'Mode', 'ExportFunctionCalls');  %% NOTE: Merge into the Authoring Tool % This demonstration makes use of BasicSoftwarePorts. If you intend to import % the generated XML files into an AUTOSAR authoring tool, you should include the % server interface referenced by the BasicSoftwarePorts % (<matlab:web(fullfile(matlabroot,'toolbox','rtw','rtwdemos','NvMInterface.arxml')) % NvMInterface.arxml>).  %% Further Information % % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'ecoder_autosar') AUTOSAR Target documentation>  displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>