
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>反応器に対する Simulink PID Controller (2DOF) ブロックの設計</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="scdcstrctrlpidpad.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit scdcstrctrlpidpad">エディターで scdcstrctrlpidpad.m を開く</a></div><div class="right"><a href="matlab:echodemo scdcstrctrlpidpad">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>反応器に対する Simulink PID Controller (2DOF) ブロックの設計</h1><!--introduction--><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">PID Controller (2DOF) ブロックの紹介</a></li><li><a href="#2">モデルを開く</a></li><li><a href="#7">設計の概要</a></li><li><a href="#14">PID 調整器を開く</a></li><li><a href="#16">初期 PID 設計</a></li><li><a href="#21">標準設計モードでの外乱抑圧の設計</a></li><li><a href="#24">拡張設計モードでの外乱抑圧の設計</a></li><li><a href="#32">設定点の重みを使用した PID 設計の完了</a></li></ul></div><h2>PID Controller (2DOF) ブロックの紹介<a name="1"></a></h2><p>2DOF PID コントローラー (ISA-PID コントローラーとも呼ばれます) を使用すると、基準追従と外乱抑圧の両方で良好な性能を達成できます。フィードバック ループに標準的な PID コントローラーが含まれており、プレフィルターを参照信号に追加します。プレフィルターを使用すると、設定点の変更に対してより滑らかな過渡応答を生成できます。この例では、Simulink&reg; PID Controller (2DOF) ブロックを使用して、連続攪拌タンク反応器 (CSTR) を制御し、この 2DOF PID コントローラーを PID 調整器で設計します。</p><p>PID 調整器を使用した一般的な設計ワークフローには、以下の作業が含まれます。</p><p>(1) PID 調整器を起動する。起動時に、ソフトウェアが Simulink モデルから線形プラント モデルを自動的に計算し、初期コントローラーを設計します。</p><p>(2) 2 つの設計モードの設計基準を手動で調整することで、PID 調整器でコントローラーを調整する。PID 調整器が、システムをロバスト安定化させる PID パラメーターを計算します。</p><p>(3) 設計されたコントローラーのパラメーターを PID Controller ブロックにエクスポートし、Simulink でコントローラー性能の検証を実行する。</p><h2>モデルを開く<a name="2"></a></h2><p>少し時間をとって、モデルを調べます。</p><p><a href="matlab:open_system('scdcstrctrlpidblock')">CSTR 制御モデルを開く</a></p><pre class="codeinput">open_system(<span class="string">'scdcstrctrlpidblock'</span>);
</pre><img vspace="5" hspace="5" src="../scdcstrctrlpidpad_01.png" alt=""> <p>CSTR プラントは、平衡操作点で初期化されます。残差濃度の標準値は 1.96 mol/L で、<tt>CSTR</tt> サブシステムの <tt>Residual Concentration Reference</tt> ブロックと <tt>Integrator1</tt> ブロックの初期条件です。</p><p>PID Controller ブロックの積分器 <b>I0</b> の初期条件は、平衡操作点によって決定されます。この例では、並列形式の PI コントローラーがあります。</p><pre>   I0 = u0 - ((b-1)*y0*P)</pre><p>ここで <b>u0</b> は、定常状態のコントローラー出力 (300)、<b>y0</b> は定常状態のプラント出力 (1.96) です。<b>b</b> が 1 であるため、<b>I0</b>=*u0*=300 となります。</p><p>詳細は、Seborg, D.E. et al., &quot;Process Dynamics and Control&quot;, 2nd Ed., 2004, Wiley, pp.34-36 を参照してください。</p><h2>設計の概要<a name="7"></a></h2><p>この例では、反応器の冷却水温度を操作して、CSTR の残差濃度を制御します。全体的な設計要件は、以下のとおりです。</p><div><ul><li>Simulink ステップ ブロック <tt>Residual Concentration Reference</tt> からの参照信号で 0.5 の突然の増加を追跡する。詳細な設計要件は、以下のとおりです。</li></ul></div><pre>         整定時間が 10 秒未満である</pre><pre>         ステップ基準入力に対する定常偏差がゼロである</pre><pre>         オーバーシュートが 0.1 未満である</pre><div><ul><li>Simulink ステップ ブロック <tt>Feed Temperature</tt> からフィード温度における 5 度の突然の増加を拒否する。詳細な設計要件は、以下のとおりです。</li></ul></div><pre>         整定時間が 10 秒未満である</pre><pre>         定常状態のピーク偏差が 0.1 未満である</pre><p>この例では、PID 調整器で PI コントローラー <tt>PID Controller (2DOF)</tt> を設計し、基準追従と外乱抑圧の両方で良好な応答を達成します。</p><h2>PID 調整器を開く<a name="14"></a></h2><p>PID 調整器を起動するには、PID Controller ブロックをダブルクリックして、ブロック ダイアログを開きます。<b></b>[メイン] タブで、<b></b>[調整] をクリックします。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcstrctrlpidblock/pid_blockdialog.png" alt=""> </p><p>PID 調整器を起動したら、PID ブロック ダイアログを閉じて、PID 調整器を Simulink モデルの横に移動します。また、残差濃度のスコープ ウィンドウを開きます。</p><h2>初期 PID 設計<a name="16"></a></h2><p>PID 調整器が起動すると、ソフトウェアが、線形化されたプラント モデルを計算します。ソフトウェアはプラント入出力を自動的に特定し、現在の操作点を線形化に使用します。プラントは任意の次数を持つことができ、むだ時間を持つこともできます。</p><p>PID 調整器は、性能とロバスト性の間の適切なトレードオフを実現できるように初期 PI コントローラーを計算します。既定の設定では、ステップ基準追従性能がプロットに表示されます。</p><p><b></b>[パラメーターを表示する] 矢印をクリックして、コントローラー パラメーター P、I、b と、性能測定値とロバスト性測定値のセットを表示します。この例では、初期 PI コントローラー設計によって 4.4 秒の整定時間が与えられます。これは要件を満たします。</p><p>次の図は、初期設計を含む PID 調整器のダイアログを示しています。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcstrctrlpidblock/pid_initialtuner.png" alt=""> </p><p>非線形モデルで初期設計をテストするには、PID 調整器で<b></b> [適用] をクリックします。これにより、パラメーターが Simulink モデルの PID ブロックに書き込まれます。シミュレーションを実行して、閉ループ応答を表示します。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcstrctrlpidblock/pid_analysisresp1.png" alt=""> </p><p>外乱抑圧の過渡応答に、ピーク偏差が約 0.2 であり、設計要件を超えていることが示されます。PID 調整器を使用して、ピーク偏差を少なくとも 50% 減らす必要があります。</p><h2>標準設計モードでの外乱抑圧の設計<a name="21"></a></h2><p>PID 調整器には、基準追従 (r から y へ) やコントローラー制御 (r から u へ) などの異なるループ応答用のステップ プロットが用意されています。この例では、外乱は反応器のフィード温度で発生するため、取得できる一番近いプロットは入力外乱抑圧プロットです。このプロットは、プラント モデルの入力でステップ外乱が発生することを前提にしています。</p><p>次の図に、初期コントローラーを使用した外乱抑圧性能を示します。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcstrctrlpidblock/pid_disturbance1.png" alt=""> </p><p>ピーク偏差を -0.019 から -0.009 (約 50%) に減らす必要があります。まず、標準設計モードを使用してピーク偏差を減らします。このモードは、調整器の起動時に選択されたモードです。応答時間スライダーを右に移動して、応答時間を短縮し、コントローラーをよりアグレッシブにします。しかし、ピーク偏差を減らすと整定時間が長くなりすぎるため、設計要件を満たすことはできません。最初の自動設計結果に戻るには、ツールバーの <tt>[リセット]</tt> ボタンをクリックします。このボタンは、緑色の矢印のある一番最後にあるボタンです。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcstrctrlpidblock/pid_disturbance2.png" alt=""> </p><h2>拡張設計モードでの外乱抑圧の設計<a name="24"></a></h2><p>PID 調整器の拡張設計モードでは、より柔軟にコントローラー性能を調整できます。この設計モードを最大限に生かすには、周波数領域の制御設計手法に関するいくつかの知識が必要です。</p><p>拡張設計モードに切り替えるには、ツールバーの <b></b>[設計モード] ドロップダウン メニューで <b></b>[拡張] を選択します。</p><p>次の図は、初期設計を含む拡張設計モードの PID 調整器を示しています。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcstrctrlpidblock/pid_disturbance3.png" alt=""> </p><p>帯域幅を広くすると、コントローラーがよりアグレッシブになり、ピーク偏差が減少します。外乱抑圧の整定時間を 10 秒未満に維持するには、目的の位相余裕も減らす必要があります。これは、コントローラー設計では、性能とロバスト性の一般的なトレードオフです。応答プロットで変更の効果を表示します。両方のスライダーを移動すると、整定時間を 10 秒以内に維持しながら、ピーク偏差を 0.007 に減らすことができますこのように調整する 1 つの方法は、以下のとおりです。</p><div><ul><li>帯域幅を 4 rad/sec にする</li><li>位相余裕を 25 度にする</li></ul></div><p>次の図は、外乱抑圧性能を示しています。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcstrctrlpidblock/pid_disturbance4.png" alt=""> </p><p>非線形モデルで新しい設計をテストするには、PID 調整器で<b></b> [適用] をクリックします。シミュレーションを実行して、閉ループ応答を表示します。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcstrctrlpidblock/pid_analysisresp2.png" alt=""> </p><p>外乱抑圧性能は、要件を満たしています。ただし、コントローラーが非常にアグレッシブであるため、基準追従のオーバーシュートは限界を超えています。基本追従性能を向上させるには、2DOF PID ブロックでプレフィルターを調整する必要があります。</p><h2>設定点の重みを使用した PID 設計の完了<a name="32"></a></h2><p>ISA PI または PID コントローラーのパラメーター <b>b</b> は、コントローラーの比例ゲインに接続されている基準信号に対する設定点の重みです。0 ～ 1 の範囲があり、既定値は 1 です。この値を減らすことによって、基本追従性能はよりスムーズになります。この例では、PID ブロック ダイアログを開いて、<b>b</b> を 0 に設定します。</p><p><b>b</b> および <b>P</b> が変更されているため、PID Controller ブロックの積分器 <b>I0</b> の初期条件を調整して、初期操作点が平衡であることを確認する必要があります。関係は以下のとおりです。</p><pre>   I0 = u0 - ((b-1)*y0*P)</pre><p><b>u0</b> は 300、<b>y0</b> は 1.96 です。PID 調整器 (-153.5) の <b>P</b> と手動調整 (0) の <b>b</b> では、<b>I0</b> は -0.8267 となります。シミュレーションが平衡操作点で開始するようにこの値を使用して積分器の初期条件を更新します。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcstrctrlpidblock/pid_updatedblockdialog.png" alt=""> </p><p>次の図は、更新された設計に基準追従のオーバーシュートがないことを示しています。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcstrctrlpidblock/pid_analysisresp3.png" alt=""> </p><p>要約すると、基準追従と外乱抑圧のバランスの良い性能で 2DOF PID コントローラーを設計するには、PID 調整器を使用して良好な外乱抑圧を達成し、ブロック ダイアログで設定点の重み <b>b</b> や <b>c</b> を手動調整して良好な基準追従を達成します。<b>b</b> と <b>c</b> を変更しても、閉ループの安定性や外乱抑圧の性能には影響しません。</p><pre class="codeinput">bdclose(<span class="string">'scdcstrctrlpidblock'</span>)
</pre><p class="footer">Copyright 2005-2010 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Designing a Simulink PID Controller (2DOF) Block for a Reactor % % Copyright 2005-2010 The MathWorks, Inc. % $Revision: 1.1.4.2.2.1 $ $Date: 2010/07/29 21:29:21 $  %% Introduction of the PID Controller (2DOF) Block % With a 2DOF PID controller, also known as ISA-PID controller, you can % achieve good performance for both reference tracking and disturbance % rejection.  It contains a standard PID controller in the feedback loop % and adds a pre-filter to the reference signal.  The pre-filter helps % produce a smoother transient response to set-point changes.  In this % example, you use a Simulink(R) PID Controller (2DOF) block to control a % continuous stirred tank reactor (CSTR) and you design this 2DOF PID % controller in the PID Tuner.  % % A typical design workflow with the PID Tuner involves the following % tasks:  % % (1) Launch the PID Tuner.  When launching, the software automatically % computes a linear plant model from the Simulink model and designs an % initial controller.   % % (2) Tune the controller in the PID Tuner by manually adjusting design % criteria in two design modes. The tuner computes PID parameters that % robustly stabilize the system.      % % (3) Export the parameters of the designed controller back to the PID % Controller block and verify controller performance in Simulink.  %% Opening the Model % Take a few moments to explore the model.  %% % <matlab:open_system('scdcstrctrlpidblock') Open the CSTR control model> open_system('scdcstrctrlpidblock');  %% % The CSTR plant is initialized at an equilibrium operating point.  The % nominal value of the residual concentration is 1.96 mol/L, which is the % initial condition of the |Residual Concentration Reference| block and the % |Integrator1| block in the |CSTR| subsystem.    %% % The initial condition of the integrator *I0* in the PID controller block % is determined by the equilibrium operating point.  In this example, since % we have a PI controller in parallel form,  % %     I0 = u0 - ((b-1)*y0*P) %  % where *u0* is the steady state controller output (300), and *y0* is the % steady state plant output (1.96).  Since *b* is 1, *I0*=*u0*=300.  %% % For background, see Seborg, D.E. et al., "Process Dynamics and Control", % 2nd Ed., 2004, Wiley, pp.34-36. %  %% Design Overview % In this example, control the residual concentration of the CSTR by % manipulating reactor coolant temperature.  The overall design % requirements are:   % % * Track a sudden decrease of 0.5 in the reference signal from a Simulink % step block |Residual Concentration Reference|.  The detailed design % requirements are:  %% %           Settling time under 10 seconds %% %           Zero steady-state error to the step reference input %% %           Overshoot below 0.1 %% % * Reject a 5 degree sudden increase in the feed temperature from a % Simulink step block |Feed Temperature|.  The detailed design requirements % are:  %% %           Settling time under 10 seconds %% %           Peak deviation from steady state below 0.1 % % In this example you design a PI controller |PID Controller (2DOF)| in the % PID Tuner to achieve good responses in both reference tracking and % disturbance rejection.  %% Opening the PID Tuner % To launch the PID Tuner, double-click the PID Controller block to open % its block dialog.  In the *Main* tab, click *Tune*. % % <<../html_extra/scdcstrctrlpidblock/pid_blockdialog.png>> %% % After you launch the PID Tuner, close the PID block dialog and move the % PID Tuner beside the Simulink model.  Also, open the residual % concentration scope window.    %% Initial PID Design % When the PID Tuner launches, the software computes a linearized plant % model.  The software automatically identifies the plant input and output, % and uses the current operating point for the linearization.  The plant % can have any order and can have time delays.         % % The PID Tuner computes an initial PI controller to achieve a reasonable % tradeoff between performance and robustness. By default, step reference % tracking performance displays in the plot.   % % Click the *Show parameters* arrow to view controller parameters P, I, b, % and a set of performance and robustness measurements.  In this example, % the initial PI controller design gives a settling time of 4.4 second, % which meets the requirement.     %%  % The following figure shows the PID Tuner dialog with initial design: % % <<../html_extra/scdcstrctrlpidblock/pid_initialtuner.png>> %% % To test the initial design on the nonlinear model, click *Apply* in the % PID Tuner.  This writes the parameters back to the PID block in the % Simulink model.  Run a simulation and view the closed-loop response:   %% % <<../html_extra/scdcstrctrlpidblock/pid_analysisresp1.png>> %% % The transient response of disturbance rejection shows that its peak % deviation is about 0.2, which exceeds the design requirement. You need to % reduce the peak deviation by at least 50% using the PID Tuner.      %% Design for Disturbance Rejection in the Basic Design Mode % The PID Tuner provides step plot for different loop responses such as % reference tracking (from r to y) and controller efforts (from r to u), % etc. In this example since the disturbance occurs at the reactor feed % temperature, the closest plot you can get is the input disturbance % rejection plot that assumes a step disturbance occurs at the input of the % plant model. %%  % The following figure shows the disturbance rejection performance with % initial controller: % % <<../html_extra/scdcstrctrlpidblock/pid_disturbance1.png>> %% % You need to reduce the peak deviation from -0.019 to -0.009 (about 50%). % First, try to reduce the peak deviation using the Basic design mode, % which is the mode selected when the Tuner opens. Move the response time % slider to the right to decrease the response time and make controller % more aggressive.  But you cannot meet the design requirements because % reducing the peak deviation makes the settling time too long. To return % to the initial automated design result, click the |reset| button in the % toolbar that is the last button with green arrow. % % <<../html_extra/scdcstrctrlpidblock/pid_disturbance2.png>>  %% Design for Disturbance Rejection in the Extended Design Mode % In the PID Tuner Extended design mode, you have more flexibility to % adjust controller performance.  You need some knowledge of frequency % domain control design technology to take full advantage of this design % mode.     % % To switch to the Extended design mode, select *Extended* in the *Design % Mode* dropdown menu in the toolbar. %%  % The following figure shows the PID Tuner in Extended design mode with the % initial design:  % % <<../html_extra/scdcstrctrlpidblock/pid_disturbance3.png>> %% % Increasing the bandwidth makes the controller more aggressive and reduces % the peak deviation.  To maintain the settling time of disturbance % rejection below 10 seconds, you also need to reduce the desired phase  % margin.  This is a typical tradeoff between performance and robustness in % controller design.  View the effects of your change in the response plot. % You can move both sliders to reduce the peak deviation to 0.007 while % maintain the settling time within 10 seconds.  One way to achieve this % is: %%  % * Bandwidth of 4 rad/sec % * Phase margin of 25 degree  %%  % The following figure shows disturbance rejection performance:  % % <<../html_extra/scdcstrctrlpidblock/pid_disturbance4.png>> %% % To test the new design on the nonlinear model, click *Apply* in the PID % Tuner.  Run a simulation and view the closed-loop response: %% % <<../html_extra/scdcstrctrlpidblock/pid_analysisresp2.png>> %% % The disturbance rejection performance satisfies the requirements. % However, because the controller is very aggressive, the overshoot of % reference tracking exceeds the limit.  You need to adjust the pre-filter % in the 2DOF PID block to improve the reference tracking performance.  %% Completing PID Design with Set-point Weighting % The parameter *b* in an ISA PI or PID controller is the set-point weight % on the reference signal feeding into the proportional gain of the % controller.  It has a range between 0 and 1, and its default value is 1. % By reducing its value, the reference tracking performance becomes % smoother.  In this example, open the PID block dialog and set *b* to 0. % % Because *b* and *P* are changed, you need to adjust the initial condition % of the integrator *I0* in the PID controller block to make sure the % initial operating point is still at equilibrium.  Since the relationship % is % %     I0 = u0 - ((b-1)*y0*P) %  % where *u0* is 300 and *y0* is 1.96.  With *P* from PID Tuner (-153.5) and % *b* from manual adjustment (0), *I0* becomes -0.8267.  Update the initial % condition of the integrator with this value and the simulation will start % at the equilibrium operating point. % % <<../html_extra/scdcstrctrlpidblock/pid_updatedblockdialog.png>> %% % The following figure shows that there is no overshoot in reference % tracking with the updated design.       %% % <<../html_extra/scdcstrctrlpidblock/pid_analysisresp3.png>> %% % In summary, to design a 2DOF PID controller with balanced performance in % reference tracking and disturbance rejection, use the PID Tuner to % achieve good disturbance rejection and then manually adjust set-point % weights *b* and/or *c* in the block dialog to achieve good reference % tracking.  Notice that changing *b* and *c* does not affect closed-loop % stability or disturbance rejection performance. %  bdclose('scdcstrctrlpidblock') displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>