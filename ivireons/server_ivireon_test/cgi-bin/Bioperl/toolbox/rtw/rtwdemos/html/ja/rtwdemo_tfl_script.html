
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>数学関数と演算子の置換</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="rtwdemo_tfl_script.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit rtwdemo_tfl_script">エディターで rtwdemo_tfl_script.m を開く</a></div><div class="right"><a href="matlab:echodemo rtwdemo_tfl_script">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>数学関数と演算子の置換</h1><!--introduction--><p>このデモでは、ターゲット関数ライブラリ (TFL) を使用して、生成されたコードで演算子と関数を置換する方法について説明します。以下で説明されるモデルでは、置換機能を紹介します。各モデルの例では、それぞれターゲット関数ライブラリが示され、<a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_mapi')">MATLAB&reg; ベースの API</a> を使用した演算子と関数の置換の作成方法、および Simulink&reg; を使用して<a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_registration')">これらを登録する方法</a>について説明します。</p><p>ターゲット関数ライブラリを使用すると、次のことが可能になります。</p><div><ul><li>モデル コードと、外部コードおよびレガシ コードとの優れた統合。コード サイズと検証の労力が削減されます。</li><li>ターゲット固有の関数実装の使用。組み込みアプリケーションのパフォーマンスを最適化します。</li></ul></div><p>ターゲット関数ライブラリの機能を次に示します。</p><div><ul><li>数学関数をターゲット固有の関数実装で置換</li><li>数学演算子をターゲット固有の関数実装で置換</li><li>生成されたコードで置換をコンパイルおよびビルドするためのビルド情報の指定</li></ul></div><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">ターゲット関数ライブラリを使用する手順</a></li><li><a href="#2">組み込み整数の演算子置換の加算と減算</a></li><li><a href="#3">組み込み整数の演算子置換の乗算と除算</a></li><li><a href="#4">基本的な演算子における固定小数点演算子の置換</a></li><li><a href="#5">Embedded MATLAB Coder における演算子置換の加算と減算</a></li><li><a href="#6">ターゲット関数ライブラリを使用するための Embedded MATLAB Coder の設定</a></li><li><a href="#7">C ソース ファイルへの MATLAB プログラムのコンパイル</a></li><li><a href="#8">Embedded MATLAB Coder で生成されたコードの検査</a></li><li><a href="#9">数学関数の置換</a></li><li><a href="#10">行列演算子の置換</a></li><li><a href="#11">BLAS サポート</a></li><li><a href="#12">その他のスカラー演算子の置換</a></li><li><a href="#13">カスタム TFL エントリ</a></li><li><a href="#14">ターゲット関数ライブラリ用のビューアー</a></li><li><a href="#16">ビルド サポート</a></li><li><a href="#17">予約識別子のサポート</a></li><li><a href="#18">ターゲット関数ライブラリの例の削除</a></li></ul></div><h2>ターゲット関数ライブラリを使用する手順<a name="1"></a></h2><div><ul><li>置換関数エントリのテーブルを作成します。</li><li>Simulink の sl_customization.m API を使用して 1 つまたは複数のテーブルから構成されるターゲット関数ライブラリを登録します。</li><li>Real-Time Workshop&reg; の下にある [コンフィギュレーションパラメーター] ダイアログボックスの [インターフェイス] ペインを使用して、目的のターゲット関数ライブラリをモデルから選択します。</li><li>Real-Time Workshop Embedded Coder™ を使用してモデルのコードを生成します。</li></ul></div><p>これらの手順の詳細は、<a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_overview')">こちらを参照</a>してください。</p><h2>組み込み整数の演算子置換の加算と減算<a name="2"></a></h2><p>この例では、ターゲット関数ライブラリは、2 つの入力の '+' と '-' (組み込み整数であるデータ型のスカラー演算) を置換します。</p><div><ul><li>int8、uint8</li><li>int16、uint16</li><li>int32、uint32</li></ul></div><p>モデル <a href="matlab:rtwdemo_tfladdsub">rtwdemo_tfladdsub</a> は、これらの置換を示しています。演算子置換の詳細は、<a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_operators')">こちらを参照</a>してください。</p><pre class="codeinput">open_system(<span class="string">'rtwdemo_tfladdsub'</span>)
</pre><img vspace="5" hspace="5" src="../rtwdemo_tfl_script_01.png" alt=""> <h2>組み込み整数の演算子置換の乗算と除算<a name="3"></a></h2><p>この例では、ターゲット関数ライブラリは、2 つの入力の '*' と '/' (組み込み整数であるデータ型のスカラー演算) を置換します。</p><div><ul><li>int8、uint8</li><li>int16、uint16</li><li>int32、uint32</li></ul></div><p>モデル <a href="matlab:rtwdemo_tflmuldiv">rtwdemo_tflmuldiv</a> は、これらの置換を示しています。</p><pre class="codeinput">open_system(<span class="string">'rtwdemo_tflmuldiv'</span>)
</pre><img vspace="5" hspace="5" src="../rtwdemo_tfl_script_02.png" alt=""> <h2>基本的な演算子における固定小数点演算子の置換<a name="4"></a></h2><p>この例で、ターゲット関数ライブラリは、2 つの入力の '+'、'-' 、'*'、および '/' (固定小数点であるデータ型のスカラー演算) を置換します。置換は、次の項目の一致として定義できます。</p><div><ul><li>入力と出力における特定のスロープ スケーリング/バイアス スケーリングの組み合わせ</li><li>入力と出力における特定の 2 進小数点スケーリングの組み合わせ</li><li>入力と出力間の相対的なスケーリング</li><li>入力と出力全体で同じスロープ値とゼロの正味バイアス</li></ul></div><p>モデル <a href="matlab:rtwdemo_tflfixpt">rtwdemo_tflfixpt</a> は、これらの置換を示しています。</p><p><b>メモ:</b> モデルで固定小数点データ型を使用するには、Simulink Fixed Point のライセンスが必要です。</p><pre class="codeinput">open_system(<span class="string">'rtwdemo_tflfixpt'</span>)
</pre><img vspace="5" hspace="5" src="../rtwdemo_tfl_script_03.png" alt=""> <h2>Embedded MATLAB Coder における演算子置換の加算と減算<a name="5"></a></h2><p>この例では、ターゲット関数ライブラリは、2 つの入力の '+' と '-' (<tt>emlc</tt> コマンドを使用する際の整数データ型のスカラー演算) を置換します。</p><p>演算子置換の詳細は、<a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_operators')">こちらを参照</a>してください。Embedded MATLAB Coder を使用して組み込み可能な C コードを生成する方法の詳細は、<a href="matlab:helpview(fullfile(docroot,'toolbox','rtw','helptargets.map'),'working_with_emlc_chapter')">こちらを参照</a>してください。</p><p>このデモを実行するには MATLAB プログラムが必要です。このファイルを一時ディレクトリにコピーします。この手順では、システムの一時ディレクトリへの書き込み権限が必要です。</p><p>MATLAB ファイルを表示するには、<a href="matlab:edit(fullfile(matlabroot,'toolbox','rtw','rtwdemos','tfl_demo','addsub_two_int16.m'))">こちらを参照</a>してください。</p><pre class="codeinput">emlcdir = [tempname filesep <span class="string">'emlcdir'</span>];
<span class="keyword">if</span> ~exist(emlcdir,<span class="string">'dir'</span>)
    mkdir(emlcdir);
<span class="keyword">end</span>
emlcsrc = <span class="keyword">...</span>
    fullfile(matlabroot,<span class="string">'toolbox'</span>,<span class="string">'rtw'</span>,<span class="string">'rtwdemos'</span>,<span class="string">'tfl_demo'</span>,<span class="string">'addsub_two_int16.m'</span>);
copyfile(emlcsrc,emlcdir,<span class="string">'f'</span>);
emlcurdir = pwd;
cd(emlcdir);
</pre><h2>ターゲット関数ライブラリを使用するための Embedded MATLAB Coder の設定<a name="6"></a></h2><p>RTW ビルドのコンフィギュレーションパラメーターを設定し、演算入力データ型を定義します。TFL テーブルの定義ファイルを表示するには、<a href="matlab:edit(fullfile(matlabroot,'toolbox','rtw','rtwdemos','tfl_demo','tfl_table_addsub.m'))">こちらを参照</a>してください。</p><pre class="codeinput">addpath(fullfile(matlabroot,<span class="string">'toolbox'</span>,<span class="string">'rtw'</span>,<span class="string">'rtwdemos'</span>,<span class="string">'tfl_demo'</span>));
sl_refresh_customizations;
rtwConfig = emlcoder.RTWConfig(<span class="string">'ert'</span>);
rtwConfig.TargetFunctionLibrary = <span class="string">'Addition &amp; Subtraction Examples'</span>;
rtwConfig.GenerateReport = false;
rtwConfig.LaunchReport = false;

t = int16(2);
</pre><h2>C ソース ファイルへの MATLAB プログラムのコンパイル<a name="7"></a></h2><p>目的のターゲット関数ライブラリを参照するコンフィギュレーション パラメーターと、<tt>emlc</tt> コマンドへの入力パラメーターとして前述の手順で定義された入力クラスの例を使用して MATLAB プログラムをコンパイルします。</p><pre class="codeinput">emlc <span class="string">-T</span> <span class="string">rtw</span> <span class="string">-s</span> <span class="string">rtwConfig</span> <span class="string">-c</span> <span class="string">addsub_two_int16</span> <span class="string">-eg</span> <span class="string">{t, t}</span>;
</pre><h2>Embedded MATLAB Coder で生成されたコードの検査<a name="8"></a></h2><p>コンパイル後は、生成されたソース コードを検査できます。<a href="matlab:edit(fullfile(emlcdir,'emcprj','rtwlib','addsub_two_int16','addsub_two_int16.c'))">matlab:edit(fullfile(emlcdir,'emcprj','rtwlib','addsub_two_int16','addsub_two_int16.c'))</a></p><h2>数学関数の置換<a name="9"></a></h2><p>ターゲット関数ライブラリでは、さまざまな関数の置換がサポートされています。サポートされている関数の一覧については、<a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_supportedfcns')">こちらを参照</a>してください。</p><p>モデル <a href="matlab:rtwdemo_tflmath">rtwdemo_tflmath</a> は、これらの置換を示しています。数学関数の置換の詳細は、<a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_mathfcns')">こちらを参照</a>してください。</p><pre class="codeinput">cd(emlcurdir);
open_system(<span class="string">'rtwdemo_tflmath'</span>)
</pre><img vspace="5" hspace="5" src="../rtwdemo_tfl_script_04.png" alt=""> <h2>行列演算子の置換<a name="10"></a></h2><p>ターゲット関数ライブラリでは、次の行列演算の置換がサポートされています。</p><p>addition、subtraction、multiplication、transposition、conjugate、hermitian</p><p>モデル <a href="matlab:rtwdemo_tflmatops">rtwdemo_tflmatops</a> は、これらの置換の一部を示しています。サポートされているデータ型は、以下のとおりです。</p><div><ul><li>single、double</li><li>int8、uint8</li><li>int16、uint16</li><li>int32、uint32</li><li>csingle、cdouble</li><li>cint8、cuint8</li><li>cint16、cuint16</li><li>cint32、cuint32</li><li>固定小数点整数</li><li>混合データ型 (入力ごとに異なるデータ型)</li></ul></div><p><a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_matops')">こちらを参照</a>してください。</p><pre class="codeinput">open_system(<span class="string">'rtwdemo_tflmatops'</span>)
</pre><img vspace="5" hspace="5" src="../rtwdemo_tfl_script_05.png" alt=""> <h2>BLAS サポート<a name="11"></a></h2><p>また、行列の乗算は Basic Linear Algebra Subroutines (BLAS) にマップできます。以下の演算は、BLAS サブルーチンにマップできます。</p><p>行列の乗算、1 つまたは両方の入力の転置を使用した行列の乗算、1 つまたは両方の入力のエルミート演算を使用した行列の乗算</p><p>モデル <a href="matlab:rtwdemo_tflblas">rtwdemo_tflblas</a> は、BLAS xGEMM と xGEMV サブルーチンへのマッピングを示しています。</p><pre class="codeinput">open_system(<span class="string">'rtwdemo_tflblas'</span>)
</pre><img vspace="5" hspace="5" src="../rtwdemo_tfl_script_06.png" alt=""> <h2>その他のスカラー演算子の置換<a name="12"></a></h2><p>ターゲット関数ライブラリでは、次のスカラー演算の置換がサポートされています。</p><p>複雑な演算には、加算、減算、乗算、除算、複素共役があります。その他のスカラー演算には、データ型のキャスト、左シフト、算術の右シフト、論理の右シフトがあります。</p><p>モデル <a href="matlab:rtwdemo_tflscalarops">rtwdemo_tflscalarops</a> は、これらの置換の一部を示しています。サポートされているデータ型は、以下のとおりです。</p><div><ul><li>single、double</li><li>int8、uint8</li><li>int16、uint16</li><li>int32、uint32</li><li>csingle、cdouble</li><li>cint8、cuint8</li><li>cint16、cuint16</li><li>cint32、cuint32</li><li>固定小数点整数</li><li>混合データ型 (入力ごとに異なるデータ型)</li></ul></div><p><a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_operators')">こちらを参照してください。</a></p><pre class="codeinput">open_system(<span class="string">'rtwdemo_tflscalarops'</span>)
</pre><img vspace="5" hspace="5" src="../rtwdemo_tfl_script_07.png" alt=""> <h2>カスタム TFL エントリ<a name="13"></a></h2><p>TFL では、カスタム エントリの作成がサポートされています。RTW.TflCFunctionEntryML または RTW.TflCOperationEntryML のいずれかからサブクラス化することによって独自の TFL エントリを作成できます。エントリクラスは、一致するロジックをカスタマイズする、または一致したエントリを変更する do_match メソッドを実装する必要があります。do_match は、あらかじめ設定された固定のシグネチャを持つ必要があります。モデル <a href="matlab:rtwdemo_tflcustomentry">rtwdemo_tflcustomentry</a> は、カスタム エントリを使用して独自の一致する関数を作成する方法、および追加の実装関数の引数として定数を挿入することによって一致したエントリを変更する方法を示しています。カスタム TFL エントリの詳細は、<a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_customentry')">こちらを参照</a>してください。</p><pre class="codeinput">open_system(<span class="string">'rtwdemo_tflcustomentry'</span>)
</pre><img vspace="5" hspace="5" src="../rtwdemo_tfl_script_08.png" alt=""> <h2>ターゲット関数ライブラリ用のビューアー<a name="14"></a></h2><p>テーブルとそのエントリを検証するためにビューアーが提供されています。たとえば、テーブル 'tfl_tablemuldiv' を表示する場合、コマンドは次のようになります。</p><pre class="codeinput">tfl = tfl_table_muldiv;
me = RTW.viewTfl(tfl);
</pre><p>ターゲット関数ライブラリのビューアーの詳細は、<a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_viewer')">こちらを参照</a>してください。</p><h2>ビルド サポート<a name="16"></a></h2><p>ターゲット関数ライブラリの各エントリでは、次のようなビルド情報を指定できます。</p><div><ul><li>ヘッダー ファイルの依存関係</li><li>ソース ファイルの依存関係</li><li>追加のインクルードパス</li><li>追加のソースパス</li><li>追加のリンクフラグ</li></ul></div><p>さらに、メソッド RTW.copyFileToBuildDir を使用して、エントリによって指定されたソース ファイルとヘッダー ファイルをローカルでコピーできます。コンパイル情報の指定方法の詳細は、<a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_buildsupport')">こちらを参照</a>してください。</p><p><b>メモ:</b> このデモのモデルはコード生成用にのみ設定されているため、置換関数の実装は提供されません。</p><h2>予約識別子のサポート<a name="17"></a></h2><p>エントリによって定義される各関数の実装は、一意の識別子として予約されます。その他の識別子は、ヘッダー ファイルごとにテーブルで指定できます。追加の予約識別子を指定すると、重複するシンボルやその他の識別子関連のコンパイルとリンクの問題の発生を防ぐことができます。</p><p>予約識別子の指定方法の詳細は、<a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_identifiers')">こちらを参照</a>してください。</p><h2>ターゲット関数ライブラリの例の削除<a name="18"></a></h2><p>モデルの例の利用が終了したら、次のコマンドを使用してターゲット関数ライブラリの例を削除し、モデルの例を終了することができます。</p><pre class="codeinput">rmpath(fullfile(matlabroot,<span class="string">'toolbox'</span>,<span class="string">'rtw'</span>,<span class="string">'rtwdemos'</span>,<span class="string">'tfl_demo'</span>));
sl_refresh_customizations;

close_system(<span class="string">'rtwdemo_tfladdsub'</span>, 0)
close_system(<span class="string">'rtwdemo_tflmuldiv'</span>, 0)
close_system(<span class="string">'rtwdemo_tflfixpt'</span>, 0)
close_system(<span class="string">'rtwdemo_tflmath'</span>, 0)
close_system(<span class="string">'rtwdemo_tflmatops'</span>, 0)
close_system(<span class="string">'rtwdemo_tflblas'</span>, 0)
close_system(<span class="string">'rtwdemo_tflscalarops'</span>, 0)
close_system(<span class="string">'rtwdemo_tflcblas'</span>, 0)
<span class="keyword">if</span> ~isempty(me)
    me.delete;
<span class="keyword">end</span>
clear <span class="string">tfl</span>;
clear <span class="string">me</span>;
clear <span class="string">emlcdir</span>;
clear <span class="string">emlcsrc</span>;
clear <span class="string">emlcurdir</span>;
clear <span class="string">n1</span>;
clear <span class="string">rtwConfig</span>;
clear <span class="string">t</span>;
</pre><p class="footer">Copyright 2007-2010 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Replacing Math Functions and Operators % This demo shows you how to use target function libraries (TFLs) to  % replace operators and functions in the generated code. The models  % described below demonstrate the replacement capabilities. With each  % example model, a separate target function library is provided to  % illustrate the creation of operator and function replacements using a  % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_mapi') MATLAB(R) based API> % and how to  % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_registration') register them> % with Simulink(R). % % Using target function libraries enables: % % * Better integration of model code with external and legacy code, to  %   reduce code size and verification efforts % * The use of target specific function implementations, to optimize  %   performance of the embedded application % % The target function library capabilities include: % % * Replacement of math functions with target specific function  %   implementations % * Replacement of math operations with target specific function  %   implementations % * Specifying build information for compiling and building the  %   replacements with the generated code  %   Copyright 2007-2010 The MathWorks, Inc. %   $Revision: 1.1.4.2.2.1 $  $Date: 2010/07/29 21:29:02 $   %% Steps in Using a Target Function Library % % * Create a table of replacement function entries % * Register a target function library consisting of one or more tables  %   using Simulink's sl_customization.m API % * From the model, select the desired target function library using the %   Interface pane under Real-Time Workshop(R) in the Configuration Parameters %   dialog box % * Generate code for the model with Real-Time Workshop Embedded Coder(TM) % % For more information on these steps, % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_overview') look here>.  %% Addition and Subtraction Operator Replacement for Built-in Integers % This example target function library replaces '+' and '-' for two input,  % scalar operations on data types that are built-in integers: % % * int8, uint8 % * int16, uint16 % * int32, uint32 % % The model <matlab:rtwdemo_tfladdsub rtwdemo_tfladdsub>  % demonstrates these replacements. For more information on operator  % replacement,  % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_operators') look here>. open_system('rtwdemo_tfladdsub')  %% Multiplication and Division Operator Replacement for Built-in Integers % This example target function library replaces '*' and '/' for two input,  % scalar operations on data types that are built-in integers: % % * int8, uint8 % * int16, uint16 % * int32, uint32 % % The model <matlab:rtwdemo_tflmuldiv rtwdemo_tflmuldiv> demonstrates these  % replacements. open_system('rtwdemo_tflmuldiv')  %% Fixed Point Operator Replacement for Basic Operators % This example target function library replaces '+', '-', '*' and '/' for  % two input, scalar operations on data types that are fixed point.  % Replacements can be defined as matching: % % * A specific slope/bias scaling combination on the inputs and output % * A specific binary point scaling combination on the inputs and output % * A relative scaling between the inputs and output % * The same slope value and a zero net bias across the inputs and output % % The model <matlab:rtwdemo_tflfixpt rtwdemo_tflfixpt> demonstrates these  % replacements. % % *Note:* Using fixed point data types in a model requires a Simulink Fixed % Point license. open_system('rtwdemo_tflfixpt')  %% Addition and Subtraction Operator Replacement in Embedded MATLAB Coder % This example target function library replaces '+' and '-' for two input,  % scalar operations on integer data types when using the |emlc| command. % % For more information on operator replacement,  % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_operators') look here>. % For more information on embeddable C-code generation using Embedded  % MATLAB Coder, <matlab:helpview(fullfile(docroot,'toolbox','rtw','helptargets.map'),'working_with_emlc_chapter') look here>. % % There is a MATLAB program that is needed to run this demonstration. Copy it to % a temporary directory. This step requires write-permission to the % system's temporary directory. % % To see the MATLAB file, <matlab:edit(fullfile(matlabroot,'toolbox','rtw','rtwdemos','tfl_demo','addsub_two_int16.m')) look here>. emlcdir = [tempname filesep 'emlcdir']; if ~exist(emlcdir,'dir')     mkdir(emlcdir); end emlcsrc = ...     fullfile(matlabroot,'toolbox','rtw','rtwdemos','tfl_demo','addsub_two_int16.m'); copyfile(emlcsrc,emlcdir,'f'); emlcurdir = pwd; cd(emlcdir);  %% Set Embedded MATLAB Coder to Use the Target Function Library % Set up the configuration parameters for an RTW build and define the  % operation input type. % To see the TFL table definition file, <matlab:edit(fullfile(matlabroot,'toolbox','rtw','rtwdemos','tfl_demo','tfl_table_addsub.m')) look here>. addpath(fullfile(matlabroot,'toolbox','rtw','rtwdemos','tfl_demo')); sl_refresh_customizations; rtwConfig = emlcoder.RTWConfig('ert'); rtwConfig.TargetFunctionLibrary = 'Addition & Subtraction Examples'; rtwConfig.GenerateReport = false; rtwConfig.LaunchReport = false;  t = int16(2);  %% Compile the MATLAB program into a C Source File % Compile the MATLAB program using the configuration parameters that point to the % desired target function library and the example input class defined in the % previous step as input parameters to the |emlc| command. emlc -T rtw -s rtwConfig -c addsub_two_int16 -eg {t, t};  %% Inspect the Embedded MATLAB Coder Generated Code % After compiling, you may want to explore the generated source code. % <matlab:edit(fullfile(emlcdir,'emcprj','rtwlib','addsub_two_int16','addsub_two_int16.c'))>  %% Math Function Replacement  % Target function libraries support the replacement of a variety of  % functions. For a full list of supported functions % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_supportedfcns') look here>. % % The model <matlab:rtwdemo_tflmath rtwdemo_tflmath> demonstrates these  % replacements. % For more information on math function replacement,  % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_mathfcns') look here>. cd(emlcurdir); open_system('rtwdemo_tflmath')  %% Matrix Operator Replacement  % Target function libraries support replacement of the following matrix % operations: %  % addition, subtraction, multiplication,transposition, conjugate, hermitian % % The model <matlab:rtwdemo_tflmatops rtwdemo_tflmatops> demonstrates some  % of these replacements. Supported types include: % % * single, double % * int8, uint8 % * int16, uint16 % * int32, uint32 % * csingle, cdouble % * cint8, cuint8 % * cint16, cuint16 % * cint32, cuint32 % * fixed-point integers % * mixed types (different type on each input) % % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_matops') look here>. open_system('rtwdemo_tflmatops')  %% BLAS Support  % In addition, matrix multiplication can be mapped to Basic Linear Algebra  % Subroutines (BLAS).The following operations can be mapped to a BLAS Subroutine: %  % matrix multiplication, matrix multiplication with transpose on single or both inputs,  % and matrix multiplication with hermitian operation on single or both inputs % % The model <matlab:rtwdemo_tflblas rtwdemo_tflblas> % demonstrates mapping to BLAS xGEMM and xGEMV subroutines. open_system('rtwdemo_tflblas')  %% Other Scalar Operator Replacements  % Target function libraries support replacement of the following scalar % operations: %  % Complex operations including - addition, subtraction, multiplication, division, and complex conjugate  % Other scalar operations including - data type cast, shift left, arithmetic shift right, logical shift right % % The model <matlab:rtwdemo_tflscalarops rtwdemo_tflscalarops> demonstrates some  % of these replacements. Supported types include: % % * single, double % * int8, uint8 % * int16, uint16 % * int32, uint32 % * csingle, cdouble % * cint8, cuint8 % * cint16, cuint16 % * cint32, cuint32 % * fixed-point integers % * mixed types (different type on each input) % % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_operators') look here> open_system('rtwdemo_tflscalarops')  %% Custom TFL Entry % TFLs support the creation of custom entries.  You can create your own % TFL entry by subclassing from either RTW.TflCFunctionEntryML or % RTW.TflCOperationEntryML. Your entry class must implement a do_match % method that customizes your matching logic or modifies the matched entry.  % The do_match method must have a fixed preset signature.   % The model <matlab:rtwdemo_tflcustomentry rtwdemo_tflcustomentry>  % demonstrates how to use custom entries to create your own  % matching function and how to modify the matched entry by injecting constants  % as additional implementation function arguments.  % For more information on Custom TFL entries, % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_customentry') look here>. open_system('rtwdemo_tflcustomentry')  %% Viewer for Target Function Libraries % A viewer is provided for examining and validating tables and % their entries. For example, to view the table 'tfl_tablemuldiv', the  % commands are: tfl = tfl_table_muldiv; me = RTW.viewTfl(tfl);  %% % For more information on the target function library viewer, % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_viewer') look here>.  %% Build Support % Each entry in a target function library table can specify build  % information such as: % % * Header file dependencies % * Source file dependencies % * Additional include paths % * Additional source paths % * Additional link flags %  % Additionally, the method RTW.copyFileToBuildDir can be used to locally  % copy the source and header files specified by an entry. For more  % information on specifying compilation information,  % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_buildsupport') look here>. % % *Note:* The models in this demo are configured for code generation only,  % as the implementations for the replacement functions are not provided.  %% Reserved Identifier Support % Each function implementation name defined by a entry will be reserved as  % a unique identifier. Other identifiers can be specified with a table on a % per-header-file basis. Providing additional reserved identifiers ensures  % that duplicate symbols and other identifier related compile and link  % issues do not occur. % % For more information on specifying reserved identifiers,  % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'tfl_identifiers') look here>.  %% Removing the Example Target Function Libraries % Once finished using the example models, you can remove the example target  % function libraries and close the example models with the commands:  rmpath(fullfile(matlabroot,'toolbox','rtw','rtwdemos','tfl_demo')); sl_refresh_customizations;  close_system('rtwdemo_tfladdsub', 0) close_system('rtwdemo_tflmuldiv', 0) close_system('rtwdemo_tflfixpt', 0) close_system('rtwdemo_tflmath', 0) close_system('rtwdemo_tflmatops', 0) close_system('rtwdemo_tflblas', 0) close_system('rtwdemo_tflscalarops', 0) close_system('rtwdemo_tflcblas', 0) if ~isempty(me)     me.delete; end clear tfl; clear me; clear emlcdir; clear emlcsrc; clear emlcurdir; clear n1; clear rtwConfig; clear t;  displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>