
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Switching Model Representation</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-06-29"><meta name="DC.source" content="GSModelTypeConversions.m"><link rel="stylesheet" type="text/css" href="../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit GSModelTypeConversions">Open GSModelTypeConversions.m in the Editor</a></div><div class="right"><a href="matlab:echodemo GSModelTypeConversions">Run in the Command Window</a></div></div><div class="content"><h1>Switching Model Representation</h1><!--introduction--><p>This demo shows how to switch between the transfer function (TF), zero-pole-gain (ZPK), state-space (SS), and frequency response data (FRD) representations of LTI systems.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Model Type Conversions</a></li><li><a href="#7">Implicit Type Casting</a></li><li><a href="#9">Caution About Switching Back and Forth Between Representations</a></li></ul></div><h2>Model Type Conversions<a name="1"></a></h2><p>You can convert models from one representation to another using the same commands that you use for constructing LTI models (<tt>tf</tt>, <tt>zpk</tt>, <tt>ss</tt>, and <tt>frd</tt>). For example, you can convert the state-space model:</p><pre class="codeinput">sys = ss(-2,1,1,3);
</pre><p>to a zero-pole-gain model by typing:</p><pre class="codeinput">zpksys = zpk(sys)
</pre><pre class="codeoutput"> 
Zero/pole/gain:
3 (s+2.333)
-----------
   (s+2)
 
</pre><p>Similarly, you can calculate the transfer function of <tt>sys</tt> by typing:</p><pre class="codeinput">tf(sys)
</pre><pre class="codeoutput"> 
Transfer function:
3 s + 7
-------
 s + 2
 
</pre><p>Conversions to FRD require a frequency vector:</p><pre class="codeinput">f = logspace(-2,2,10);
frdsys = frd(sys,f)
</pre><pre class="codeoutput"> 
  Frequency(rad/s)        Response    
  ----------------        --------    
        0.0100        3.5000 - 0.0025i
        0.0278        3.4999 - 0.0070i
        0.0774        3.4993 - 0.0193i
        0.2154        3.4943 - 0.0532i
        0.5995        3.4588 - 0.1375i
        1.6681        3.2949 - 0.2459i
        4.6416        3.0783 - 0.1817i
       12.9155        3.0117 - 0.0756i
       35.9381        3.0015 - 0.0277i
      100.0000        3.0002 - 0.0100i
 
Continuous-time frequency response.
</pre><p>Note that FRD models cannot be converted back to the TF, ZPK, or SS representations (such conversion requires the frequency-domain identification tools available in System Identification).</p><p>All model type conversion paths are summarized in the diagram below.</p><p><img vspace="5" hspace="5" src="../Figures/GSModelTypeConversions_Fig01.png" alt=""> </p><h2>Implicit Type Casting<a name="7"></a></h2><p>Some commands expect a specific type of LTI model.  For convenience, such commands automatically convert incoming LTI models to the appropriate representation. For example, in the sample code:</p><pre class="codeinput">sys = ss(0,1,1,0);
[num,den] = tfdata(sys,<span class="string">'v'</span>)
</pre><pre class="codeoutput">
num =

     0     1


den =

     1     0

</pre><p>the function <tt>tfdata</tt> automatically converts the state-space model <tt>sys</tt> to an equivalent transfer function  to obtain its numerator and denominator data.</p><h2>Caution About Switching Back and Forth Between Representations<a name="9"></a></h2><p>Conversions between the TF, ZPK, and SS representations involve numerical computations and can incur loss of accuracy when overused. Because the SS and FRD representations are best suited for numerical computations, it is good practice to convert all models to SS or FRD and only use the TF and ZPK representations for construction or display purposes.</p><p>For example, convert the ZPK model</p><pre class="codeinput">G = zpk([],ones(10,1),1,0.1)
</pre><pre class="codeoutput"> 
Zero/pole/gain:
   1
--------
(z-1)^10
 
Sampling time: 0.1
</pre><p>to TF and then back to ZPK:</p><pre class="codeinput">G1 = zpk(tf(G));
</pre><p>Now compare the pole locations for <tt>G</tt> and <tt>G1</tt>:</p><pre class="codeinput">G1 = zpk(tf(G));
pzmap(G,<span class="string">'b'</span>,G1,<span class="string">'r'</span>)
axis([0.5 1.5 -0.4 0.4])
legend(<span class="string">'G'</span>,<span class="string">'G1'</span>)
</pre><img vspace="5" hspace="5" src="GSModelTypeConversions_01.png" alt=""> <p>Observe how the pole of multiplicity 10 at <tt>z=1</tt> in <tt>G</tt> is replaced by a cluster of poles in <tt>G1</tt>. This occurs because the poles of <tt>G1</tt> are computed as the roots of the polynomial</p><p><img src="GSModelTypeConversions_eq62857.png" alt="$$ (z-1)^{10} = z^{10} - 10 z^9 + 45 z^8 - 120 z^7 + 210 z^6 - 252 z^5 + 210&#xA;z^4 - 120 z^3 + 45 z^2 - 10 z + 1 $$"></p><p>and an <tt>o(eps)</tt> error on the last coefficient of this polynomial is enough to move the roots by</p><p><img src="GSModelTypeConversions_eq30543.png" alt="$$ o( \epsilon ^{1/10}) = o(3 \times 10^{-2}) . $$"></p><p>In other words, the transfer function representation is not accurate enough to capture the system behavior near z=1, which is also visible in the Bode plot of <tt>G</tt> vs. <tt>G1</tt>:</p><pre class="codeinput">bode(G,<span class="string">'b'</span>,G1,<span class="string">'r--'</span>), grid
legend(<span class="string">'G'</span>,<span class="string">'G1'</span>)
</pre><img vspace="5" hspace="5" src="GSModelTypeConversions_02.png" alt=""> <p>This illustrates why you should avoid unnecessary model conversions.</p><p class="footer">Copyright 1986-2007 The MathWorks, Inc.<br>
          Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!--
##### SOURCE BEGIN #####
%% Switching Model Representation
% This demo shows how to switch between the transfer function (TF),
% zero-pole-gain (ZPK), state-space (SS), and frequency response data (FRD)
% representations of LTI systems.

%   Copyright 1986-2007 The MathWorks, Inc.
%   $Revision: 1.1.6.6 $  $Date: 2007/06/07 14:34:56 $

%% Model Type Conversions
% You can convert models from one representation to another using the same
% commands that you use for constructing LTI models (|tf|, |zpk|, |ss|, and
% |frd|). For example, you can convert the state-space model:
sys = ss(-2,1,1,3);

%% 
% to a zero-pole-gain model by typing:
zpksys = zpk(sys)

%% 
% Similarly, you can calculate the transfer function of |sys| by typing:
tf(sys)

%%
% Conversions to FRD require a frequency vector:
f = logspace(-2,2,10);
frdsys = frd(sys,f)

%%
% Note that FRD models cannot be
% converted back to the TF, ZPK, or SS representations (such conversion 
% requires the frequency-domain identification tools available in
% System Identification).

%%
% All model type conversion paths are summarized in the diagram below.
%
% <<../Figures/GSModelTypeConversions_Fig01.png>>

%% Implicit Type Casting
% Some commands expect a specific type of LTI model.  For convenience,
% such commands automatically convert incoming LTI models to the appropriate representation.  
% For example, in the sample code:
sys = ss(0,1,1,0);
[num,den] = tfdata(sys,'v')

%%
% the function |tfdata| automatically converts the state-space model |sys| to an
% equivalent transfer function  to obtain its numerator and denominator data.

%% Caution About Switching Back and Forth Between Representations
% Conversions between the TF, ZPK, and SS representations involve numerical
% computations and can incur loss of accuracy when overused. Because the SS
% and FRD representations are best suited for numerical computations, it is
% good practice to convert all models to SS or FRD and only use 
% the TF and ZPK representations for construction or display purposes.
%
% For example, convert the ZPK model
G = zpk([],ones(10,1),1,0.1)

%%
% to TF and then back to ZPK:
G1 = zpk(tf(G));

%%
% Now compare the pole locations for |G| and |G1|:
G1 = zpk(tf(G));
pzmap(G,'b',G1,'r')
axis([0.5 1.5 -0.4 0.4])
legend('G','G1')

%%
% Observe how the pole of multiplicity 10 at |z=1| in |G| is replaced by a
% cluster of poles in |G1|. This occurs because the poles of
% |G1| are computed as the roots of the polynomial
%
% $$ (z-1)^{10} = z^{10} - 10 z^9 + 45 z^8 - 120 z^7 + 210 z^6 - 252 z^5 + 210
% z^4 - 120 z^3 + 45 z^2 - 10 z + 1 $$
%
% and an |o(eps)| error on the last coefficient of this polynomial is
% enough to move the roots by 
%
% $$ o( \epsilon ^{1/10}) = o(3 \times 10^{-2}) . $$
%
% In other words, the transfer function representation is not accurate enough to capture the
% system behavior near z=1, which is also visible in the Bode plot of |G| vs. |G1|:
bode(G,'b',G1,'rREPLACE_WITH_DASH_DASH'), grid
legend('G','G1')

%%
% This illustrates why you should avoid unnecessary model conversions.

displayEndOfDemoMessage(mfilename)
##### SOURCE END #####
--></body></html>