
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>ボリューム データの可視化</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-26"><meta name="DC.source" content="volvec.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit volvec">エディターで volvec.m を開く</a></div><div class="right"><a href="matlab:echodemo volvec">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>ボリューム データの可視化</h1><!--introduction--><p>この M ファイルを実行して、MATLAB&reg; のボリューム データの可視化のいくつかの例を見てみます。</p><p>ISOSURFACE、STREAMTUBE、STREAMRIBBON、STREAMLINE、CONEPLOT も参照してください。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">MRI データの等値面</a></li><li><a href="#2">風のデータのコーンプロット</a></li><li><a href="#3">風のデータの流線</a></li><li><a href="#4">風のデータのストリームチューブ</a></li><li><a href="#5">風のデータのストリームリボン</a></li><li><a href="#6">風のデータの等値面、等値断面、コーンプロット、流線</a></li></ul></div><h2>MRI データの等値面<a name="1"></a></h2><pre class="codeinput">figure;
colordef(gcf,<span class="string">'black'</span>)
load <span class="string">mri</span>;
D = squeeze(D);
[x y z D] = subvolume(D, [nan nan nan nan nan 4]);
p = patch(isosurface(x,y,z,D, 5), <span class="string">'FaceColor'</span>, <span class="string">'red'</span>, <span class="string">'EdgeColor'</span>, <span class="string">'none'</span>);
p2 = patch(isocaps(x,y,z,D, 5), <span class="string">'FaceColor'</span>, <span class="string">'interp'</span>, <span class="string">'EdgeColor'</span>, <span class="string">'none'</span>);
isonormals(x,y,z,D,p);
view(3);
daspect([1 1 .4])
colormap(gray(100))
camva(9);
box <span class="string">on</span>
camlight(40, 40);
camlight(-20,-10);
lighting <span class="string">gouraud</span>
</pre><img vspace="5" hspace="5" src="../volvec_01.png" alt=""> <h2>風のデータのコーンプロット<a name="2"></a></h2><pre class="codeinput">figure;
colordef(gcf,<span class="string">'black'</span>)
cla
load <span class="string">wind</span>
[cx cy cz] = meshgrid(linspace(71,134,10),linspace(18,59,10),3:4:15);
daspect([1 1 1])
h=coneplot(x,y,z,u,v,w,cx,cy,cz,y,3);
set(h,<span class="string">'EdgeColor'</span>, <span class="string">'none'</span>);
colormap(hsv);
box <span class="string">on</span>;
axis <span class="string">tight</span>
camproj <span class="string">perspective</span>;
camva(35);
campos([175 10 85]);
camtarget([105 40 0])
camlight <span class="string">left</span>;
lighting <span class="string">gouraud</span>
</pre><img vspace="5" hspace="5" src="../volvec_02.png" alt=""> <h2>風のデータの流線<a name="3"></a></h2><pre class="codeinput">figure;
colordef(gcf,<span class="string">'black'</span>)
cla
[sx sy sz] = meshgrid(80, 20:10:50, 0:5:15);
h=streamline(x,y,z,u,v,w,sx,sy,sz);
set(h, <span class="string">'Color'</span>, <span class="string">'cyan'</span>);
daspect([1 1 1])
box <span class="string">on</span>;
camproj <span class="string">perspective</span>;
camva(32);
axis <span class="string">tight</span>
campos([175 10 85]);
camtarget([105 40 0])
camlight <span class="string">left</span>;
lighting <span class="string">gouraud</span>
</pre><img vspace="5" hspace="5" src="../volvec_03.png" alt=""> <h2>風のデータのストリームチューブ<a name="4"></a></h2><p>ベクトル場の発散を可視化するのに役立ちます。</p><pre class="codeinput">figure;
colordef(gcf,<span class="string">'black'</span>)
cla
[sx sy sz] = meshgrid(80, [20 30 40], [5 10]);
daspect([1,1,1]);
h=streamtube(x,y,z,u,v,w,sx,sy,sz);
set(h,<span class="string">'facecolor'</span>,<span class="string">'cyan'</span>,<span class="string">'edgecolor'</span>,<span class="string">'none'</span>);
box <span class="string">on</span>;
camproj <span class="string">perspective</span>;
axis([70 138 17 60 2.5 16]);
axis <span class="string">tight</span>
camva(28);
campos([175 10 95]);
camtarget([105 40 0])
camlight <span class="string">left</span>;
lighting <span class="string">gouraud</span>
</pre><img vspace="5" hspace="5" src="../volvec_04.png" alt=""> <h2>風のデータのストリームリボン<a name="5"></a></h2><p>ベクトル場の回転を可視化するのに役立ちます。</p><pre class="codeinput">figure;
colordef(gcf,<span class="string">'black'</span>)
cla
[sx sy sz] = meshgrid(80, [20 30 40], [5 10]);
daspect([1,1,1]);
h=streamribbon(x,y,z,u,v,w,sx,sy,sz);
set(h,<span class="string">'facecolor'</span>,<span class="string">'cyan'</span>,<span class="string">'edgecolor'</span>,<span class="string">'none'</span>)
box <span class="string">on</span>;
camproj <span class="string">perspective</span>;
axis([70 138 17 60 2.5 16]);
axis <span class="string">tight</span>
camva(28);
campos([175 10 85]);
camtarget([105 40 0])
camlight <span class="string">left</span>;
lighting <span class="string">gouraud</span>
</pre><img vspace="5" hspace="5" src="../volvec_05.png" alt=""> <h2>風のデータの等値面、等値断面、コーンプロット、流線<a name="6"></a></h2><pre class="codeinput">figure;
colordef(gcf,<span class="string">'black'</span>)
cla
spd = sqrt(u.*u + v.*v + w.*w);
p = patch(isosurface(x,y,z,spd, 40));
isonormals(x,y,z,spd, p)
set(p, <span class="string">'FaceColor'</span>, <span class="string">'red'</span>, <span class="string">'EdgeColor'</span>, <span class="string">'none'</span>);
p2 = patch(isocaps(x,y,z,spd, 40));
set(p2, <span class="string">'FaceColor'</span>, <span class="string">'interp'</span>, <span class="string">'EdgeColor'</span>, <span class="string">'none'</span>)
daspect([1 1 1]);
[f verts] = reducepatch(isosurface(x,y,z,spd, 30), .2);
h=coneplot(x,y,z,u,v,w,verts(:,1),verts(:,2),verts(:,3),2);
set(h, <span class="string">'FaceColor'</span>, <span class="string">'cyan'</span>, <span class="string">'EdgeColor'</span>, <span class="string">'none'</span>);
[sx sy sz] = meshgrid(80, 20:10:50, 0:5:15);
h2=streamline(x,y,z,u,v,w,sx,sy,sz);
set(h2, <span class="string">'Color'</span>, [.4 1 .4]);
colormap(jet)
box <span class="string">on</span>
axis <span class="string">tight</span>
camproj <span class="string">perspective</span>;
camva(34);
campos([165 -20 65]);
camtarget([100 40 -5])
camlight <span class="string">left</span>;
lighting <span class="string">gouraud</span>
</pre><img vspace="5" hspace="5" src="../volvec_06.png" alt=""> <p class="footer">Copyright 1984-2009 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Volume Visualization % Run this M-file to see several examples of volume  % visualization in MATLAB(R). % % See also ISOSURFACE, STREAMTUBE, STREAMRIBBON, %          STREAMLINE, CONEPLOT.  % Copyright 1984-2009 The MathWorks, Inc. % $Revision: 1.1.4.8.2.1 $  $Date: 2010/07/29 21:28:55 $  %% Isosurface of MRI Data  figure; colordef(gcf,'black') load mri; D = squeeze(D); [x y z D] = subvolume(D, [nan nan nan nan nan 4]); p = patch(isosurface(x,y,z,D, 5), 'FaceColor', 'red', 'EdgeColor', 'none'); p2 = patch(isocaps(x,y,z,D, 5), 'FaceColor', 'interp', 'EdgeColor', 'none'); isonormals(x,y,z,D,p); view(3); daspect([1 1 .4]) colormap(gray(100)) camva(9); box on camlight(40, 40); camlight(-20,-10); lighting gouraud  %% Coneplot of Wind Data figure; colordef(gcf,'black') cla load wind [cx cy cz] = meshgrid(linspace(71,134,10),linspace(18,59,10),3:4:15); daspect([1 1 1]) h=coneplot(x,y,z,u,v,w,cx,cy,cz,y,3); set(h,'EdgeColor', 'none'); colormap(hsv); box on; axis tight camproj perspective; camva(35); campos([175 10 85]); camtarget([105 40 0]) camlight left; lighting gouraud  %% Streamlines of Wind Data figure; colordef(gcf,'black') cla [sx sy sz] = meshgrid(80, 20:10:50, 0:5:15); h=streamline(x,y,z,u,v,w,sx,sy,sz); set(h, 'Color', 'cyan'); daspect([1 1 1]) box on; camproj perspective; camva(32); axis tight campos([175 10 85]); camtarget([105 40 0]) camlight left; lighting gouraud  %% Streamtubes of Wind Data % Useful for visualizing divergence of a vector field figure; colordef(gcf,'black') cla [sx sy sz] = meshgrid(80, [20 30 40], [5 10]); daspect([1,1,1]); h=streamtube(x,y,z,u,v,w,sx,sy,sz); set(h,'facecolor','cyan','edgecolor','none'); box on; camproj perspective; axis([70 138 17 60 2.5 16]); axis tight camva(28); campos([175 10 95]); camtarget([105 40 0]) camlight left; lighting gouraud  %% Streamribbons of Wind Data % Useful for visualizing curl of a vector field figure; colordef(gcf,'black') cla [sx sy sz] = meshgrid(80, [20 30 40], [5 10]); daspect([1,1,1]); h=streamribbon(x,y,z,u,v,w,sx,sy,sz); set(h,'facecolor','cyan','edgecolor','none') box on; camproj perspective; axis([70 138 17 60 2.5 16]); axis tight camva(28); campos([175 10 85]); camtarget([105 40 0]) camlight left; lighting gouraud  %% Isosurface, Isocaps, Coneplot, and Streamlines of Wind Data figure; colordef(gcf,'black') cla spd = sqrt(u.*u + v.*v + w.*w); p = patch(isosurface(x,y,z,spd, 40)); isonormals(x,y,z,spd, p) set(p, 'FaceColor', 'red', 'EdgeColor', 'none'); p2 = patch(isocaps(x,y,z,spd, 40)); set(p2, 'FaceColor', 'interp', 'EdgeColor', 'none') daspect([1 1 1]); [f verts] = reducepatch(isosurface(x,y,z,spd, 30), .2); h=coneplot(x,y,z,u,v,w,verts(:,1),verts(:,2),verts(:,3),2); set(h, 'FaceColor', 'cyan', 'EdgeColor', 'none'); [sx sy sz] = meshgrid(80, 20:10:50, 0:5:15); h2=streamline(x,y,z,u,v,w,sx,sy,sz); set(h2, 'Color', [.4 1 .4]); colormap(jet) box on axis tight camproj perspective; camva(34); campos([165 -20 65]); camtarget([100 40 -5]) camlight left; lighting gouraud   displayEndOfDemoMessage(mfilename) ##### SOURCE END ##### --></body></html>