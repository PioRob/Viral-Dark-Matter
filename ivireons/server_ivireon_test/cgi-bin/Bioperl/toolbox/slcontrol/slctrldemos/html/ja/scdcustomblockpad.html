
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>カスタムのマスク サブシステムの調整</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="scdcustomblockpad.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit scdcustomblockpad">エディターで scdcustomblockpad.m を開く</a></div><div class="right"><a href="matlab:echodemo scdcustomblockpad">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>カスタムのマスク サブシステムの調整</h1><!--introduction--><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">はじめに</a></li><li><a href="#2">Lead-Lag Library ブロック</a></li><li><a href="#7">Simulink&reg; 補償器設計作業のサブシステムの設定</a></li><li><a href="#12">例</a></li><li><a href="#29">完了した設計</a></li><li><a href="#36">Simulink への設計の書き込み</a></li></ul></div><h2>はじめに<a name="1"></a></h2><p>このデモでは、Simulink&reg; 補償器設計作業でカスタムのマスク サブシステムを有効にする方法を説明します。設定すると、ブロックは Simulink Control Design の<a href="matlab:scdguihelp('supported_tunable_blocks');">サポートされているブロック</a>と同じ方法で使用できます。</p><h2>Lead-Lag Library ブロック<a name="2"></a></h2><p>設定されたリードラグ ブロックの例は、<tt>scdexblks</tt> ライブラリにあります。</p><pre class="codeinput">open_system(<span class="string">'scdexblks'</span>);
</pre><img vspace="5" hspace="5" src="../scdcustomblockpad_01.png" alt=""> <p>リードラグ ブロックは、単一の零点および極を持つ補償器の要素を実現します。3 つのパラメーター <tt>K</tt>、<tt>wz</tt>、<tt>wp</tt> があり、ブロック ダイアログで設定されます。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcustomblock/blockdialog.png" alt=""> </p><p>次に、マスク内で使用されるパラメーターによって、等価な伝達関数が作成されます。</p><p><img src="../scdcustomblockpad_eq38490.png" alt="$$G(s) = K {{{s \over {wz}} + 1} \over {{s \over wp} + 1}}$$"></p><h2>Simulink&reg; 補償器設計作業のサブシステムの設定<a name="7"></a></h2><p>Simulink Control Design のマスク サブシステムの設定は、設定関数で指定されます。このデモでは、設定関数は M ファンクション <a href="matlab:edit('scdleadexample')">scdleadexample.m</a> に書き込まれています。この設定関数により、以下のように指定されます。</p><div><ul><li>最大 1 つの極だけが許可される (MaxPoles Constraint)</li><li>最大 1 つの零点だけが許可される (MaxZeros Constraint)</li><li>ゲインは調整可能である (isStaticGainTunable Constraint)</li></ul></div><p>設定は、ブロックの <tt>SCDConfigFcn</tt> パラメーターを使用して、サブシステムに登録されます。この関数は、コマンド <tt>set_param</tt> または<b></b>[ブロック プロパティ] ダイアログを使用して設定できます。このダイアログは、サブシステムを右クリックしてアクセスします。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcustomblock/setscdconfigfcn.png" alt=""> </p><p>SCDConfigFcn を設定すると、ブロックは Simulink 補償器設定作業で使用できるようになります。</p><h2>例<a name="12"></a></h2><p>リードラグ ブロックを使用すると、<a href="scdspeedctrldespad.html">単ループのフィードバック/プレフィルターの設計</a>のデモのフィードバック ループを調整できます。補償器設計プロセスを開始するには、次のようにします。</p><p><b>手順 1</b> モデル <a href="matlab:open_system('scdspeedctrlleadlag')">scdspeedctrlleadlag</a> の新しい Simulink 補償器設計作業を開始します。開始するには、Simulink モデルから <b></b>[ツール]、[制御設計]、[補償器設計] を選択します。</p><p><b>手順 2</b> 次のブロックを選択し、<b></b>[調整可能なブロック] パネルの <b></b>[ブロックの選択...] をクリックして調整します。</p><div><ul><li><tt>scdspeedctrlleadlag/Feedback Controller/Lead-Lag Controller</tt></li></ul></div><pre class="codeinput">load_system(<span class="string">'scdspeedctrlleadlag'</span>)
open_system(<span class="string">'scdspeedctrlleadlag/Feedback Controller'</span>)
</pre><img vspace="5" hspace="5" src="../scdcustomblockpad_02.png" alt=""> <p>リードラグ ブロックが <tt>Feedback Controller</tt> サブシステムに表示されます。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcustomblock/blockselection.png" alt=""> </p><p><b>手順 3</b> [線形化のポイント] メニューをクリックして使用し、閉ループ信号を選択します。</p><div><ul><li>入力:<tt>scdspeedctrlleadlag/Speed Reference</tt> 出力端子 1</li></ul></div><div><ul><li>出力 <tt>scdspeedctrlleadlag/Speed Output</tt> 出力端子 1</li></ul></div><p><b>手順 4</b> <b></b>[操作点] パネルで <b></b>[既定操作点] を選択します。</p><p><b>手順 5</b> <b></b>[ブロックの調整...] ボタンをクリックして、設計の設定ウィザードを起動します。</p><p>開ループを <tt>scdspeedctrlleadlag/Feedback Controller/Lead-Lag Controller</tt> の 出力 1 で調整するには、プロット 1 に対して開ループ 1 を選択し、プロット タイプとして開ループのボード線図を選択します。</p><p>ウィザードで、プロット 2 に対して閉ループ 1 を選択し、プロット タイプとして閉ループ ボード線図を選択します。</p><p>ウィザードの手順 2 で、プロット 1 とプロット 2 に対するステップ応答を選択します。次に、[プロットの内容] テーブルで、以下のようにします。</p><div><ul><li><tt>Closed Loop from /Speed Reference</tt> to scdspeedctrl/Speed Output| のプロット 1 を選択する</li></ul></div><p>ウィザードが完了すると、<b>SISO 設計作業</b>ノードが作成されます。この作業ノードを使用して、設計を完成させます。<b></b>[補償器エディター] タブに移動し、リードラグ補償器を調整します。これで、リードラグ ブロックに対するブロック パラメーターは調整できます。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcustomblock/compeditor.png" alt=""> </p><h2>完了した設計<a name="29"></a></h2><p><a href="scdspeedctrldespad.html">単ループのフィードバック/プレフィルターの設計</a>のデモの参照ステップ応答の設計要件は、次のコントローラー パラメーターを使用して満たすことができます。</p><div><ul><li><tt>scdspeedctrlleadlag/Feedback Controller/Lead-Lag Controller</tt> has parameters:</li></ul></div><pre>         Gain = 0.0075426</pre><pre>         Zero Frequency (rad/s) = 2</pre><pre>         Pole Frequency (rad/s) = 103.59</pre><p>閉ループ システムの応答は以下のとおりです。</p><p><img vspace="5" hspace="5" src="../../html_extra/scdcustomblock/clresponse.png" alt=""> </p><h2>Simulink への設計の書き込み<a name="36"></a></h2><p>次に、<b></b>[Simulink ブロック パラメーターの更新] ボタンをクリックすると、この設計を非線形モデルに対してテストできます。これにより、パラメーターが Simulink モデルに書き込まれます。</p><pre class="codeinput">bdclose(<span class="string">'scdexblks'</span>)
bdclose(<span class="string">'scdspeedctrlleadlag'</span>)
</pre><p class="footer">Copyright 2005-2006 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Tuning Custom Masked Subsystems % % Copyright 2005-2006 The MathWorks, Inc. % $Revision: 1.1.4.2.2.1 $ $Date: 2010/07/29 21:29:23 $  %% Introduction % This demo illustrates how to enable custom masked subsystems in a % Simulink(R) Compensator Design Task.  Once configured a block can be used in % the same way as any % <matlab:scdguihelp('supported_tunable_blocks'); supported blocks> in Simulink Control Design.  %% Lead-Lag Library Block % The example configured lead-lag block is in the library |scdexblks| open_system('scdexblks');  %% % The lead-lag block implements a compensator element with a single zero % and pole.  There are three parameters |K|, |wz|, and |wp| which are configured % in the block dialog: %% % <<../html_extra/scdcustomblock/blockdialog.png>> %% % The parameters are then used inside the mask create an equivalent transfer function: %% % $$G(s) = K {{{s \over {wz}} + 1} \over {{s \over wp} + 1}}$$  %% Configuring the Subsystem for a Simulink(R) Compensator Design Task  % The configuration of a masked subsystem for Simulink Control Design % is specified in a configuration function.  In this demonstration the % configuration function has been written in the M-Function % <matlab:edit('scdleadexample') scdleadexample.m>.  This configuration % function specifies that: %% % * There is only a maximum of 1 pole allowed (MaxPoles Constraint) % * There is only a maximum of 1 zero allowed (MaxZeros Constraint) % * The gain is tunable (isStaticGainTunable Constraint) %%  % The configuration is registered in the subsystem using the |SCDConfigFcn| % parameter for the block.  This function can be set using the command % |set_param| or through the *Block Properties* dialog which is accessed % by right clicking on any subsystem. %% % <<../html_extra/scdcustomblock/setscdconfigfcn.png>> %% % After setting the SCDConfigFcn the block is now ready to be % used in a Simulink Compensator Design Task.  %% Example % The lead-lag block can be used to tune the feedback loop in demo entitled % <scdspeedctrldespad.html "Single Loop Feedback/Prefilter Design">.  To % begin the compensator design process: %% % *Step 1* Start a new Simulink Compensator Design Task for the model % <matlab:open_system('scdspeedctrlleadlag') scdspeedctrlleadlag>  % by choosing *Tools -> Control Design -> Compensator % Design* from the Simulink model. %%  % *Step 2* Select the following block to tune by clicking the *Select Blocks...* % button on the *Tunable Blocks* panel: %%  % * |scdspeedctrlleadlag/Feedback Controller/Lead-Lag Controller| %% load_system('scdspeedctrlleadlag') open_system('scdspeedctrlleadlag/Feedback Controller') %% % The lead-lag block will show up inside the subsystem |Feedback % Controller|. %% % <<../html_extra/scdcustomblock/blockselection.png>> %%  % *Step 3* Select the closed loop signals by right clicking and using the % Linearization Points menu: %% % * Input: |scdspeedctrlleadlag/Speed Reference| output port 1 %% % * Output |scdspeedctrlleadlag/Speed Output| output port 1 %% % *Step 4* In the *Operating Points* panel select *Default % Operating Point*. %% % *Step 5* Click on the *Tune Blocks...* button to launch the Design % Configuration Wizard.   %% % To tune the Open Loop at the outport 1 of |scdspeedctrlleadlag/Feedback % Controller/Lead-Lag Controller|, select Open Loop 1 for Plot 1 and select % Open-Loop Bode as its Plot Type. %% % In the wizard select Closed Loop 1 for Plot 2 and select Closed-Loop Bode % as its Plot Type. %  %% % In step 2 of the wizard select Step responses for Plot 1 and Plot 2. % Then in the Contents of Plots table %% % * Select Plot 1 for the |Closed Loop from /Speed Reference| to scdspeedctrl/Speed % Output|  %% % After completing the wizard a *SISO Design Task* node is created.  Use this % task node to complete the design.  Go to the *Compensator Editor* tab to % tune the lead-lag compensator.  The block parameters for the lead-lag % block can now be tuned. % % <<../html_extra/scdcustomblock/compeditor.png>>  %% Completed Design % The design requirements for the reference step response in the demo % <scdspeedctrldespad.html "Single Loop Feedback/Prefilter Design"> can be % met with the following controller parameters %% % * |scdspeedctrlleadlag/Feedback Controller/Lead-Lag Controller| has parameters: %% %           Gain = 0.0075426 %% %           Zero Frequency (rad/s) = 2 %% %           Pole Frequency (rad/s) = 103.59 %% % The responses of the closed loop system are shown below: %% % <<../html_extra/scdcustomblock/clresponse.png>>  %% Writing the Design to Simulink % You can then test the design on the nonlinear model by clicking the % *Update Simulink Block Parameters* button.  This writes the parameters % back to the Simulink model.  bdclose('scdexblks') bdclose('scdspeedctrlleadlag') displayEndOfDemoMessage(mfilename) ##### SOURCE END ##### --></body></html>