
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>GUI で行列データを表示</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-26"><meta name="DC.source" content="uitabledemo.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit uitabledemo">エディターで uitabledemo.m を開く</a></div><div class="right"><a href="matlab:echodemo uitabledemo">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>GUI で行列データを表示</h1><!--introduction--><p>これは、uitable コンポーネントを使って GUI 上で行列データを表示するためのデモです。単純な数値行列データと、より複雑なデータを表示する方法を示します。uitable の外観を修正する方法と、エンド ユーザーが uitable のデータに加えることができる変更を制限する方法も示します。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">単純な数値データを使用</a></li><li><a href="#3">混在するデータ型を使用</a></li><li><a href="#4">表示のカスタマイズ</a></li><li><a href="#9">制限した編集の許可</a></li></ul></div><h2>単純な数値データを使用<a name="1"></a></h2><p>最初に、Figure を作成し、uitable の位置を決めます。</p><pre class="codeinput">f = figure(<span class="string">'Position'</span>, [100 100 752 350]);
t = uitable(<span class="string">'Parent'</span>, f, <span class="string">'Position'</span>, [25 25 700 200]);
</pre><img vspace="5" hspace="5" src="../uitabledemo_01.png" alt=""> <p>いくつかの単純な数値データを作成し、<tt>Data</tt> プロパティを使用して uitable に設定します。この例では、魔方陣行列を使用します。</p><pre class="codeinput">set(t, <span class="string">'Data'</span>, magic(10));
</pre><img vspace="5" hspace="5" src="../uitabledemo_02.png" alt=""> <h2>混在するデータ型を使用<a name="3"></a></h2><p>次に、単純な数値データをより複雑な行列で置き換えます。最初に、数値、文字、論理値の混在したデータを含むいくつかの新規データを作成します。そして、その新規行列を uitable の Data プロパティに設定します。</p><pre class="codeinput">complexData = { <span class="keyword">...</span>
    <span class="string">'Andrew'</span> 31 <span class="string">'Male'</span> 76 230.75 false <span class="string">'Somewhat Frequently'</span> 10; <span class="keyword">...</span>
    <span class="string">'Bob'</span> 41 <span class="string">'Male'</span> 77 235.5 true <span class="string">'Not Very Frequently'</span> 10; <span class="keyword">...</span>
    <span class="string">'Clarice'</span> 20 <span class="string">'Female'</span> 74 130.25 false <span class="string">'Very Frequently'</span> 15; <span class="keyword">...</span>
    <span class="string">'Debra'</span> 35 <span class="string">'Female'</span> 67 140.25 true <span class="string">'Very Frequently'</span> 15;
    <span class="string">'Edward'</span> 34 <span class="string">'Male'</span> 73 247.5 true <span class="string">'Very Frequently'</span> 20};
set(t, <span class="string">'Data'</span>, complexData);
</pre><img vspace="5" hspace="5" src="../uitabledemo_03.png" alt=""> <h2>表示のカスタマイズ<a name="4"></a></h2><p>uitable 内に複雑なデータがあるので、情報をより意味のあるものにするために表示をカスタマイズします。まず、<tt>ColumnName</tt> プロパティを使用して、各列の上部に見出しやタイトルを追加します。複数行の見出しを作成するには、行の区切り記号を使用します。</p><pre class="codeinput">set(t, <span class="string">'ColumnName'</span>, {<span class="string">'Name'</span>, <span class="string">'Age'</span>, <span class="string">'Gender'</span>, <span class="string">'Height'</span>, <span class="string">'Weight'</span>, <span class="keyword">...</span>
                      <span class="string">'Stress|Tests'</span>, <span class="string">'Exercise|Frequency'</span>, <span class="string">'Copay'</span>});
</pre><img vspace="5" hspace="5" src="../uitabledemo_04.png" alt=""> <p>次に、<tt>ColumnWidth</tt> プロパティを使用して、いくつかの列の幅を調整します。列の 2 つについて特定の幅を設定し、内容に基づいて自動的に適合するよう残りの列をそのままにします。</p><pre class="codeinput">set(t, <span class="string">'ColumnWidth'</span>, {100 <span class="string">'auto'</span> <span class="string">'auto'</span> <span class="string">'auto'</span> <span class="string">'auto'</span> <span class="string">'auto'</span> 150 <span class="string">'auto'</span>});
</pre><img vspace="5" hspace="5" src="../uitabledemo_05.png" alt=""> <p>[ ] を使用して <tt>RowName</tt> プロパティを空に設定することで、行の見出しを完全に削除します。</p><pre class="codeinput">set(t, <span class="string">'RowName'</span>, []);
</pre><img vspace="5" hspace="5" src="../uitabledemo_06.png" alt=""> <p>余分な空白を削除するために、uitable のサイズを変更します。</p><pre class="codeinput">set(t, <span class="string">'Position'</span>, [25 25 702 119]);
</pre><img vspace="5" hspace="5" src="../uitabledemo_07.png" alt=""> <p>最後に、<tt>ForegroundColor</tt> および <tt>BackgroundColor</tt> プロパティを使用して、前景色と背景色を変更します。<tt>RowStriping</tt> プロパティは既定で on になっていることがわかります。つまり、uitable は複数の、この場合は 2 つの背景色を表示します。ストライプ配色を有効にするには、2 つの異なる背景色を指定します。メモ:<tt>RowStriping</tt> プロパティを off に設定することで、行のストライプをオフにします。</p><pre class="codeinput">foregroundColor = [1 1 1];
set(t, <span class="string">'ForegroundColor'</span>, foregroundColor);
backgroundColor = [.4 .1 .1; .1 .1 .4];
set(t, <span class="string">'BackgroundColor'</span>, backgroundColor);
</pre><img vspace="5" hspace="5" src="../uitabledemo_08.png" alt=""> <h2>制限した編集の許可<a name="9"></a></h2><p>uitable が希望どおりに表示されるようになったので、ユーザーが <tt>ColumnEditable</tt> プロパティを使用して、GUI からデータを編集できるようにします。ただし、ユーザーの編集機能を制限します。最初に、ユーザーが <tt>Name</tt> 列で値を変更できないように、1 番目の列以外のすべての列における編集を有効にします。</p><pre class="codeinput">set(t, <span class="string">'ColumnEditable'</span>, [false true true true true true true true]);
</pre><img vspace="5" hspace="5" src="../uitabledemo_09.png" alt=""> <p>次に、<tt>ColumnFormat</tt> プロパティを使用して、<tt>Gender</tt> および <tt>Exercise Frequency</tt> 列の形式を、オプション セットが制限されたポップアップ メニューに変更します。<tt>Gender</tt> 列では、<tt>Male</tt> または <tt>Female</tt> の値をユーザーに選択させます。<tt>Exercise Frequency</tt> 列では、オプション <tt>Very Frequently</tt>、<tt>Somewhat Frequently</tt>、<tt>Not Very Frequently</tt> の中からユーザーに選択させます。</p><pre class="codeinput">set(t, <span class="string">'ColumnFormat'</span>, {[] [] {<span class="string">'Male'</span> <span class="string">'Female'</span>} [] [] [] <span class="keyword">...</span>
       {<span class="string">'Very Frequently'</span> <span class="string">'Somewhat Frequently'</span> <span class="string">'Not Very Frequently'</span>} []});
</pre><img vspace="5" hspace="5" src="../uitabledemo_10.png" alt=""> <p>最後に、<tt>Age</tt> 列の値が <tt>0</tt> から <tt>120</tt> の間になるように制限します。そのためには、CellEditCallback を追加して、uitable データに行う編集を検証します。以下のコールバック関数を使用してください。</p><pre>      function AgeVerificationCallback(o, e)
   if (e.Indices(2) == 2 &amp;&amp; ...
       (e.NewData &lt; 0 || e.NewData &gt; 120))
       tableData = get(o, 'data');
       tableData{e.Indices(1), e.Indices(2)} = e.PreviousData;
       set(o, 'data', tableData);
       error('Age value must be between 0 and 120.')
   end</pre><p>CellEditCallback としてこの関数を追加することで、<tt>Age</tt> 列内の値の編集が許容範囲 (すなわち、0 から 120 の間) にない場合、変更は無効になります。すなわち、セル内の値が元の値に戻されます。</p><pre class="codeinput">set(t, <span class="string">'CellEditCallback'</span>, @AgeVerificationCallback);
</pre><img vspace="5" hspace="5" src="../uitabledemo_11.png" alt=""> <p class="footer">Copyright 1984-2008 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Displaying Matrix Data in a GUI % This is a demonstration of how to display matrix data in a GUI using the % uitable component.  It shows how to display simple numeric matrix data,   % as well as more complex data.  It also shows how to modify the appearance % of the uitable and how to limit the changes that end users can make to  % the data in the uitable.  % Copyright 1984-2008 The MathWorks, Inc. % $Revision: 1.1.4.9.2.1 $  $Date: 2010/07/29 21:28:55 $  %% Using Simple Numeric Data % First, create a figure and position a uitable in it. f = figure('Position', [100 100 752 350]); t = uitable('Parent', f, 'Position', [25 25 700 200]);  %% % Now, create some simple numeric data and set it into the uitable using % the |Data| property.  For this example, use a magic square. set(t, 'Data', magic(10));  %% Using Mixed Data Types % Next, replace the simple numeric data with a more complicated matrix. % First, create some new data that contains a mix of numeric, character, % and logical values.  Then, set the new matrix into the uitable's % 'Data' property. complexData = { ...     'Andrew' 31 'Male' 76 230.75 false 'Somewhat Frequently' 10; ...     'Bob' 41 'Male' 77 235.5 true 'Not Very Frequently' 10; ...     'Clarice' 20 'Female' 74 130.25 false 'Very Frequently' 15; ...     'Debra' 35 'Female' 67 140.25 true 'Very Frequently' 15;     'Edward' 34 'Male' 73 247.5 true 'Very Frequently' 20}; set(t, 'Data', complexData);  %% Customizing the Display % Now that the complex data is in the uitable, customize the display to % make the information more meaningful.  Start by using the |ColumnName| % property to add headings, or titles, to the top of each column. To create % multi-line headings, use the divider line symbol. set(t, 'ColumnName', {'Name', 'Age', 'Gender', 'Height', 'Weight', ...                       'Stress|Tests', 'Exercise|Frequency', 'Copay'});  %% % Next, adjust the widths of some of the columns using the |ColumnWidth| % property.  Set a specific width for two of the columns, leaving the % rest of the columns to autofit based on the contents. set(t, 'ColumnWidth', {100 'auto' 'auto' 'auto' 'auto' 'auto' 150 'auto'});  %% % Now, completely remove the row header by setting the |RowName|  % property to empty, using []. set(t, 'RowName', []);  %% % Resize the uitable to remove any extra space. set(t, 'Position', [25 25 702 119]);  %% % Finally, change the foreground and background colors using the % |ForegroundColor| and |BackgroundColor| properties.  As you can see, the  % |RowStriping| property is on by default.  This means the uitable shows % multiple, in this case two, background colors.  To keep the striping effect, % specify two different background colors. Note: Turn off row striping by % setting the |RowStriping| property to 'off'.  foregroundColor = [1 1 1]; set(t, 'ForegroundColor', foregroundColor); backgroundColor = [.4 .1 .1; .1 .1 .4]; set(t, 'BackgroundColor', backgroundColor);  %% Allowing Restricted Editing % Now that the uitable looks the way it should, allow users to % edit the data from the GUI using the |ColumnEditable| property.  However,  % limit the users' editing capabilities.  First, enable editing on all of the % columns except the first one so users will not be able to modify the values % in the |Name| column. set(t, 'ColumnEditable', [false true true true true true true true]);  %% % Next, use the |ColumnFormat| property to change the format of the  % |Gender| and |Exercise Frequency| columns to pop-up menus with a restricted  % set of options. In the |Gender| column, force users to choose between the % values |Male| and |Female|. In the |Exercise Frequency| column, make users % choose among the options: |Very Frequently|, |Somewhat Frequently|, and % |Not Very Frequently|. set(t, 'ColumnFormat', {[] [] {'Male' 'Female'} [] [] [] ...        {'Very Frequently' 'Somewhat Frequently' 'Not Very Frequently'} []});  %% % Finally, restrict the values in the |Age| column to be between |0| and % |120|.  Do this by attaching a CellEditCallback to validate edits made % to the uitable data.  Use the following callback function: % %     function AgeVerificationCallback(o, e) %     if (e.Indices(2) == 2 && ... %         (e.NewData < 0 || e.NewData > 120)) %         tableData = get(o, 'data'); %         tableData{e.Indices(1), e.Indices(2)} = e.PreviousData; %         set(o, 'data', tableData); %         error('Age value must be between 0 and 120.') %     end % % By attaching this function as the CellEditCallback, if the edit to the value % in the |Age| column does not fall within the acceptable range (i.e., between % 0 and 120), the change will not be accepted. In other words, the value in the % cell will revert back to the original value. set(t, 'CellEditCallback', @AgeVerificationCallback);   displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>