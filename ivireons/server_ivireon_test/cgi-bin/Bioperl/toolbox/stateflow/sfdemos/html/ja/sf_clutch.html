
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>クラッチのモデル化</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="sf_clutch.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left">sf_clutch.mdl</div><div class="right"><a href="matlab:sf_clutch">このモデルを開く</a></div></div><div class="content"><h1>クラッチのモデル化</h1><!--introduction--><p>このモデルでは、Simulink Enabled Subsystem と Stateflow&reg; チャートの組み合わせを使用して、<a href="matlab:open_system('sldemo_clutch')">Simulink&reg; クラッチ デモ</a>を実装します。図および方程式を含む物理的なシステムの詳細な説明は、Enabled Subsystem のある Simulink クラッチ モデルのデモ内にあります。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#2">推奨ワークフロー</a></li><li><a href="#4">シミュレーション結果</a></li></ul></div><img vspace="5" hspace="5" src="../sf_clutch_01.png" alt=""> <h2>推奨ワークフロー<a name="2"></a></h2><p>このモデルでは、連続ダイナミクスが複雑 (Simulink または物理モデル作成ツールの使用が必須) そのダイナミクスと関連するモード変更が存在する場合に、Simulink と Stateflow を使用してハイブリッド システムのモデル化をするためのお勧めの方法を説明します。</p><p>ハイブリッド システムのモデル化は、次の関心事を含みます。</p><p><b>連続時間のダイナミクス</b>: ハイブリッド システムには複数の動作モードがあります。各操作モードは、いくつかの連続時間のダイナミクスによって定義されます。連続時間のダイナミクスが複雑な場合は、Simulink の Enabled Subsystem を使用してモデル化することをお勧めします。使用する場合は、クラッチの 2 つの操作モードを表す &quot;Locked&quot; と  &quot;Slipping&quot; の Enabled Subsystem が用意されています。それぞれの Enabled Subsystem への入力は、ダイナミクスを駆動する入力と微分方程式の初期条件の両方を表すことに注意してください。</p><p><b>モード ロジック</b>: 特定の動作モードから別の動作モードに切り替える条件を参照します。この例では、モード ロジックは Stateflow チャートに記述されています。</p><img vspace="5" hspace="5" src="../sf_clutch_02.png" alt=""> <p>このチャートについての次の際立った特徴に注意してください。</p><div><ol><li>Stateflow チャートには、クラッチの動作モードを表す &quot;Locked&quot; と &quot;Slipping&quot; の 2 つのステートがあります。それぞれのステートで、[ステート アクティビティの出力] プロパティが有効です。そのためチャートには、同じ名前の Simulink サブシステムのアクティビティを制御する &quot;Slipping&quot; と &quot;Locked&quot; と呼ばれる別の出力が追加されます。</li><li>一般的に、遷移条件は Enabled Subsystem で算出される連続時間信号によって異なります。たとえば、このデモでは、 &quot;Slipping&quot; ステートから &quot;Locked&quot; ステートへの切り替え条件は、 &quot;Slipping&quot; ステートでの積分器の現在の値によって変化します。このようなシミュレーションを正確にモデル化するために、Enabled Subsystem の積分器の状態出力端子を、モード ロジックを制御する Stateflow チャートの入力端子に接続する必要があります。Simulink では状態出力端子を条件付きで実行されるサブシステムの出力端子に接続することはできないため、From/Goto ブロックが使用されます。</li></ol></div><p><b>状態ハンドオフ</b>: 特定の動作モードから別の動作モードに切り替える場合、新たにアクティブ化したサブシステムの積分器を適切に初期化する必要があります。これは、Simulink の Enabled Subsystem の初期条件ポートを駆動する Stateflow 出力を使用して行います。たとえば、Stateflow チャートは &quot;Slipping&quot; サブシステムの <tt>we_0</tt> と呼ばれる入力を駆動します。これは、それ自体が積分器ブロック「Slipping/Engine Integrator」の IC 端子に接続されます。初期条件は、状態の切り替え時に遷移アクションの一部として Stateflow チャートに設定されます。</p><h2>シミュレーション結果<a name="4"></a></h2><p>システムをシミュレートすると、エンジンと自動車の速度が次のようにグラフに示されます。プレートは約 4 秒でロック状態になり、約 6.25 秒で再度スリップ状態になります。エンジンおよび自動車の速度を使用できるのは、システムが Slipping ステートにある場合のみです。これらの値は、システムが Locked ステートのときは無効です。</p><img vspace="5" hspace="5" src="../sf_clutch_03.png" alt=""> <p class="footer">Copyright 2007-2008 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Modeling a Clutch % % This model implements the <matlab:open_system('sldemo_clutch') % Simulink(R) clutch demo> using a combination of Simulink enabled % subsystems and a Stateflow(R) chart. Note that you can find a detailed % explanation of the physical system, including figures and equations, in % the demo for the Simulink clutch model with enabled subsystems.  % %%   %   Copyright 2007-2008 The MathWorks, Inc.  clear all close all bdclose all  open_system('sf_clutch'); close_system('sf_clutch/Speeds');  r = sfroot; m = r.find('-isa', 'Stateflow.Machine'); c = m.find('-isa', 'Stateflow.Chart', 'Name', 'Friction Mode');  c.Visible = 0;  %% Recommended Workflow % % This model demonstrates the recommended way of modeling hybrid systems % using Simulink and Stateflow when the continuous dynamics are complex % (necessitating the use of Simulink or physical modeling tools) and there % are mode changes that are coupled with the dynamics. %  % Modeling a hybrid system involves addressing the following concerns: %  % *Continuous Dynamics* % Hybrid systems have multiple modes of operation where each mode of % operation is defined by some continuous dynamics.  When the continuous % dynamics are complex, it is a good idea to use Simulink enabled % subsystems to model them. In this case, we have the "Locked" and % "Slipping" enabled subsystems that represent the two modes of operation % of a clutch. Note that the inputs to each of the enabled subsystems % represent both the inputs driving the dynamics, as well as the initial % conditions for the differential equations.  %  % *Mode Logic* % This refers to the conditions under which we switch from one mode of % operation to another.  In this example, the mode logic is described in % a Stateflow chart.  c.Visible = 1;  %%  % Note the following salient points about this chart: %  % # The Stateflow chart has two states "Locked" and "Slipping" that % represent the two modes of operation of the clutch. Each of the states % has the "Output state activity" property enabled. This causes the chart % to have additional outputs called "Slipping" and "Locked" that control % the activity of the Simulink subsystems of the same name.  % # In general, the transition conditions will depend on continuous time % signals that are computed in the enabled subsystems. For example, in this % demo, the condition for switching from the "Slipping" state to the % "Locked" state depends on the current values of the integrators in the % "Slipping" state. In order to accurately model such situations, we need % to connect the state outports of the integrators in the enabled % subsystems to the inputs of the Stateflow chart that control the mode % logic. From/Goto blocks are used because Simulink disallows connecting % state outports to outputs of conditionally executed subsystems. %   % *State Handoff* % When switching from one mode of operation to another, the integrators in % the newly activated subsystem need to be initialized properly in order to % get smooth output. This is done by using the Stateflow outputs to drive % the initial condition ports of the Simulink enabled subsystems. For % example, the Stateflow chart drives the Inport called |we_0| of the % "Slipping" subsystem, which is itself connected to the IC port of the % integrator block "Slipping/Engine Integrator". The initial conditions are % set in the Stateflow chart as part of the transition action when % switching states.  %% Simulation Results %  % When the system is simulated, the engine and vehicle velocities are as % shown in the following graph. The plates lock at about 4 seconds and % begin slipping again at about 6.25 seconds. Note that you can only use % the Engine and Vehicle speeds when the system is in the Slipping state. % These values are invalid when the system is in the Locked state.  % evalc hides any output from being incorporated into the demo text. c.Visible = 0; evalc('sim(''sf_clutch'')'); plot(sldemo_clutch_output.EngineSpeed.time, sldemo_clutch_output.EngineSpeed.Data, ...      sldemo_clutch_output.VehicleSpeed.time, sldemo_clutch_output.VehicleSpeed.Data, ...      sldemo_clutch_output.ShaftSpeed.time, sldemo_clutch_output.ShaftSpeed.Data); xlabel('Time'); ylabel('Engine, Vehicle and Shaft speeds'); legend('Engine', 'Vehicle', 'Shaft');  %%   bdclose all; clear all; close all;  ##### SOURCE END ##### --></body></html>