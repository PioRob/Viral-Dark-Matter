
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>家の熱モデル</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="sldemo_househeat.m"><link rel="stylesheet" type="text/css" href="../../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left">sldemo_househeat.mdl</div><div class="right"><a href="matlab:sldemo_househeat">このモデルを開く</a></div></div><div class="content"><h1>家の熱モデル</h1><!--introduction--><p>このデモでは、Simulink&reg; を使用して家の熱モデルを作成する方法を示します。このシステムでは、屋外環境、家の熱特性、および家の暖房システムがモデル化されます。</p><p><a href="matlab:edit('sldemo_househeat_data.m')">sldemo_househeat_data.m</a> ファイルでは、モデル ワークスペースのデータが初期化されます。変更するには、モデル ワークスペースを直接編集するか、ファイルを編集してモデル ワークスペースを再度読み込みます。モデル ワークスペースを表示するには、Simulink エディターから [表示] &gt; [モデル エクスプローラー] を選択します。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">モデルを開く</a></li><li><a href="#3">モデルの初期化</a></li><li><a href="#5">モデルのコンポーネント</a></li><li><a href="#17">シミュレーションの実行と結果の可視化</a></li><li><a href="#21">注意</a></li></ul></div><h2>モデルを開く<a name="1"></a></h2><p><a href="matlab:open_system('sldemo_househeat');">sldemo_househeat モデルを開く</a></p><img vspace="5" hspace="5" src="../sldemo_househeat_01.png" alt=""> <p><b>図 1:</b> 家の暖房モデル</p><h2>モデルの初期化<a name="3"></a></h2><p>このモデルでは、一般的な家の暖房コストが計算されます。モデルを開くと、家に関する情報が <a href="matlab:edit('sldemo_househeat_data.m')">sldemo_househeat_data.m</a> ファイルから読み込まれます。このファイルは以下の操作を行います。</p><div><ul><li>家の形状 (大きさ、窓の数) の定義</li><li>建材の熱特性の指定</li><li>家の熱抵抗の計算</li><li>ヒーターの特性 (温風の温度、流量) の指定</li><li>電気代の定義 (0.09 $/kWhr)</li><li>初期室温 (摂氏 20 度 = 華氏 68 度) の指定</li></ul></div><div><ul><li><b>メモ:</b> 時間は時 (hour) 単位で指定されます。特定の数量、たとえば空気の流量などは、1 時間あたり (1 秒あたりではなく) の数量で表されます</li></ul></div><h2>モデルのコンポーネント<a name="5"></a></h2><p><b>Set Point</b></p><p>&quot;Set Point&quot; は Constant ブロックです。室内で保たれなければならない温度が指定されます。既定値は華氏 70 度です。温度は華氏で指定されますが、計算のために摂氏に変換されます。</p><p><b>Thermostat</b></p><p>&quot;Thermostat&quot; は、Relay ブロックを含んだサブシステムです。望ましい室温の上下 5 度 (華氏) 以内の変動が許容されます。気温が華氏 65 度を下回ると、ヒーターのスイッチが入ります。以下の Thermostat サブシステムを参照してください。</p><p><a href="matlab:load_system('sldemo_househeat');open_system('sldemo_househeat/Thermostat')">Thermostat サブシステムを開く</a></p><img vspace="5" hspace="5" src="../sldemo_househeat_02.png" alt=""> <p><b>図 2:</b> &quot;Thermostat&quot; サブシステム</p><p><b>Heater</b></p><p>&quot;Heater&quot; は、一定の空気流量 &quot;Mdot&quot; をとるサブシステムです。&quot;Mdot&quot; は、<a href="matlab:edit('sldemo_househeat_data.m')">sldemo_househeat_data.m</a> ファイルで指定されます。サーモスタットからの信号によって、ヒーターのスイッチは入ったり切れたりします。ヒーターのスイッチが入っている場合は、温度 THeater (既定値は摂氏 50 度 = 華氏 122 度) の温風が一定流量 Mdot (既定値は 1kg/ 秒 = 3600kg/ 時) ヒーターから送り出されます。室内への熱流量は方程式 1 で表されます。</p><p><b>方程式 1</b></p><p><img src="../sldemo_househeat_eq26030.png" alt="$$\frac{dQ}{dt}=\left( T_{heater} - T_{room} \right) \cdot Mdot \cdot c$$"></p><p><img src="../sldemo_househeat_eq50528.png" alt="$$\frac{dQ}{dt} = \mbox{ heat flow from the heater into the room}$$"></p><p><img src="../sldemo_househeat_eq86860.png" alt="$$c = \mbox{ heat capacity of air at constant pressure}$$"></p><p><img src="../sldemo_househeat_eq84386.png" alt="$$Mdot = \mbox{ air mass flow rate through heater (kg/hr)}$$"></p><p><img src="../sldemo_househeat_eq42219.png" alt="$$T_{heater} = \mbox{ temperature of hot air from heater}$$"></p><p><img src="../sldemo_househeat_eq66793.png" alt="$$T_{room} = \mbox{ current room air temperature}$$"></p><p><a href="matlab:load_system('sldemo_househeat');open_system('sldemo_househeat/Heater')">Heater サブシステムを開く</a></p><img vspace="5" hspace="5" src="../sldemo_househeat_03.png" alt=""> <p><b>図 3: Heater サブシステム</b></p><p><b>Cost Calculator</b></p><p>&quot;Cost Calculator&quot; は Gain ブロックです。&quot;Cost Calculator&quot; により、経時変化する熱流量が積分され、エネルギー コストに乗算されます。暖房コストは &quot;PlotResults&quot; スコープにプロットされます。</p><p><b>House</b></p><p>&quot;House&quot; は、室温の変動が計算されるサブシステムです。ヒーターからの熱流量と屋外環境への放熱量が考慮されます。放熱量と温度の時間微係数は、方程式 2 で表されます。</p><p><b>方程式 2</b></p><p><img src="../sldemo_househeat_eq72970.png" alt="$$\left( \frac{dQ}{dt} \right) _{losses} = \frac{T_{room}-T_{out}}{R_{eq}}$$"></p><p><img src="../sldemo_househeat_eq25106.png" alt="$$\frac{dT_{room}}{dt} = \frac{1}{M_{air} \cdot c} \cdot \left(  \frac{dQ_{heater}}{dt} - \frac{dQ_{losses}}{dt} \right) $$"></p><p><img src="../sldemo_househeat_eq53802.png" alt="$$M_{air} = \mbox{ mass of air inside the house}$$"></p><p><img src="../sldemo_househeat_eq95607.png" alt="$$R_{eq} = \mbox{ equivalent thermal resistance of the house}$$"></p><p><a href="matlab:load_system('sldemo_househeat');open_system('sldemo_househeat/House')">House サブシステムを開く</a></p><img vspace="5" hspace="5" src="../sldemo_househeat_04.png" alt=""> <p><b>図 4:</b> House サブシステム</p><p><b>屋外環境のモデル化</b></p><p>屋外環境は、熱容量が無限で温度 Tout が経時的に変化するヒート シンクとしてモデル化します。Constant ブロック &quot;Avg Outdoor Temp&quot; は、屋外の平均気温として指定されます。&quot;Daily Temp Variation&quot; Sine Wave ブロックにより、屋外温度の毎日の変動が生成されます。これらのパラメーターをさまざまな値に変更し、暖房コストへの影響を調べてください。</p><h2>シミュレーションの実行と結果の可視化<a name="17"></a></h2><p>シミュレーションを実行し、結果を可視化します。&quot;PlotResults&quot; スコープを開いて結果を可視化します。暖房コスト、室温、および屋外の気温がスコープにプロットされます。屋外の気温が正弦関数的に変動しているのに対して、室温は &quot;Set Point&quot; の上下 5 度 (華氏) 以内に保たれています。時間軸の単位は時 (hour) です。</p><img vspace="5" hspace="5" src="../sldemo_househeat_05.png" alt=""> <p><b>図 5:</b> シミュレーション結果 (時間軸の単位は時 (hour) )</p><p>このモデルによれば、この家の 2 日間の暖房コストは約 $30 です。これらのパラメーターをさまざまな値に変更し、システム応答を観察してみてください。</p><h2>注意<a name="21"></a></h2><p>このモデルは暖房コストを計算する目的にのみ設計されています。屋外の気温が室温よりも高い場合、室温は、望ましい &quot;Set Point&quot; を超えます。</p><p>このモデルを変更してエアコンを組み込むことができます。エアコンは、ヒーターを変更したものとして実装できます。これを行うには、以下のようなパラメーターを <a href="matlab:edit('sldemo_househeat_data.m')">sldemo_househeat_data.m</a> に追加します。</p><div><ul><li>冷風出力</li><li>エアコンからの気流の温度</li><li>エアコンの効率</li></ul></div><p>サーモスタットを変更し、エアコンとヒーターの両方が制御されるようにする必要もあります。</p><p class="footer">Copyright 2004-2009 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Thermal Model of a House % % This demo illustrates how you can use Simulink(R) to create the thermal model of % a house. This system models the outdoor environment, the thermal % characteristics of the house, and the house heating system. %         % The <matlab:edit('sldemo_househeat_data.m') sldemo_househeat_data.m> file % initializes data in the model workspace. To make changes, you can edit the % model workspace directly or edit the file and re-load the model % workspace. To view the model workspace, select View > Model Explorer from the % Simulink editor.  %   Copyright 2004-2009 The MathWorks, Inc.  %% Opening the Model % <matlab:open_system('sldemo_househeat'); Open the sldemo_househeat model>  mdl='sldemo_househeat'; open_system(mdl);  %% % *Figure 1:* The House Heating Model  %% Model Initialization % % This model calculates heating costs for a generic house. When the model is % opened, it loads the information about the house from the % <matlab:edit('sldemo_househeat_data.m') sldemo_househeat_data.m> file.  The % file does the following: % % * Defines the house geometry (size, number of windows) % * Specifies the thermal properties of house materials % * Calculates the thermal resistance of the house % * Provides the heater characteristics (temperature of the hot air, flow-rate) % * Defines the cost of electricity (0.09$/kWhr) % * Specifies the initial room temperature (20 deg. Celsius = 68 deg. Fahrenheit)  %% % * *Note:* Time is given in units of hours. Certain quantities, like air % flow-rate, are expressed per hour (not per second).  %%  Model Components  %% % *Set Point* % % "Set Point" is a constant block. It specifies the temperature that must be % maintained indoors. It is 70 degrees Fahrenheit by default. Temperatures are % given in Fahrenheit, but then are converted to Celsius to perform the % calculations.  %% % *Thermostat* % % "Thermostat" is a subsystem that contains a Relay block. The thermostat allows % fluctuations of 5 degrees Fahrenheit above or below the desired room % temperature. If air temperature drops below 65 degrees Fahrenheit, the % thermostat turns on the heater. See the thermostat subsystem below. % % <matlab:load_system('sldemo_househeat');open_system('sldemo_househeat/Thermostat') Open the Thermostat subsystem>  open_system([mdl,'/Thermostat']);  %% % *Figure 2:* The "Thermostat" Subsystem  %% % *Heater* % % "Heater" is a subsystem that has a constant air flow rate, "Mdot", which is % specified in the <matlab:edit('sldemo_househeat_data.m') % sldemo_househeat_data.m> file. The thermostat signal turns the heater on or % off. When the heater is on, it blows hot air at temperature THeater (50 % degrees Celsius = 122 degrees Fahrenheit by default) at a constant flow rate % of Mdot (1kg/sec = 3600kg/hr by default). The heat flow into the room is expressed by the % Equation 1.  %% % *Equation 1* % % $$\frac{dQ}{dt}=\left( T_{heater} - T_{room} \right) \cdot Mdot \cdot c$$ % % $$\frac{dQ}{dt} = \mbox{ heat flow from the heater into the room}$$ % % $$c = \mbox{ heat capacity of air at constant pressure}$$ % % $$Mdot = \mbox{ air mass flow rate through heater (kg/hr)}$$ % % $$T_{heater} = \mbox{ temperature of hot air from heater}$$ % % $$T_{room} = \mbox{ current room air temperature}$$ % % <matlab:load_system('sldemo_househeat');open_system('sldemo_househeat/Heater') Open the Heater subsystem>  open_system([mdl,'/Heater']); %% % *Figure 3: The Heater Subsystem*  %% % *Cost Calculator* % % "Cost Calculator" is a Gain block. "Cost Calculator" integrates the heat flow % over time and multiplies it by the energy cost.  The cost of heating is % plotted in the "PlotResults" scope.  %% % *House* % % "House" is a subsystem that calculates room temperature variations. It takes % into consideration the heat flow from the heater and heat losses to the % environment. Heat losses and the temperature time derivative are expressed by % Equation 2.  %%  % *Equation 2* % % $$\left( \frac{dQ}{dt} \right) _{losses} = \frac{T_{room}-T_{out}}{R_{eq}}$$ % % $$\frac{dT_{room}}{dt} = \frac{1}{M_{air} \cdot c} \cdot \left(  \frac{dQ_{heater}}{dt} - \frac{dQ_{losses}}{dt} \right) $$ % % $$M_{air} = \mbox{ mass of air inside the house}$$ % % $$R_{eq} = \mbox{ equivalent thermal resistance of the house}$$ % % <matlab:load_system('sldemo_househeat');open_system('sldemo_househeat/House') Open the House subsystem> open_system([mdl,'/House']);  %% % *Figure 4:* The House Subsystem  %%  % *Modeling the Environment* % % We model the environment as a heat sink with infinite heat capacity and time % varying temperature Tout.  The constant block "Avg Outdoor Temp" specifies the % average air temperature outdoors. The "Daily Temp Variation" Sine Wave block % generates daily temperature fluctuations of outdoor temperature. Vary these % parameters and see how they affect the heating costs.  %% Running the Simulation and Visualizing the Results % % Run the simulation and visualize the results. Open the "PlotResults" scope to % visualize the results. The heat cost and indoor versus outdoor temperatures % are plotted on the scope. The temperature outdoor varies sinusoidally, whereas % the indoors temperature is maintained within 5 degrees Fahrenheit of "Set % Point". Time axis is labeled in hours. %  evalc('sim(mdl)'); open_system([mdl '/PlotResults']),  %% % *Figure 5:* Simulation results (time axis labeled in hours)  %% % % According to this model, it would cost around $30 to heat the house for two % days. Try varying the parameters and observe the system response. %  %% close_system(mdl);  %% Remarks % % This particular model is designed to calculate the heating costs only. If the % temperature of the outside air is higher than the room temperature, the room % temperature will exceed the desired "Set Point". % % You can modify this model to include an air conditioner. You can implement the % air conditioner as a modified heater.  To do this, add parameters like the % following to <matlab:edit('sldemo_househeat_data.m') sldemo_househeat_data.m>. % % * Cold air output % * Temperature of the stream from the air conditioner % * Air conditioner efficiency % % You would also need to modify the thermostat to control both the air % conditioner and the heater.   displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>