
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>Stateflow&reg; で Simulink&reg; 関数を使用したスイッチング コントローラーの設計</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="sf_slswitch.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left">sf_slswitch.mdl</div><div class="right"><a href="matlab:sf_slswitch">このモデルを開く</a></div></div><div class="content"><h1>Stateflow&reg; で Simulink&reg; 関数を使用したスイッチング コントローラーの設計</h1><p>このモデルでは、Stateflow の機能を Simulink 関数と組み合わせてスイッチング コントローラーを設計する方法を示します。</p><img vspace="5" hspace="5" src="../sf_slswitch_01.png" alt=""> <p>Stateflow チャート <tt>SwitchingController</tt> は、<tt>STEADY</tt>、<tt>P</tt>、および <tt>PID</tt> の 3 つのステートを切り替える単純なスイッチング コントローラーを実装します。<tt>STEADY</tt> ステートでは、ゼロ制御出力を生成します。<tt>P</tt> ステートまたは <tt>PID</tt> ステートでは、必要な制御効力を算出するために、Simulink 関数呼び出しサブシステムに権限を与えます。</p><p>ステート <tt>PID</tt> では、[ステート アクティビティの出力] がオンです。そのため、制御出力 <tt>u</tt> に加えて、Stateflow チャートもステート <tt>PID</tt> と同じ名前を持つログ出力を生成します。</p><p><tt>P</tt> から <tt>PID</tt> へ切り替えるための条件は、<tt>[e &lt; PID_TRESH]</tt> を十分に下回るエラーに基づいています。<tt>PID_TRESH</tt> は、モデル ワークスペースで定義される 値 0.3 を持つ変数です。</p><img vspace="5" hspace="5" src="../sf_slswitch_02.png" alt=""> <p>Simulink サブシステム <tt>SwitchingController/P.p_control</tt> は、ゲイン 3 の非常に単純な比例制御を実装します。ステート <tt>P</tt> に留まり続けると、閉ループ システムの定常状態ゲインは、3/4 = 0.75 になります。そのため、0.25 のエラーを受け取ります。</p><img vspace="5" hspace="5" src="../sf_slswitch_03.png" alt=""> <p>Simulink サブシステム <tt>SwitchingController/PID.pid_control</tt> は、単純な PID 制御を実装します。比例ゲインは <tt>P</tt> ステートのときと同じなので、制御効果で確実に滑らかに遷移します。</p><img vspace="5" hspace="5" src="../sf_slswitch_04.png" alt=""> <p>このモデルをシミュレートするときは、定常状態誤差がゼロに近付くことに注意します。</p><img vspace="5" hspace="5" src="../sf_slswitch_05.png" alt=""> <p>PID 制御が存在しないと、定常状態誤差 0.25 が発生します。<tt>PID_TRESH</tt> を 0.1 に変更する場合、ステート <tt>P</tt> を維持している間はエラーが 0.25 を下回ることは決してないので、<tt>PID</tt> ステートになることはありません<i></i>。</p><img vspace="5" hspace="5" src="../sf_slswitch_06.png" alt=""> <p class="footer">Copyright 2009 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Using Simulink(R) Functions in Stateflow(R) to Design Switching Controllers %  % This model demonstrates how you can design switching controllers by % combining the power of Stateflow and Simulink functions.  %   Copyright 2009 The MathWorks, Inc.  clear all close all bdclose all  model = 'sf_slswitch';  open_system(model);  ws = get_param(model, 'ModelWorkspace'); r = sfroot; m = r.find('-isa', 'Stateflow.Machine', 'Name', model); c = m.find('-isa', 'Stateflow.Chart', 'Name', 'SwitchingController');  c.Visible = 0; % close all scopes close_system(find_system(gcs, 'BlockType', 'Scope'));  %%  % The Stateflow chart |SwitchingController| implements a simple switching % controller which switches between three states: |STEADY|, |P| and |PID|. % When in |STEADY| state, we produce zero control output. When in |P| or % |PID|, we delegate to Simulink function call subsystems in order to % compute the required control effort. %  % The "Output State Activity" for the state |PID| is checked. Therefore, in % addition to the control output |u|, the Stateflow chart also produces a % logging output with the same name as the state |PID|.  %  % The condition for switching from |P| to |PID| is based on the error being % low enough |[e < PID_TRESH]|. |PID_TRESH| is a variable defined in the % Model Workspace with a value of 0.3.  c.Visible = 1; c.editor.ZoomFactor = 1;   %%  % The Simulink subsystem |SwitchingController/P.p_control| implements a % very simple proportional control with a gain of 3. If we had continued to % stay in the state |P|, the steady state gain of the closed-loop system % would be 3/4 = 0.75. Therefore, we would get an error of 0.25.  open_system([model '/SwitchingController/P.p_control']);  %%  % The Simulink subsystem |SwitchingController/PID.pid_control| implements a % simple PID control strategy. The proportional gain is the same as in |P| % thereby ensuring a smooth transition in the control effort.  open_system([model '/SwitchingController/PID.pid_control']);  %%  % When we simulate the model, we notice that the steady state error % approaches zero.  ws.assignin('PID_TRESH', 0.3); evalc('sim(model)'); open_system([model '/Scope']);   %%  close_system([model '/Scope']); c.Visible = 0;  %%  % In the absence of the PID control, we would have had a steady state error % of 0.25. If we change |PID_TRESH| to 0.1, we will _never_ get to |PID|, % because the error will never get below 0.25 as long as we are in state % |P|.  s = c.find('-isa', 'Stateflow.State', 'Name', 'PID'); t = c.find('-isa', 'Stateflow.Transition', 'Destination', s); ws.assignin('PID_TRESH', 0.1); evalc('sim(model)'); open_system([model '/Scope']);  %%   bdclose all; clear all; close all;  ##### SOURCE END ##### --></body></html>