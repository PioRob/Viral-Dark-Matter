
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>波形の生成</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="waveformdemo.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit waveformdemo">エディターで waveformdemo.m を開く</a></div><div class="right"><a href="matlab:echodemo waveformdemo">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>波形生成</h1><!--introduction--><p>Signal Processing Toolbox™ には、広く使用されている周期的な波形と非周期的な波形、数列 (インパルス、ステップ、ランプ)、多チャンネル信号、パルス列、関数 sinc とディリクレ関数を生成するための関数が用意されています。このデモは、それらのいくつかを説明します。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">周期的な波形</a></li><li><a href="#3">非周期的な波形</a></li><li><a href="#9">スイープ周波数波形</a></li><li><a href="#18">パルス列</a></li></ul></div><h2>周期的な波形<a name="1"></a></h2><p>ツールボックスには、MATLAB&reg; の関数 <b>sin</b> および関数 <b>cos</b> 以外に、関数 sawtooth や関数 square など、周期的な信号を生成する関数が用意されています。</p><p>関数 <b>sawtooth</b> は、ピークが &plusmn;1 で周期が 2*pi のノコギリ波を生成します。オプションの幅パラメーターは、信号が最大となる非整数倍数 2*pi を指定します。</p><p>関数 <b>square</b> は、周期が 2*pi の方形波を生成します。オプションのパラメーターは、信号が正となる周期の割合であるデューティ比を指定します。</p><p>10KHz のサンプリング レートを持つ 50Hz の ノコギリ波 (それぞれ矩形) を 1.5 秒間生成するには、次のようにします。</p><pre class="codeinput">fs = 10000;
t = 0:1/fs:1.5;
x1 = sawtooth(2*pi*50*t);
x2 = square(2*pi*50*t);
subplot(211),plot(t,x1), axis([0 0.2 -1.2 1.2])
xlabel(<span class="string">'Time (sec)'</span>);ylabel(<span class="string">'Amplitude'</span>); title(<span class="string">'Sawtooth Periodic Wave'</span>)
subplot(212),plot(t,x2), axis([0 0.2 -1.2 1.2])
xlabel(<span class="string">'Time (sec)'</span>);ylabel(<span class="string">'Amplitude'</span>); title(<span class="string">'Square Periodic Wave'</span>)
</pre><img vspace="5" hspace="5" src="../waveformdemo_01.png" alt=""> <h2>非周期的な波形<a name="3"></a></h2><p>三角パルス、矩形パルス、およびガウス パルスを生成するには、ツールボックスの関数 tripuls、関数 rectpuls、および関数 gauspuls を使用します。</p><p>関数 <b>tripuls</b> は、サンプリングされた非周期的な高さ 1 の三角パルスを t = 0 を中心として既定の幅 1 で生成します。</p><p>関数 <b>rectpuls</b> は、サンプリングされた非周期的な高さ 1 の矩形パルスを t = 0 を中心として既定の幅 1 で生成します。振幅がゼロ以外の間隔は、右側に開くように定義され、rectpuls(-0.5) = 1、rectpuls(0.5) = 0 になります。</p><p>10KHz のサンプリング レートおよび 20ms の幅を持つ三角パルス (それぞれ矩形) を 2 秒間生成するには、次のようにします。</p><pre class="codeinput">fs = 10000;
t = -1:1/fs:1;
x1 = tripuls(t,20e-3);
x2 = rectpuls(t,20e-3);
subplot(211),plot(t,x1), axis([-0.1 0.1 -0.2 1.2])
xlabel(<span class="string">'Time (sec)'</span>);ylabel(<span class="string">'Amplitude'</span>); title(<span class="string">'Triangular Aperiodic Pulse'</span>)
subplot(212),plot(t,x2), axis([-0.1 0.1 -0.2 1.2])
xlabel(<span class="string">'Time (sec)'</span>);ylabel(<span class="string">'Amplitude'</span>); title(<span class="string">'Rectangular Aperiodic Pulse'</span>)
set(gcf,<span class="string">'Color'</span>,[1 1 1]),
</pre><img vspace="5" hspace="5" src="../waveformdemo_02.png" alt=""> <p>関数 <b>gauspuls</b> は、指定した時間、中心周波数、および比帯域幅のガウス変調正弦波パルスを生成します。</p><p>関数 <b>sinc</b> は、入力ベクトルまたは行列の数学関数 sinc を計算します。関数 sinc は、幅 2*pi と高さ 1 の矩形パルスの連続逆フーリエ変換です。</p><p>1MHz のサンプリング レートで、60% の帯域幅を持つ 50kHz のガウス RF パルスを生成します。包絡線がピークから 40dB 減衰するところでパルスを打ち切ります。</p><pre class="codeinput">tc = gauspuls(<span class="string">'cutoff'</span>,50e3,0.6,[],-40);
t1 = -tc :1e-6 :tc;
y1 = gauspuls(t1,50e3,0.6);
</pre><p>線形間隔ベクトルの関数 sinc を生成します。</p><pre class="codeinput">t2 = linspace(-5,5);
y2 = sinc(t2);
</pre><pre class="codeinput">subplot(211),plot(t1*1e3,y1);
xlabel(<span class="string">'Time (ms)'</span>);ylabel(<span class="string">'Amplitude'</span>); title(<span class="string">'Gaussian Pulse'</span>)
subplot(212),plot(t2,y2);
xlabel(<span class="string">'Time (sec)'</span>);ylabel(<span class="string">'Amplitude'</span>); title(<span class="string">'Sinc Function'</span>)
set(gcf,<span class="string">'Color'</span>,[1 1 1]),
</pre><img vspace="5" hspace="5" src="../waveformdemo_03.png" alt=""> <h2>スイープ周波数波形<a name="9"></a></h2><p>ツールボックスの関数を使用して、関数 <b>chirp</b> などのスイープ周波数波形を生成することもできます。2 つのオプションのパラメーターは、別のスイープ メソッドと初期位相 (単位: degree) を指定します。以下の例では、関数 chirp を使用して、線形または 2 次の凸および凹、2 次チャープを生成します。</p><p>線形チャープを生成します。</p><pre class="codeinput">t = 0:0.001:2;                 <span class="comment">% 2 secs @ 1kHz sample rate</span>
ylin = chirp(t,0,1,150);       <span class="comment">% Start @ DC, cross 150Hz at t=1sec</span>
</pre><p>2 次チャープを生成します。</p><pre class="codeinput">t = -2:0.001:2;                <span class="comment">% +/-2 secs @ 1kHz sample rate</span>
yq = chirp(t,100,1,200,<span class="string">'q'</span>);   <span class="comment">% Start @ 100Hz, cross 200Hz at t=1sec</span>
</pre><p>スペクトログラムを計算して、表示します。</p><pre class="codeinput">subplot(211),spectrogram(ylin,256,250,256,1E3,<span class="string">'yaxis'</span>);
title(<span class="string">'Linear Chirp'</span>)
subplot(212),spectrogram(yq,128,120,128,1E3,<span class="string">'yaxis'</span>);
title(<span class="string">'Quadratic Chirp'</span>)
set(gcf,<span class="string">'Color'</span>,[1 1 1]);
</pre><img vspace="5" hspace="5" src="../waveformdemo_04.png" alt=""> <p>凸 2 次チャープを生成します。</p><pre class="codeinput">t = -1:0.001:1;                <span class="comment">% +/-1 second @ 1kHz sample rate</span>
fo=100; f1=400;                <span class="comment">% Start at 100Hz, go up to 400Hz</span>
ycx = chirp(t,fo,1,f1,<span class="string">'q'</span>,[],<span class="string">'convex'</span>);
</pre><p>凹 2 次チャープを生成します。</p><pre class="codeinput">t = -1:0.001:1;                <span class="comment">% +/-1 second @ 1kHz sample rate</span>
fo=400; f1=100;                <span class="comment">% Start at 400Hz, go down to 100Hz</span>
ycv=chirp(t,fo,1,f1,<span class="string">'q'</span>,[],<span class="string">'concave'</span>);
</pre><p>スペクトログラムを計算して、表示します。</p><pre class="codeinput">subplot(211),spectrogram(ycx,256,255,128,1000,<span class="string">'yaxis'</span>);
title(<span class="string">'Convex Chirp'</span>)
subplot(212),spectrogram(ycv,256,255,128,1000,<span class="string">'yaxis'</span>);
title(<span class="string">'Concave Chirp'</span>)
set(gcf,<span class="string">'Color'</span>,[1 1 1]);
</pre><img vspace="5" hspace="5" src="../waveformdemo_05.png" alt=""> <p>別のファンクション ジェネレーターは関数 <b>vco</b> (電圧制御発振器) で、入力ベクトルによって決定された周波数で振動する信号を生成します。次の 2 つの例では、三角形および矩形の入力を持つ関数 vco を使用します。</p><p>瞬間的な周波数が時間の三角関数 (それぞれ矩形) となる 10kHz でサンプリングした 2 秒間の信号を生成します。</p><pre class="codeinput">fs = 10000;
t = 0:1/fs:2;
x1 = vco(sawtooth(2*pi*t,0.75),[0.1 0.4]*fs,fs);
x2 = vco(square(2*pi*t),[0.1 0.4]*fs,fs);
</pre><p>生成した信号のスペクトログラムをプロットします。</p><pre class="codeinput">subplot(211),spectrogram(x1,kaiser(256,5),220,512,fs,<span class="string">'yaxis'</span>);
title(<span class="string">'VCO Triangle'</span>)
subplot(212),spectrogram(x2,256,255,256,fs,<span class="string">'yaxis'</span>)
title(<span class="string">'VCO Rectangle'</span>)
set(gcf,<span class="string">'Color'</span>,[1 1 1]);
</pre><img vspace="5" hspace="5" src="../waveformdemo_06.png" alt=""> <h2>パルス列<a name="18"></a></h2><p>パルス列を生成するには、関数 <b>pulstran</b> を使用します。次の 2 つの例で、この関数の使用方法を示します。</p><p>レート 100GHz、間隔 7.5nS でサンプリングされた 2GHz の矩形パルスの列を生成します。</p><pre class="codeinput">fs = 100E9;                    <span class="comment">% sample freq</span>
D = [2.5 10 17.5]' * 1e-9;     <span class="comment">% pulse delay times</span>
t = 0 :1/fs :2500/fs;        <span class="comment">% signal evaluation time</span>
w = 1e-9;                      <span class="comment">% width of each pulse</span>
yp = pulstran(t,D,@rectpuls,w);
</pre><p>10kHz で 50% の帯域幅を持つ周期性ガウス パルス信号を生成します。パルス反復周波数は 1kHz、サンプリング レートは 50kHz、パルス列の長さは 10 ミリ秒です。反復振幅は毎回 0.8 ずつ減衰します。次の例では、生成関数を参照するために関数ハンドルを使用します。</p><pre class="codeinput">T = 0 :1/50E3 :10E-3;
D = [0 :1/1E3 :10E-3 ; 0.8.^(0:10)]';
Y = pulstran(T,D,@gauspuls,10E3,.5);
</pre><pre class="codeinput">subplot(211),plot(t*1e9,yp);axis([0 25 -0.2 1.2])
xlabel(<span class="string">'Time (ns)'</span>); ylabel(<span class="string">'Amplitude'</span>); title(<span class="string">'Rectangular Train'</span>)
subplot(212),plot(T*1e3,Y)
xlabel(<span class="string">'Time (ms)'</span>); ylabel(<span class="string">'Amplitude'</span>); title(<span class="string">'Gaussian Pulse Train'</span>)
set(gcf,<span class="string">'Color'</span>,[1 1 1]),
</pre><img vspace="5" hspace="5" src="../waveformdemo_07.png" alt=""> <p class="footer">Copyright 2004-2007 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Waveform Generation % The Signal Processing Toolbox(TM) provides functions for generating widely % used periodic and aperiodic waveforms, sequences (impulse, step, ramp), % multichannel signals, pulse trains, sinc and Dirichlet functions. This % demo illustrates some of them.  % Copyright 2004-2007 The MathWorks, Inc. % $Revision: 1.1.4.2.2.1 $  $Date: 2010/07/29 21:29:04 $  %% Periodic Waveforms % In addition to the *sin* and *cos* functions in MATLAB(R), the toolbox % offers other functions that produce periodic signals such as sawtooth and % square. % % The *sawtooth* function generates a sawtooth wave with peaks at ±1 and a % period of 2*pi. An optional width parameter specifies a fractional % multiple of 2*pi at which the signal's maximum occurs.  % % The *square* function generates a square wave with a period of 2*pi. An % optional parameter specifies duty cycle, the percent of the period for % which the signal is positive.  %% % To generate 1.5 seconds of a 50 Hz sawtooth (respectively square) wave with % a sample rate of 10 kHz, use: fs = 10000; t = 0:1/fs:1.5; x1 = sawtooth(2*pi*50*t); x2 = square(2*pi*50*t); subplot(211),plot(t,x1), axis([0 0.2 -1.2 1.2]) xlabel('Time (sec)');ylabel('Amplitude'); title('Sawtooth Periodic Wave') subplot(212),plot(t,x2), axis([0 0.2 -1.2 1.2]) xlabel('Time (sec)');ylabel('Amplitude'); title('Square Periodic Wave')  %% Aperiodic Waveforms % To generate triangular, rectangular and Gaussian pulses, the toolbox % offers the tripuls, rectpuls and gauspuls functions. % % The *tripuls* function generates a sampled aperiodic, unity-height % triangular pulse centered about t = 0 and with a default width of 1. % % The *rectpuls* function generates a sampled aperiodic, unity-height % rectangular pulse centered about t = 0 and with a default width of 1. % Note that the interval of non-zero amplitude is defined to be open on the % right, that is, rectpuls(-0.5) = 1 while rectpuls(0.5) = 0.  %% % To generate 2 seconds of a triangular (respectively rectangular) pulse with % a sample rate of 10 kHz and a width of 20 ms, use: fs = 10000; t = -1:1/fs:1; x1 = tripuls(t,20e-3); x2 = rectpuls(t,20e-3); subplot(211),plot(t,x1), axis([-0.1 0.1 -0.2 1.2]) xlabel('Time (sec)');ylabel('Amplitude'); title('Triangular Aperiodic Pulse') subplot(212),plot(t,x2), axis([-0.1 0.1 -0.2 1.2]) xlabel('Time (sec)');ylabel('Amplitude'); title('Rectangular Aperiodic Pulse') set(gcf,'Color',[1 1 1]), %% % The *gauspuls* function generates a Gaussian-modulated sinusoidal pulse % with a specified time, center frequency, and fractional bandwidth. % % The *sinc* function computes the mathematical sinc function for an input % vector or matrix. The sinc function is the continuous inverse Fourier % transform of the rectangular pulse of width 2*pi and height 1. %% % Generate a 50 kHz Gaussian RF pulse with 60% bandwidth, sampled at a rate of % 1 MHz. Truncate the pulse where the envelope falls 40 dB below the peak: tc = gauspuls('cutoff',50e3,0.6,[],-40);  t1 = -tc : 1e-6 : tc;  y1 = gauspuls(t1,50e3,0.6);  %% % Generate the sinc function for a linearly spaced vector: t2 = linspace(-5,5); y2 = sinc(t2); %% subplot(211),plot(t1*1e3,y1); xlabel('Time (ms)');ylabel('Amplitude'); title('Gaussian Pulse') subplot(212),plot(t2,y2); xlabel('Time (sec)');ylabel('Amplitude'); title('Sinc Function') set(gcf,'Color',[1 1 1]),  %% Swept-Frequency Waveforms % The toolbox also provides functions to generate swept-frequency waveforms % such as the *chirp* function. Two optional parameters specify alternative % sweep methods and initial phase in degrees. Below are several examples of % using the chirp function to generate linear or quadratic, convex and % concave quadratic chirps. %% % Generate a linear chirp: t = 0:0.001:2;                 % 2 secs @ 1kHz sample rate ylin = chirp(t,0,1,150);       % Start @ DC, cross 150Hz at t=1sec %% % Generate a quadratic chirp: t = -2:0.001:2;                % +/-2 secs @ 1kHz sample rate yq = chirp(t,100,1,200,'q');   % Start @ 100Hz, cross 200Hz at t=1sec %% % Compute and display the spectrograms subplot(211),spectrogram(ylin,256,250,256,1E3,'yaxis'); title('Linear Chirp') subplot(212),spectrogram(yq,128,120,128,1E3,'yaxis'); title('Quadratic Chirp') set(gcf,'Color',[1 1 1]); %% % Generate a convex quadratic chirp. t = -1:0.001:1;                % +/-1 second @ 1kHz sample rate fo=100; f1=400;                % Start at 100Hz, go up to 400Hz ycx = chirp(t,fo,1,f1,'q',[],'convex'); %% % Generate a concave quadratic chirp:  t = -1:0.001:1;                % +/-1 second @ 1kHz sample rate fo=400; f1=100;                % Start at 400Hz, go down to 100Hz ycv=chirp(t,fo,1,f1,'q',[],'concave'); %% % Compute and display the spectrograms subplot(211),spectrogram(ycx,256,255,128,1000,'yaxis'); title('Convex Chirp') subplot(212),spectrogram(ycv,256,255,128,1000,'yaxis'); title('Concave Chirp') set(gcf,'Color',[1 1 1]); %% % Another function generator is the *vco* (Voltage Controlled Oscillator) % which generates a signal oscillating at a frequency determined by the % input vector. Let's look at two examples using vco with an triangle and % rectangle input. % % Generate 2 seconds of a signal sampled at 10kHz whose instantaneous % frequency is a triangle (respectively a rectangle) function of time:  fs = 10000; t = 0:1/fs:2; x1 = vco(sawtooth(2*pi*t,0.75),[0.1 0.4]*fs,fs); x2 = vco(square(2*pi*t),[0.1 0.4]*fs,fs); %% % Plot the spectrograms of the generated signals:  subplot(211),spectrogram(x1,kaiser(256,5),220,512,fs,'yaxis'); title('VCO Triangle') subplot(212),spectrogram(x2,256,255,256,fs,'yaxis') title('VCO Rectangle') set(gcf,'Color',[1 1 1]);  %% Pulse Trains % To generate pulse trains, we can use the *pulstran* function. Below, % we'll showcase two examples on how to use this function.  % % Construct a train of 2 GHz rectangular pulses sampled at a rate of 100 % GHz at a spacing of 7.5nS. fs = 100E9;                    % sample freq D = [2.5 10 17.5]' * 1e-9;     % pulse delay times t = 0 : 1/fs : 2500/fs;        % signal evaluation time w = 1e-9;                      % width of each pulse yp = pulstran(t,D,@rectpuls,w); %% % Generate a periodic Gaussian pulse signal at 10 kHz, with 50% bandwidth. % The pulse repetition frequency is 1 kHz, sample rate is 50 kHz, and pulse % train length is 10msec. The repetition amplitude should attenuate by 0.8 % each time. The example uses a function handle to refer to the generator % function. T = 0 : 1/50E3 : 10E-3; D = [0 : 1/1E3 : 10E-3 ; 0.8.^(0:10)]'; Y = pulstran(T,D,@gauspuls,10E3,.5);  %% subplot(211),plot(t*1e9,yp);axis([0 25 -0.2 1.2]) xlabel('Time (ns)'); ylabel('Amplitude'); title('Rectangular Train') subplot(212),plot(T*1e3,Y) xlabel('Time (ms)'); ylabel('Amplitude'); title('Gaussian Pulse Train') set(gcf,'Color',[1 1 1]),   displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>