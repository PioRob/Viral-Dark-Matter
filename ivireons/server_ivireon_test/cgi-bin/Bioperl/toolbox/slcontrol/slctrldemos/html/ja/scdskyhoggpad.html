
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>FRESTIMATE を使った周波数領域における線形化の検証</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="scdskyhoggpad.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit scdskyhoggpad">エディターで scdskyhoggpad.m を開く</a></div><div class="right"><a href="matlab:echodemo scdskyhoggpad">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>FRESTIMATE を使った周波数領域における線形化の検証</h1><!--introduction--><p>このデモでは、軽量飛行機モデルにコマンド LINEARIZE を使用して得られたブロックごとの解析的な線形化結果を検証するために、周波数応答推定を使用する方法を説明します。このデモを実行するには、Aerospace Blockset™ が必要であることに注意してください。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">手順 1: モデルを開く</a></li><li><a href="#2">手順 2: 軽量飛行機の解析的な線形化の実行</a></li><li><a href="#3">手順 3: 周波数応答の推定</a></li></ul></div><h2>手順 1: モデルを開く<a name="1"></a></h2><p>軽量飛行機の Simulink&reg; モデルを開きます。このモデルの詳細は、Aerospace Blockset の<a href="../../../aeroblks/aerodemos/html/asbSkyHogg.html">軽量飛行機の設計</a>のデモを参照してください。</p><pre class="codeinput">scdskyhogg
mdl = <span class="string">'scdskyhogg'</span>;
</pre><img vspace="5" hspace="5" src="../scdskyhoggpad_01.png" alt=""> <h2>手順 2: 軽量飛行機の解析的な線形化の実行<a name="2"></a></h2><p>LINEARIZE コマンドを使用して、軽量飛行機モデルを、高度コマンド &quot;AltCmd&quot; から測定された高度 &quot;h_sensed&quot; まで線形化できます。線形化 I/O ポイントは、モデル上で既にマークされています。モデルは、t=75 のシミュレーション スナップショットを使用して取得した操作点を使用するよう事前に設定されています。</p><pre class="codeinput">io = getlinio(mdl);
sys = linearize(mdl,io);
bode(sys)
</pre><img vspace="5" hspace="5" src="../scdskyhoggpad_02.png" alt=""> <h2>手順 3: 周波数応答の推定<a name="3"></a></h2><p>FRESTIMATE を使用して線形化の結果を検証し、線形化結果が、約 6.28 rad/s (1 Hz) の反共振振動数など、非線形モデルの特性を適切に取得するかどうかを判断できます。</p><p>まず、sinestream の入力信号を作成します。線形化結果を入力引数として使用し、線形システムに基づいた、周波数と各周波数の期間数のセットなど、sinesteam の入力信号のさまざまパラメーターを自動的に設定します。</p><pre class="codeinput">in = frest.Sinestream(sys);
in.Amplitude = 0.5
</pre><pre class="codeoutput"> 
The sinestream input signal:
 
      Frequency           : [0.0034143;0.0054345;0.0086502;0.013768 ...] (rad/s)
      Amplitude           : 0.5
      SamplesPerPeriod    : [110416;69370;43582;27381 ...]
      NumPeriods          : [4;4;4;4 ...]
      RampPeriods         : 0
      FreqUnits (rad/s,Hz): rad/s
      SettlingPeriods     : [1;1;1;1 ...]
      ApplyFilteringInFRESTIMATE (on/off)    : on
      SimulationOrder (Sequential/OneAtATime): Sequential
 
</pre><p>0.0034 rad/s ～ 14.5 rad/s の変動に対する応答を計算するために 25 の周波数が検出されることに注意してください。設計によって、自動的に検出される周波数は、興味深いダイナミクスが発生するところ (6.28 rad/s の反共振振動数など) に注目します。システムが定常状態に到達するのに要する期間数は、これらの周波数ごとに推定され、1 期間 (0.0034 rad/s の場合) ～ 188 期間 (14.5 rad/s の場合) で変動します。</p><p>次に、この入力信号を使用して FRESTIMATE コマンドを実行します。FRESTIMATE は、入力信号を使用して Simulink&reg; モデルをシミュレートすることに注意してください。これは、通常のシミュレーション モデルでは長時間を要しますが、モデルはシミュレーションを高速化するために &quot;ラピッド アクセラレータ&quot; モードを使用するよう事前に設定されています。FRESTIMATE では、ラピッド アクセラレータのシミュレーションを完全にサポートしています。Intel&reg; Core(TM)2 Quad 2.4GHz プロセッサーを搭載した、RAM が 4GB の PC の場合、&quot;ラピッド アクセラレータ&quot; モードでのシミュレーションは約 6 分かかります。&quot;ノーマル&quot; モードでの同じシミュレーションは、3 時間以上かかります。このモデルの場合、&quot;ラピッド アクセラレータ&quot; では、シミュレーションの速度は 30 倍以上上がります。次のラインを非コメント化して、実際の FRESTIMATE コマンドをラピッド アクセラレータ モードで実行します。そうでない場合、推定結果は MAT ファイルから読み込まれます。</p><pre class="codeinput">set_param(mdl,<span class="string">'SimulationMode'</span>,<span class="string">'rapid'</span>);
<span class="comment">% curdir = cd(tempdir);</span>
<span class="comment">% sysest = frestimate(mdl,in,io);</span>
<span class="comment">% cd(curdir);</span>
load(<span class="string">'scdskyhogg_frestresults.mat'</span>);
</pre><p>解析的な線形化結果を FRESTIMATE からの周波数応答データと比較します。周波数応答データは、周波数 1 ～ 10 rad/s の反共振振動数が実際の非線形の飛行機モデルには存在しないことを検証する解析的な線形化結果によく一致します。</p><pre class="codeinput">bode(sys,sysest,<span class="string">'r*'</span>);
</pre><img vspace="5" hspace="5" src="../scdskyhoggpad_03.png" alt=""> <p>モデルを閉じます。</p><pre class="codeinput">bdclose(<span class="string">'scdskyhogg'</span>);
</pre><p class="footer">Copyright 2005-2009 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Linearization Validation in Frequency Domain Using FRESTIMATE % Copyright 2005-2009 The MathWorks, Inc. % $Revision: 1.1.4.2.2.1 $ $Date: 2010/07/29 21:29:23 $ %  % This demo illustrates how to use frequency response estimation in order to validate a % block-by-block analytical linearization result obtained with the command % LINEARIZE on the lightweight airplane model. Note that to run this demo, % you need Aerospace Blockset™.  %% Step 1: Opening the Model % Open the Simulink(R) model for lightweight airplane. More % information on this model can be found in the demonstration % <../../../aeroblks/aerodemos/html/asbSkyHogg.html "Lightweight Airplane Design"> % in Aerospace Blockset demos. scdskyhogg mdl = 'scdskyhogg';  %% Step 2: Performing Analytical Linearization of Lightweight Airplane Model % You can linearize the lightweight airplane model from the % altitude command "AltCmd" to sensed height "h_sensed" using the LINEARIZE % command. The linearization I/O points are already marked on the model. The model % is pre-configured to use an operating point obtained using simulation % snapshot at t=75. io = getlinio(mdl); sys = linearize(mdl,io); bode(sys)  %% Step 3: Estimating the Frequency Response % You can validate the linearization result using FRESTIMATE to determine % whether the linearization results properly capture characteristics of the % nonlinear model such as the anti-resonance around 6.28 rad/s (1 Hz).   %%  % First, create a sinestream input signal. Use the % linearization result as an input argument to automatically set various % parameters of the sinesteam input signal, such as the set of frequencies % and the number of periods for each frequency, based on the linear system. in = frest.Sinestream(sys); in.Amplitude = 0.5  %% % Notice that 25 frequencies are picked to compute the response for, varying between % 0.0034 rad/s and 14.5 rad/s. Note that by design, the frequencies that % are automatically picked focus on where interesting dynamics occur (such as the anti-resonance at % 6.28 rad/s). The number of periods that it will take for   % the system to reach steady state is estimated for each of these % frequencies and varies between 1 period (for 0.0034 rad/s) and 188 % periods (for 14.5 rad/s).  %% % Then, run the FRESTIMATE command using this input signal. Note that % FRESTIMATE simulates the Simulink(R) model with the input signal. This % can take a long time in normal simulation model, but the % model is pre-configured to use "Rapid Accelerator" mode to speed up the % simulation. FRESTIMATE fully supports rapid accelerator simulations. % On a PC with Intel(R) Core(TM)2 Quad 2.4GHz processor and % 4GB of RAM, the simulation with "Rapid Accelerator" mode takes around 6 % minutes. The same simulation in "Normal" mode takes more than 3 hours. % "Rapid Accelerator" increases the speed of simulation more than 30x  % for this model. Uncomment the lines below to run the actual FRESTIMATE % command with Rapid Accelerator mode, otherwise estimation result will be % loaded from the MAT-file. set_param(mdl,'SimulationMode','rapid'); % curdir = cd(tempdir); % sysest = frestimate(mdl,in,io); % cd(curdir); load('scdskyhogg_frestresults.mat');    %% % Compare the analytical linearization result against the frequency % response data from FRESTIMATE. The frequency response data matches well % with analytical linearization  % result validating that anti-resonance between the frequencies 1 % and 10 rad/s does exist in the actual nonlinear airplane model. bode(sys,sysest,'r*');  %% % Close the model: bdclose('scdskyhogg'); displayEndOfDemoMessage(mfilename)        ##### SOURCE END ##### --></body></html>