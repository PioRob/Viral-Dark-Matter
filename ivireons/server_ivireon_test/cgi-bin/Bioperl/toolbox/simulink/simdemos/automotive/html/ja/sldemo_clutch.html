
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>クラッチ ロックアップ モデルの作成</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="sldemo_clutch.m"><link rel="stylesheet" type="text/css" href="../../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left">sldemo_clutch.mdl</div><div class="right"><a href="matlab:sldemo_clutch">このモデルを開く</a></div></div><div class="content"><h1>クラッチ ロックアップ モデルの作成</h1><!--introduction--><p>この例では、Simulink&reg; を使用して回転クラッチ システムをモデル化およびシミュレートする方法を示します。 ロックアップ時にシステム ダイナミクスにおいてトポロジーが変化するため、クラッチ システムのモデル化は困難ですが、この例題では、Simulink の Enabled Subsystem がこのような問題をいかに簡単に処理できるかを示します。 クラッチ シミュレーションの作成において重要な Simulink モデル化概念を採用する方法を説明します。 設計者は、動的に変化する可能性がある強い不連続性と制約を伴う多くのモデルにこうした概念を適用できます。</p><p>このデモでは、Enabled Subsystem を使用してクラッチ モデルを作成します。 2 つの Enabled Subsystem がロック位置またはロック解除位置のいずれかでクラッチ ダイナミクスをモデル化します。 シミュレーションの実行後に、GUI が開きます。 GUI 上のボックスのいずれかをチェックすると、(時間に対して) 選択された変数のいずれかのプロットが生成されます。</p><p>Enabled Subsystem ではなく、If/Else ブロックを使用する代替クラッチ モデル (<tt>sldemo_clutch_if.mdl</tt>) があります (<a href="matlab:open_system('sldemo_clutch_if')">他のクラッチ モデルを開く</a>)。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">解析と物理学</a></li><li><a href="#13">モデル化</a></li><li><a href="#14">- モデルを開き、シミュレーションを実行</a></li><li><a href="#17">- Unlocked サブシステム</a></li><li><a href="#20">- Locked サブシステム</a></li><li><a href="#22">- Friction Mode Logic サブシステム</a></li><li><a href="#24">- その他のコンポーネント</a></li><li><a href="#25">- システム入力</a></li><li><a href="#27">- 結果</a></li><li><a href="#31">モデルを閉じる</a></li><li><a href="#32">まとめ</a></li></ul></div><h2>解析と物理学<a name="1"></a></h2><p>この例題のクラッチ システムは、エンジンとトランスミッション間でトルクを伝達する 2 つのプレートで構成されています (図 1 を参照)。 次の 2 つの異なる動作モードがあります。</p><p>1) 滑り - 2 つのプレートが異なる角速度を持ちます。</p><p>2) ロックアップ - 2 つのプレートが一緒に回転します。</p><p>これら 2 つのモード間の遷移を処理することは、モデル化の困難な課題となっています。 システムはロックアップ時に 1 つの自由度を失うため、伝達されたトルクはステップ不連続点を通過します。 トルクの大きさは、摩擦力でサポートされる最大値から、システムの 2 つの部分を同じ速度で回転させ続けるために必要な値に減少します。 クラッチ プレートによって伝達されるトルクが摩擦力を超えるため、逆遷移、つまり、分解も同様に困難です。</p><p><img vspace="5" hspace="5" src="../sldemo_clutch_figure1.png" alt=""> </p><p><b>図 1: </b> 集中定数モデルを使用して解析されたクラッチ システム</p><p><b>使用される変数</b></p><p>次の変数は、解析とモデル化に使用されます。</p><p><img src="../sldemo_clutch_eq78790.png" alt="$$ T_{in} = \mbox{input (engine) torque; }$$"></p><p><img src="../sldemo_clutch_eq85998.png" alt="$$F_n = \mbox{normal force between friction plates; } $$"></p><p><img src="../sldemo_clutch_eq74724.png" alt="$$ I_e, I_v = \mbox{ moments of inertia for the engine and for the
transmission/vehicle; } $$"></p><p><img src="../sldemo_clutch_eq97042.png" alt="$$ b_e, b_v = \mbox{ damping rates at the engine and transmission/vehicle
sides of the clutch; } $$"></p><p><img src="../sldemo_clutch_eq34265.png" alt="$$ \mu_k, \mu_s = \mbox{ kinetic and static coefficients of friction; } $$"></p><p><img src="../sldemo_clutch_eq87016.png" alt="$$\omega_e, \omega_v = \mbox{angular speeds of the engine and transmission input shafts; }$$"></p><p><img src="../sldemo_clutch_eq17545.png" alt="$$ r_1, r_2 = \mbox{inner and outer radii of the clutch plate friction
surfaces; } $$"></p><p><img src="../sldemo_clutch_eq89210.png" alt="$$R = \mbox{equivalent net radius;}$$"></p><p><img src="../sldemo_clutch_eq68180.png" alt="$$T_{cl} = \mbox{torque transmitted through the clutch;}$$"></p><p><img src="../sldemo_clutch_eq38057.png" alt="$$T_l = \mbox{friction torque required of the clutch to maintain lockup;}
$$"></p><p><b>方程式 1</b></p><p>連結システムの状態方程式は次のように導出されます。</p><p><img src="../sldemo_clutch_eq54227.png" alt="$$
I_e \dot{\omega}_e = T_{in}-b_e\omega_e -T_d
$$"></p><p><img src="../sldemo_clutch_eq49880.png" alt="$$
I_v \dot{\omega}_v = T_{d}-b_v\omega_v
$$"></p><p><b>方程式 2</b></p><p>クラッチのトルク容量は、そのサイズと摩擦特性、加えられる垂直抗力の関数です。</p><p><img src="../sldemo_clutch_eq68946.png" alt="$$ (T_f)_{\mbox{max}} = \int \int_{A} \frac{r \times F_f}{A} da
= \frac{F_n \mu}{\pi (r_2^2-r_1^2)} \int^{r_2}_{r_1} \int^{2\pi}_{0} r^2
dr d\theta
= \frac{2}{3}R F_n \mu
$$"></p><p><img src="../sldemo_clutch_eq47746.png" alt="$$R=\frac{r^3_2-r^3_1}{r^2_2-r^2_1}$$"></p><p><b>方程式 3</b></p><p>クラッチが滑っている場合、このモデルは動摩擦係数を使用するため、滑り方向と反対の方向に、全容量が利用可能です。</p><p><img src="../sldemo_clutch_eq35468.png" alt="$$T_{fmaxk}=\frac{2}{3}R F_n \mu_k$$"></p><p><img src="../sldemo_clutch_eq28519.png" alt="$$ T_d = sgn ( \omega_e - \omega_v ) T_{fmaxk} $$"></p><p><b>方程式 4</b></p><p>クラッチがロックされている場合、エンジンおよびトランスミッションの入力シャフトの角速度は同じであるため、システム トルクは単一ユニットとして結合した慣性に従って動作します。したがって、微分方程式 (方程式 1) を組み合わせて、ロック状態に対する単一方程式にします。</p><p><img src="../sldemo_clutch_eq62568.png" alt="$$\omega_e=\omega_v=\omega$$"></p><p><img src="../sldemo_clutch_eq13876.png" alt="$$(I_e+I_v)\dot{\omega}=T_{in}-(b_e+b_v)\dot{\omega}$$"></p><p><b>方程式 5</b></p><p>方程式 1 と方程式 4 を解くと、ロック時にクラッチによって伝達されるトルクは次のようになります。</p><p><img src="../sldemo_clutch_eq87727.png" alt="$$T_c=T_f=\frac{I_v T_{in} - (I_v b_e-I_e b_v)\omega }{I_v+I_e}$$"></p><p><b>方程式 6</b></p><p><tt>Tf</tt> の大きさが静摩擦力 <tt>Tfmaxs</tt> を超えない限り、クラッチはロックされたままになります。</p><p><img src="../sldemo_clutch_eq64941.png" alt="$$ T_{fmaxs} = \frac{2}{3} R F_n \mu_s $$"></p><p>図 2 の状態図は、クラッチの全体的な動作を記述しています。</p><p><img vspace="5" hspace="5" src="../sldemo_clutch_figure2.png" alt=""> </p><p><b>図 2:</b> 摩擦モードの遷移を記述する状態図</p><h2>モデル化<a name="13"></a></h2><p>このタイプの問題を解決するには、次の 2 つの方法があります。</p><p>1) 常時伝達されるクラッチ トルクを計算し、モデルで直接この値を使用する</p><p>2) 2 つの異なる動的モデルを使用し、適切なタイミングでそれらを切り替える</p><p>その総合的な機能のため、Simulink は両方の方法をモデル化できます。この例題では、2 番目の方法のシミュレーションについて説明します。2 番目の方法では、新しいモデルの初期化状態が切り替え直前の状態値と一致するように、2 つの動的モデルの切り替えは慎重に行わなければなりません。ただし、いずれの方法でも、Simulink は、ロックアップと滑り間の遷移が発生する正確な瞬間を認識できるため、正確なシミュレーションを容易にします。</p><p>クラッチ システムのシミュレーション モデルでは、Simulink の特に便利な機能である Enabled Subsystem を使用します。シミュレーションでは、クラッチが滑っている場合に一方のサブシステムを使用でき、クラッチがロックされている場合に他方のサブシステムを使用できます。Simulink モデルのブロック線図を図 3 に示します。</p><h2>- モデルを開き、シミュレーションを実行<a name="14"></a></h2><p><a href="matlab:open_system('sldemo_clutch')">このモデルを開く</a>には、MATLAB&reg; 端末に <tt>sldemo_clutch</tt> と入力します (MATLAB ヘルプを使用している場合は、ハイパーリンクをクリックします)。</p><p>モデルが開いたら、モデル ツール バーの [再生] ボタンを押してシミュレーションを実行します。</p><div><ul><li>メモ:MATLAB ヘルプを使用している場合、デモ ページからコードを実行するには、そのコードを選択して F9 キーを押します。コードを選択して右クリックし、[選択を評価] を選択することもできます。</li></ul></div><img vspace="5" hspace="5" src="../sldemo_clutch_01.png" alt=""> <img vspace="5" hspace="5" src="../sldemo_clutch_02.png" alt=""> <p><b>図 3:</b> クラッチ モデルの最上位レベルのブロック線図</p><div><ul><li>メモ:このモデルは、MATLAB ワークスペースの <tt>sldemo_clutch_output</tt> という構造体に関連データのログを作成します。ログを作成する信号は青色のインジケーターを持ちます (<a href="matlab:open_system('sldemo_clutch')">モデルを参照</a>)。信号ログの詳細は、Simulink ヘルプを参照してください。</li></ul></div><h2>- Unlocked サブシステム<a name="17"></a></h2><p>モデル ウィンドウで Unlocked サブシステムをダブルクリックしてこれを開きます。このサブシステムは、摩擦トルクによって連結される、クラッチの両側をモデル化します。これは、エンジン速度と車両速度を計算する積分器ブロックの周りに作成されます (図 4 を参照)。このモデルはゲイン、乗算および加算ブロックを使用して、状態と、エンジン トルクのサブシステム入力 <tt>Tin</tt>、クラッチ容量 <tt>Tfmaxk</tt> から速度導関数 (加速度) を計算します。</p><img vspace="5" hspace="5" src="../sldemo_clutch_03.png" alt=""> <p><b>図 4:</b> Unlocked サブシステム</p><p>Unlocked などの Enabled Subsystem には、他にもいくつか注目すべき特性があります。図 4 のブロック線図の上部にある Enable ブロックは、モデルを Enabled Subsystem として定義します。Enabled Subsystem を作成するには、他のサブシステムと同じようにブロックをグループ化します。次に、Simulink Connections ライブラリから Enable ブロックを挿入します。これは、以下のことを意味します。</p><div><ul><li>Enable 入力がサブシステム ブロック上に表示され、Enable ブロック自体で使用されるパルスの形をした記号で識別されます。</li></ul></div><div><ul><li>このサブシステムが実行されるのは、Enable 入力時の信号が 0 より大きい場合だけです。</li></ul></div><p>この例題では、Unlocked サブシステムが実行されるのは、監視システム ロジックが、このサブシステムを有効にすべきであると判断した場合だけです。</p><p>有効または無効にできるシステムを使用する場合に重要な考慮事項がもう 1 つあります。システムが有効になると、正しい点からシミュレーションを開始できるように、シミュレーションは積分器を再初期化しなければなりません。この場合、クラッチがロック解除された瞬間にクラッチの両側が同じ速度で移動しています。休止中であった Unlocked サブシステムは、その速度で両方の積分器を初期化して、システム速度を連続した状態に保つ必要があります。</p><p>このシミュレーションは From ブロックを使用して、ロック速度の状態を 2 つの積分器の初期条件入力に伝達します。各 From ブロックは、それ自体とシステム内の別の場所にある Goto ブロックとの間の非表示の接続を表しています。Goto ブロックは積分器の状態端子に接続して、接続線を明示的に描画しなくても、モデルがシステム内の別の場所でこれらの状態を使用できるようにします。</p><h2>- Locked サブシステム<a name="20"></a></h2><p>モデル ウィンドウで Locked サブシステムをダブルクリックしてこれを開きます。これは、クラッチ モデルのもう 1 つの Enabled Subsystem です (図 5 を参照)。このサブシステムは単一の状態を使用して、エンジン速度と車両速度を表します。加速度を速度と入力トルクの関数として計算します。Unlocked の場合と同様に、From ブロックは積分器初期条件を提供し、Goto ブロックは、モデル内の別の場所で使用できるように状態をブロードキャストします。シミュレーション中、Locked サブシステムまたは Unlocked サブシステムのいずれかが常にアクティブになります。コントロールが変更されるたびに、状態は 2 つのサブシステム間で適切に引き渡されます。</p><img vspace="5" hspace="5" src="../sldemo_clutch_04.png" alt=""> <p><b>図 5:</b> Locked サブシステム</p><h2>- Friction Mode Logic サブシステム<a name="22"></a></h2><p>Friction Mode Logic サブシステム (図 6 に示す) は、次の式に従って、(適切な摩擦係数を使用して) 静摩擦と動摩擦を計算します。</p><p><img src="../sldemo_clutch_eq18201.png" alt="$$T_{fmax}=\frac{2}{3} R F_n \mu $$"></p><p>モデル ウィンドウで Friction Mode Logic サブシステムをダブルクリックしてこれを開きます。</p><img vspace="5" hspace="5" src="../sldemo_clutch_05.png" alt=""> <p><b>図 6:</b> Friction Mode Logic サブシステム</p><h2>- その他のコンポーネント<a name="24"></a></h2><p>残りのブロックは、ロックアップに必要なトルクを計算し (方程式 5)、図 2 に記述されているロジックを実装します。1 つの重要な要素が、Friction Mode Logic サブシステム内の Lockup Detection サブシステムにあります。これは、クラッチの滑りが 0 に到達した瞬間を正確に検出する Simulink Hit Crossing ブロックです。このブロックはモード遷移を正確な瞬間に配置します。</p><h2>- システム入力<a name="25"></a></h2><p>システム入力は、垂直抗力 <tt>Fn</tt> と、エンジン トルク <tt>Tin</tt> です。それぞれ、モデル ワークスペースの行列表で表されます。入力を図 7 にプロットします。さまざまな信号を可視化するには、Clutch Demo Signals GUI で対応するボックスをチェックします。</p><img vspace="5" hspace="5" src="../sldemo_clutch_06.png" alt=""> <p><b>図 7:</b> システム入力:垂直抗力とエンジン トルク</p><h2>- 結果<a name="27"></a></h2><p>次のパラメーター値は、シミュレーションのデモンストレーションに使用されます。これらは、実際のシステムに対応する物理量を表すことを意図しているのではなく、意味のあるベースライン デモを容易にすることを意図しています。</p><p><img src="../sldemo_clutch_eq05356.png" alt="$$ I_e = 1 kg\cdot m^2$$"></p><p><img src="../sldemo_clutch_eq07819.png" alt="$$I_v = 5 kg\cdot m^2 $$"></p><p><img src="../sldemo_clutch_eq44976.png" alt="$$b_e = 2 Nm/rad/sec$$"></p><p><img src="../sldemo_clutch_eq01638.png" alt="$$b_v = 1 Nm/rad/sec$$"></p><p><img src="../sldemo_clutch_eq74813.png" alt="$$\mu_k = 1 $$"></p><p><img src="../sldemo_clutch_eq80084.png" alt="$$\mu_s = 1.5 $$"></p><p><img src="../sldemo_clutch_eq04519.png" alt="$$R = 1 m$$"></p><p>上に示した入力の場合、システム速度は、下の図 8 に示すように動作します。シミュレーションはロック解除モードで開始し、車両側がその大きな慣性を加速すると、初期エンジン速度はフレアします。約 <tt>t = 4 秒</tt>で、速度が一緒になり、ロックされたままになります。これは、クラッチ容量がトルクを伝達するのに十分であることを示しています。<tt>t = 5 秒</tt>で、エンジン トルクが減少し始めます。摩擦板に対する垂直抗力も同様です。その結果、エンジン速度と車両速度の分離で示されているように、滑りの開始は約 <tt>t = 6.25 秒</tt>で発生します。</p><img vspace="5" hspace="5" src="../sldemo_clutch_07.png" alt=""> <p><b>図 8:</b>既定入力の場合のエンジン、車両およびシャフトの角速度</p><p>無効な間、さまざまな状態が一定のままであることに注目してください。遷移が発生した瞬間に、状態の引き渡しが連続的かつ円滑に行われます。これは、状態が有効になったときに使用する適切な初期条件を各積分器に供給した結果です。</p><h2>モデルを閉じる<a name="31"></a></h2><p>モデルを閉じます。生成されたデータをクリアします。</p><h2>まとめ<a name="32"></a></h2><p>この例題では、Simulink とその標準ブロック ライブラリを使用して、トポロジー的不連続性を伴うシステムをモデル化し、シミュレートし、解析する方法を示しました。これは、Hit Crossing ブロックと、これを使用してシミュレーション中に特定のイベントをキャプチャする方法の強力なデモです。このクラッチ システムの Simulink モデルは、同様の特性を持つモデルを作成する際のガイドとして機能します。この例題で使用した原理を、トポロジー的不連続性を伴う任意のシステムに適用できます。</p><p class="footer">Copyright 1984-2009 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Building a Clutch Lock-Up Model % % This example demonstrates the use of Simulink(R) to model and simulate a % rotating clutch system. Although modeling a clutch system is difficult % because of topological changes in the system dynamics during lockup, this % example shows how Simulink's enabled subsystems easily handle % such problems. We illustrate how to employ important Simulink modeling % concepts in the creation of the clutch simulation. Designers can apply % these concepts to many models with strong discontinuities and constraints % that may change dynamically.  % % In the demonstration, we use enabled subsystems to build the clutch % model. Two enabled subsystems model the clutch dynamics in either the % locked or unlocked position. After running the simulation, a GUI opens. % Checking any of the boxes on the GUI produces a plot of any of the % selected variables (versus time).   % % There is an alternative clutch model (|sldemo_clutch_if.mdl|) that uses % 'If/Else' blocks instead of enabled subsystems % (<matlab:open_system('sldemo_clutch_if') open the other clutch model>).   % Copyright 1984-2009 The MathWorks, Inc. % $Revision: 1.1.4.9.2.1 $  $Date: 2010/07/29 21:29:10 $  %% Analysis and Physics % % The clutch system in this example consists % of two plates that transmit torque between the engine and transmission % (see Figure 1).  % There are two distinct modes of operation:  % % 1) slipping - the two plates have differing angular velocities  % % 2) lockup - the two plates rotate together.  % % Handling the transition between these two modes presents % a modeling challenge. As the system loses a degree of freedom upon % lockup, the transmitted torque goes through a step discontinuity. The % magnitude of the torque drops from the maximum value supported by the % friction capacity to a value that is necessary to keep the two halves of % the system spinning at the same rate. The reverse transition, % break-apart, is likewise challenging, as the torque transmitted by the % clutch plates exceeds the friction capacity.   %% % <<sldemo_clutch_figure1.png>>  %%  % *Figure 1:* The clutch system, analyzed using a lumped-parameter model  %% % % *Variables Used* % % The following variables are used in the analysis and modeling. % % $$ T_{in} = \mbox{input (engine) torque; }$$ % % $$F_n = \mbox{normal force between friction plates; } $$ % % $$ I_e, I_v = \mbox{ moments of inertia for the engine and for the % transmission/vehicle; } $$ % % $$ b_e, b_v = \mbox{ damping rates at the engine and transmission/vehicle % sides of the clutch; } $$ % % $$ \mu_k, \mu_s = \mbox{ kinetic and static coefficients of friction; } $$ % % $$\omega_e, \omega_v = \mbox{angular speeds of the engine and transmission input shafts; }$$ % % $$ r_1, r_2 = \mbox{inner and outer radii of the clutch plate friction % surfaces; } $$ % % $$R = \mbox{equivalent net radius;}$$ % % $$T_{cl} = \mbox{torque transmitted through the clutch;}$$ % % $$T_l = \mbox{friction torque required of the clutch to maintain lockup;} % $$  %% % *Equation 1* % % The state equations for the coupled system are derived as follows: % % $$ % I_e \dot{\omega}_e = T_{in}-b_e\omega_e -T_d % $$ % % $$ % I_v \dot{\omega}_v = T_{d}-b_v\omega_v % $$  %% % *Equation 2* % % The torque capacity of the clutch is a function of its size, friction % characteristics, and the normal force that is applied. % % $$ (T_f)_{\mbox{max}} = \int \int_{A} \frac{r \times F_f}{A} da  % = \frac{F_n \mu}{\pi (r_2^2-r_1^2)} \int^{r_2}_{r_1} \int^{2\pi}_{0} r^2 % dr d\theta % = \frac{2}{3}R F_n \mu % $$ % % $$R=\frac{r^3_2-r^3_1}{r^2_2-r^2_1}$$  %%  % *Equation 3* % % When the clutch is slipping, the model uses the kinetic coefficient of % friction and the full capacity is available, in the direction that % opposes slip.  % % $$T_{fmaxk}=\frac{2}{3}R F_n \mu_k$$ % % $$ T_d = sgn ( \omega_e - \omega_v ) T_{fmaxk} $$ %  %% % *Equation 4* % % When the clutch is locked, the angular velocities of the engine and % transmission input shafts are the same, and the system torque acts on the % combined inertia as a single unit. So, we combine the differential % equations (Equation 1) into a single equation for the locked state.   % % $$\omega_e=\omega_v=\omega$$ % % $$(I_e+I_v)\dot{\omega}=T_{in}-(b_e+b_v)\dot{\omega}$$  %% % *Equation 5* % % Solving Equation 1 and Equation 4, the torque transmitted by the % clutch while locked is: % % $$T_c=T_f=\frac{I_v T_{in} - (I_v b_e-I_e b_v)\omega }{I_v+I_e}$$  %% % *Equation 6* % % The clutch thus remains locked unless the magnitude of |Tf| exceeds the % static friction capacity, |Tfmaxs|. % % $$ T_{fmaxs} = \frac{2}{3} R F_n \mu_s $$  %% % The state diagram in Figure 2 describes the overall behavior of the clutch. % % <<../sldemo_clutch_figure2.png>> % %% % *Figure 2:* A state diagram describing the friction mode transitions %  %% Modeling % % There are two methods for solving this type of problem:  %  % 1) Compute the clutch torque transmitted at all times, and employ this value directly in the model % % 2) Use two different dynamic models and switch between them at the appropriate times % % Because of its overall capabilities, Simulink can model either method. In % this example, we describe a simulation for the second method. In the % second method, switching between two dynamic models must be performed % with care to ensure that the initialized states of the new model match % the state values immediately prior to the switch. But, in either % approach, Simulink facilitates accurate simulation due to its ability to % recognize the precise moments at which transitions between lockup and % slipping occur. % % The simulation model for the clutch system uses % enabled subsystems, a particularly useful feature in Simulink. The % simulation can use one subsystem while the clutch is slipping and the % other when it is locked. A diagram of the Simulink model appears in % Figure 3. %   %% - Opening the Model and Running the Simulation % % To <matlab:open_system('sldemo_clutch') open this model> type % |sldemo_clutch| in MATLAB(R) terminal (click on the hyperlink if you are % using MATLAB Help). % % When the model is open, press the "Play" button on the model toolbar to % run the simulation. % % * Note: If you are using MATLAB Help, you can execute code from the demo % page by selecting the code and pressing F9. You can also Select Code > % Right Click > Select "Evaluate Selection".  open_system('sldemo_clutch'); % code does not appear in the demo HTML evalc('sim(''sldemo_clutch'')'); %simulate and don't display output  %% % *Figure 3:* Top level diagram for the clutch model    %% % * Note: The model logs relevant data to MATLAB % workspace in a structure called |sldemo_clutch_output|. Logged signals % have a blue indicator (<matlab:open_system('sldemo_clutch') see the model>).  % Read more about Signal Logging in Simulink Help. %  %% - The 'Unlocked' Subsystem % % Double click on the 'Unlocked' subsystem in the model window to open it.  This % subsystem models both sides of the clutch, coupled by the friction torque. It % is constructed around the integrator blocks which calculate engine and vehicle % speeds (see Figure 4). The model uses gain, multiplication, and % summation blocks to compute the speed derivatives (acceleration) from the % states and the subsystem inputs of engine torque, |Tin|, and clutch capacity, % |Tfmaxk|.   open_system('sldemo_clutch/Unlocked');  %% % *Figure 4:* The 'Unlocked' subsystem  %% % % Enabled subsystems, such % as 'Unlocked', feature several other noteworthy characteristics. The % 'Enable' block at the top of the diagram in Figure 4, defines the model as an % enabled subsystem. To create an enabled subsystem, we group the blocks % together like any other subsystem. We then insert an 'Enable' block from % the Simulink Connections library. This means that:  % % * An enable input appears on the subsystem block, identified by the % pulse-shaped symbol used on the 'Enable' block itself.  % % * The subsystem executes only when the % signal at the enable input is greater than zero.  % % In this example, the 'Unlocked' subsystem executes only when the % supervising system logic  % determines that it should be enabled.   % % There is another important consideration when using systems that can be % enabled or disabled. When the system is enabled, the simulation must % reinitialize the integrators to begin simulating from the correct point. % In this case, both sides of the clutch are moving at the same velocity % the moment it unlocks. The 'Unlocked' subsystem, which had been dormant, % needs to initialize both integrators at that speed in order to keep the % system speeds continuous.  % % The simulation uses 'From' blocks to communicate % the state of the locked speed to the initial condition inputs of the two % integrators. Each 'From' block represents an invisible connection between % itself and a 'Goto' block somewhere else in the system. The 'Goto' blocks % connect to the state ports of the integrators so that the model can use % these states elsewhere in the system without explicitly drawing in the % connecting lines. %  %% - The 'Locked' Subsystem % % Open the 'Locked' subsystem by double clicking on it in the model window.  % This is another enabled subsystem in the clutch model (see Figure 5). % It uses a single state to represent the engine and vehicle % speeds. It computes  % acceleration as a function of the speed and input torque. As in the % 'Unlocked' case, a 'From' block provides the integrator initial conditions % and a 'Goto' block broadcasts the state for use elsewhere in the model. % While simulating, either the 'Locked' or the 'Unlocked' subsystem is active % at all times. Whenever the control changes, the states are neatly handed % off between the two.      open_system('sldemo_clutch/Locked');  %% % *Figure 5:* The 'Locked' Subsystem  %% - The 'Friction Mode Logic' Subsystem % % The 'Friction Mode Logic' subsystem (shown in Figure 6) % computes the static and kinetic friction (with the appropriate friction coefficient) according to the following formula: % % $$T_{fmax}=\frac{2}{3} R F_n \mu $$ % % Open the 'Friction Mode Logic' subsystem by double clicking on it in the % model window.   open_system('sldemo_clutch/Friction Mode Logic');  %% % *Figure 6:* The 'Friction Mode Logic' Subsystem   %% - Other Components % % The remaining blocks calculate the torque required for lockup (Equation % 5), and implement the logic  described in Figure 2. One key element % is located in the 'Lockup Detection' subsystem within the 'Friction Mode % Logic' subsystem. This is the 'Simulink Hit Crossing' block which precisely % locates the instant at which the clutch slip reaches zero. This places % the mode transition at exactly the right moment.   %% - System Inputs % % The system inputs are normal force, |Fn|, and engine torque, |Tin|. Each of % these is represented by a matrix table in the model workspace. The inputs are % plotted in Figure 7. You can visualize various signals by checking the % corresponding boxes on the 'Clutch Demo Signals' GUI. %  plot(sldemo_clutch_output.Tin.Time, sldemo_clutch_output.Tin.Data, 'b', ...      sldemo_clutch_output.Fn.Time,  sldemo_clutch_output.Fn.Data,  'r'  ); xlabel('Time (sec)'); ylabel('System Inputs'); legend('Engine Torque (Nm)', 'Clutch Normal Force (N)'); title('Normal Force (Fn) and Engine Torque (Tin)'); axis([0 10 -.2 2.2]); %%  % *Figure 7:* System inputs: normal force and engine torque   %% - Results % % The following parameter values are used to demonstrate the simulation. % These are not meant to represent the physical quantities corresponding to % an actual system, but rather to facilitate a meaningful baseline % demonstration.  % % $$ I_e = 1 kg\cdot m^2$$ % % $$I_v = 5 kg\cdot m^2 $$ % % $$b_e = 2 Nm/rad/sec$$ % % $$b_v = 1 Nm/rad/sec$$ % % $$\mu_k = 1 $$ % % $$\mu_s = 1.5 $$ % % $$R = 1 m$$  %% % For the inputs shown above, the system velocities behave as shown in % Figure 8 below. The simulation begins in the Unlocked mode, with an % initial engine speed flare as the vehicle side accelerates its larger % inertia. At about |t = 4 sec|, the velocities come together and remain % locked, indicating that the clutch capacity is sufficient to transmit the % torque. At |t = 5 sec|, the engine torque begins to decrease, as does the % normal force on the friction plates. Consequently, the onset of slip % occurs at about |t = 6.25 sec| as indicated by the separation of the % engine and vehicle speeds.    plot(sldemo_clutch_output.EngineSpeed.Time,  sldemo_clutch_output.EngineSpeed.Data,  'r', ...      sldemo_clutch_output.VehicleSpeed.Time, sldemo_clutch_output.VehicleSpeed.Data, 'b', ...      sldemo_clutch_output.ShaftSpeed.Time,   sldemo_clutch_output.ShaftSpeed.Data,   'g'  ); xlabel('Time (sec)'); ylabel('Angular Speed (rad/sec)'); legend('\omega_e - Engine Speed', '\omega_v - Vehicle Speed', '\omega - Shaft Speed'); title('Angular Velocities for Default Inputs');  %% % *Figure 8:* Angular velocities of the engine, vehicle and shaft for default inputs  %% % % Notice that the various states remain constant while they are disabled. % At the time instants at which transitions take place, the state hand-off % is both continuous and smooth. This is a result of supplying each % integrator with the appropriate initial conditions to use when the state % is enabled.   %% Closing Model   % % Close the model. Clear generated data.  close_system('sldemo_clutch',0); clear sldemo_clutch_output;   %% Conclusions % % This example shows how to use Simulink and its standard block library to % model, simulate, and analyze a system with topological discontinuities. % This is a powerful demonstration of the 'Hit Crossing' block and how it can % be used to capture specific events during a simulation. The Simulink % model of this clutch system can serve as a guide when creating models % with similar characteristics. You can apply the principles used in this % example to any system with topological discontinuities.  displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>