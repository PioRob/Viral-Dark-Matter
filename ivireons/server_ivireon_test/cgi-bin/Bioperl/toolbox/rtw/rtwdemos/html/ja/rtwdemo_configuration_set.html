
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>コマンドラインによるモデルの設定</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="rtwdemo_configuration_set.m"><link rel="stylesheet" type="text/css" href="../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left"><a href="matlab:edit rtwdemo_configuration_set">エディターで rtwdemo_configuration_set.m を開く</a></div><div class="right"><a href="matlab:echodemo rtwdemo_configuration_set">コマンド ウィンドウで実行</a></div></div><div class="content"><h1>コマンドラインによるモデルの設定</h1><!--introduction--><p>Real-Time Workshop と Real-Time Workshop&reg; Embedded Coder™ には、生成されたコードをカスタマイズするための設定オプションが多数用意されています。コード生成オプションには、モデルの設定セットとも呼ばれる Simulink&reg; コンフィギュレーション パラメーターからアクセスします。</p><p>設定の決定とトレードオフは、生成されたコードをどのように使用し操作するかによって異なります。つまり、デバッグ、トレーサビリティ、コード効率、安全対策へのニーズに最適に一致する設定を選択します。機能、スクリプト、およびドキュメンテーションを使用すると、アプリケーションに最適なモデル設定セットを容易に作成できます。</p><p>Real-Time Workshop には、<a href="matlab:showdemo('rtwdemo_usingrtwec')">特定の目的のためにモデルを速やかに設定して確認する</a>ためのプッシュボタン機能がありますが、MATLAB スクリプトを使用してモデル設定手順を自動化するのが一般的です。このデモの手順では、次の項目について説明します。</p><div><ul><li>設定パラメーターの操作概念</li><li>コード生成オプションを理解するためのドキュメンテーション</li><li>モデルの設定を自動化するためのツールとスクリプト</li></ul></div><p>これらの基本的なスキルがあれば、プロジェクトに最適な自動設定スキームの設定をうまく進めることができます。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#1">コンフィギュレーション パラメーターのワークフロー</a></li><li><a href="#2">設定セットの基本的な操作</a></li><li><a href="#9">設定オプションの概要</a></li><li><a href="#10">設定スクリプトのサンプル</a></li><li><a href="#11">設定ウィザードのブロック</a></li></ul></div><h2>コンフィギュレーション パラメーターのワークフロー<a name="1"></a></h2><p>コンフィギュレーション パラメーターには、1つのモデル内または複数のモデルにわたって持続性を維持するワークフローが数多くあります。必要に応じて、設定セットをコピーまたは参照として扱う場合もあります。この例では、モデルのアクティブな設定セットを直接操作するための基本手順を示します。設定セットの機能とワークフローの包括的な説明は、Simulink ドキュメンテーションの<a href="matlab:helpview(fullfile(docroot,'toolbox','simulink','helptargets.map'),'ModelConfig')">設定セット</a>を参照してください。</p><h2>設定セットの基本的な操作<a name="2"></a></h2><p>モデルを開く</p><pre class="codeinput">model=<span class="string">'rtwdemo_configwizard'</span>;
open_system(model)
</pre><img vspace="5" hspace="5" src="../rtwdemo_configuration_set_01.png" alt=""> <p>モデルのアクティブな設定セットを取得する</p><pre class="codeinput">cs = getActiveConfigSet(model);
</pre><p>Real-Time Workshop 製品では、コード生成オプションのサブセットを公開しています。Real-Time Workshop を使用する場合は、Generic Real-Time (GRT) ターゲットを選択します。</p><pre class="codeinput">switchTarget(cs,<span class="string">'grt.tlc'</span>,[]);
</pre><p>Real-Time Workshop Embedded Coder 製品では、コード生成オプションの完全なセットを公開しています。Real-Time Workshop Embedded Coder を使用する場合は、Embedded Real-Time (ERT) ターゲットを選択します。</p><pre class="codeinput">switchTarget(cs,<span class="string">'ert.tlc'</span>,[]);
</pre><p>GRT ベースのターゲットと ERT ベースのターゲットの両方に対して作成するモデルの設定を自動化するには、設定セットの <b><tt>IsERTTarget</tt></b> 属性が役立ちます。</p><pre class="codeinput">isERT = strcmp(get_param(cs,<span class="string">'IsERTTarget'</span>),<span class="string">'on'</span>);
</pre><p>モデルまたは設定セットを使用してコード生成オプションを操作できます。次の例では、モデルから間接的にオプションを取得し、設定しています。</p><pre class="codeinput">inlineParams = get_param(model,<span class="string">'InlineParams'</span>);  <span class="comment">% Get InlineParams</span>
set_param(model,<span class="string">'InlineParams'</span>,inlineParams)     <span class="comment">% Set InlineParams</span>
</pre><p>次の例では、設定セットからオプションを直接取得し、設定しています。</p><pre class="codeinput"><span class="keyword">if</span> isERT
    lifespan = get_param(cs,<span class="string">'LifeSpan'</span>);  <span class="comment">% Get LifeSpan</span>
    set_param(cs,<span class="string">'LifeSpan'</span>,lifespan)     <span class="comment">% Set LifeSpan</span>
<span class="keyword">end</span>
</pre><h2>設定オプションの概要<a name="9"></a></h2><p>コード生成オプションの一覧に、デバッグ、トレーサビリティ、コード効率、安全対策に関するトレードオフが記載されています。</p><div><ul><li><a href="matlab:helpview(fullfile(docroot,'toolbox','rtw','helptargets.map'),'rtw_param_ref')">Real-Time Workshop (GRT) オプション</a></li><li><a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'ecoder_param_ref')">Real-Time Workshop Embedded Coder (ERT) オプション</a></li></ul></div><h2>設定スクリプトのサンプル<a name="10"></a></h2><p>Real-Time Workshop では、アプリケーションを作成するための開始点として使用できる設定スクリプトのサンプルが用意されています。関連する GRT および ERT コード生成オプションの一覧は、<a href="matlab:edit('rtwconfiguremodel')">rtwconfiguremodel.m</a> に含まれています。</p><h2>設定ウィザードのブロック<a name="11"></a></h2><p>Real-Time Workshop Embedded Coder には、特定の目的のためにモデルの設定を自動化する<a href="matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'ecoder_auto_config_blocks_scripts')">設定ウィザード</a>のブロックが用意されています。事前定義されたブロックには、次の目的に使用できる設定が含まれています。</p><div><ul><li>固定小数点データ用に最適化された ERT</li><li>浮動小数点データ用に最適化された ERT</li><li>固定/浮動小数点データ用に最適化された GRT</li><li>固定/浮動小数点データ用の GRT デバッグ設定</li><li>カスタム (ユーザーがスクリプトを指定)</li></ul></div><p>モデルを設定するには、ブロックをモデルにドロップし、ダブルクリックします。これらの有益なブロックの対話型デモについては、Simulink モデル <a href="matlab:rtwdemo_configwizard">rtwdemo_configwizard</a> を参照してください。</p><p class="footer">Copyright 2007-2008 The MathWorks, Inc.<br>Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Configuring a Model via Command Line %  % Real-Time Workshop and Real-Time Workshop(R) Embedded Coder(TM) provide % numerous configuration options for tailoring the generated % code.  Code generation options are accessed through the Simulink(R) % Configuration Parameters, also referred to as the model's % configuration set. % % You will make configuration decisions and tradeoffs depending on how % you use and interact with the generated code.  In short, you will % choose a configuration that best matches your needs for debugging, % traceability, code efficiency, and safety precaution.  Features, % scripts, and documentation facilitate your creation of an ideal % model configuration set for your application. % % While Real-Time Workshop provides a push-button facility to % <matlab:showdemo('rtwdemo_usingrtwec') quickly configure and check a % model for specified objectives>, it is common to automate the model % configuration procedure using a MATLAB script.  The instructions % in this demonstration illustrate % % * Concepts of working with configuration parameters % * Documentation to understand the code generation options % * Tools and scripts to automate the configuration of a model % % With these basic skills you are well on your way to setting up an % ideal automated configuration scheme for your project. % %% Configuration Parameter Workflows % There are many workflows for Configuration Parameters that include persistence  % within a single model or persistence across multiple models.  Depending % on your needs you may wish to work with configuration sets as copies or % references.  This example demonstrates the basics steps for working directly % with the active configuration set of a model.  For a comprehensive % description of configuration set features and workflows see % <matlab:helpview(fullfile(docroot,'toolbox','simulink','helptargets.map'),'ModelConfig') Configuration Sets> % in the Simulink documentation. % %% Configuration Set Basics % Open a model model='rtwdemo_configwizard'; open_system(model) %% % Obtain the model's active configuration set cs = getActiveConfigSet(model);  %% % The Real-Time Workshop product exposes a subset of the code generation options. % If you are using Real-Time Workshop, select the Generic Real-Time (GRT) % target. switchTarget(cs,'grt.tlc',[]);  %% % The Real-Time Workshop Embedded Coder product exposes the complete set of % code generation options.  If you are using Real-Time Workshop Embedded Coder, % select the Embedded Real-Time (ERT) target. switchTarget(cs,'ert.tlc',[]);  %% % To automate configuration of models that will be built for both % GRT and ERT-based targets you will find the configuration % set *|IsERTTarget|* attribute useful. isERT = strcmp(get_param(cs,'IsERTTarget'),'on'); %% % You can interact with code generation options via the model or the % the configuration set.  This example gets and sets options indirectly % via the model inlineParams = get_param(model,'InlineParams');  % Get InlineParams set_param(model,'InlineParams',inlineParams)     % Set InlineParams %% % This example gets and sets options directly via the configuration set. if isERT     lifespan = get_param(cs,'LifeSpan');  % Get LifeSpan     set_param(cs,'LifeSpan',lifespan)     % Set LifeSpan end %% Configuration Option Summary % The full list of code generation options are documented with  % tradeoffs for debugging, traceability, code efficiency, and safety % precaution. % % * <matlab:helpview(fullfile(docroot,'toolbox','rtw','helptargets.map'),'rtw_param_ref') Real-Time Workshop (GRT) options> % * <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'ecoder_param_ref') Real-Time Workshop Embedded Coder (ERT) options> % %% Example Configuration Script % Real-Time Workshop provides an example configuration script that you can % use as a starting point for your application.  The full list of relevant % GRT and ERT code generation options are contained in % <matlab:edit('rtwconfiguremodel') rtwconfiguremodel.m>. % %% Configuration Wizard Blocks % Real-Time Workshop Embedded Coder provides a set of % <matlab:helpview(fullfile(docroot,'toolbox','ecoder','helptargets.map'),'ecoder_auto_config_blocks_scripts') Configuration Wizard> % blocks that automate configuration of a model for a specific goal. % The pre-defined blocks provide configuration for: %  % * ERT optimized for fixed-point % * ERT optimized for floating-point % * GRT optimized for fixed/floating-point % * GRT debug settings for fixed/floating-point % * Custom (you provide the script) %  % Just drop the block into a model and double-click to configure the model. % See Simulink model % <matlab:rtwdemo_configwizard rtwdemo_configwizard> for an interactive % demonstration of these useful blocks. % %   Copyright 2007-2008 The MathWorks, Inc.  displayEndOfDemoMessage(mfilename)  ##### SOURCE END ##### --></body></html>