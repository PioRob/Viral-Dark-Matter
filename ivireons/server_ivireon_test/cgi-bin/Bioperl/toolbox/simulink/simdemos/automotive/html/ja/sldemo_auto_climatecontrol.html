
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <!-- This HTML was auto-generated from MATLAB code. To make changes, update the MATLAB code and republish this document.       --><title>自動室温調節システムのシミュレーション</title><meta name="generator" content="MATLAB 7.11"><link rel="schema.DC" href="../http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2010-05-27"><meta name="DC.source" content="sldemo_auto_climatecontrol.m"><link rel="stylesheet" type="text/css" href="../../../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left">sldemo_auto_climatecontrol.mdl</div><div class="right"><a href="matlab:sldemo_auto_climatecontrol">このモデルを開く</a></div></div><div class="content"><h1>自動室温調節システムのシミュレーション</h1><!--introduction--><p>このデモでは、Simulink&reg; と Stateflow&reg; を使用して、自動車の自動室温調整システムの機能をシミュレートします。 車内の空気に到達させたい温度値を入力するには、User Setpoint in Celsius ブロックをダブルクリックし、温度値を入力します。 同様の方法で、External Temperature in Celsius も設定できます。 モデルの右側の数値表示は、運転席頭部の後ろに設置された温度センサーの測定値を示しています。 これは、ドライバーが感じる温度です。 モデルが実行され、室温調節がアクティブになると、車内温度の変化を示すために、この表示ボックスの値が変化します。</p><!--/introduction--><h2>目次</h2><div><ul><li><a href="#3">Stateflow&reg; コントローラー</a></li><li><a href="#5">ヒーター モデルとエアコン モデル</a></li><li><a href="#8">車室内の熱伝達</a></li></ul></div><img vspace="5" hspace="5" src="../sldemo_auto_climatecontrol_01.png" alt=""> <p><b>図 1: </b> 自動室温調節システム</p><h2>Stateflow&reg; コントローラー<a name="3"></a></h2><p>監視コントローラーは Stateflow で実装されます。 Stateflow チャートをダブルクリックすると、この監視制御ロジックがどのように定式化されているかが示されます。</p><p><b>Heater_AC</b> ステートは、車内の現在温度より少なくとも 0.5℃高い設定点温度を入力すると、ヒーター システムがオンになることを示しています。 ヒーターは、車内の現在温度が設定点温度の 0.5℃以内になるまでアクティブなままになります。 同様に、ユーザーが、現在の車内温度より 0.5℃ (以上) 低い設定点を入力すると、エアコンがオンになり、車内の気温が設定点温度の 0.5℃以内になるまでアクティブなままになります。その後、システムはオフになります。 連続切り替えの問題を回避するために、0.5℃の不感帯が実装されています。</p><p><b>Blower</b> ステートでは、設定点温度と現在温度の差が大きくなるほど、ファンはより強く送風します。 これにより、温度差に関係なく、妥当な時間内に温度が必要値に到達します。 この場合も同様に、車内の気温が設定点温度の 0.5℃以内になると、システムはオフになります。</p><p>空気分散 (<b>AirDist</b>) ステートと空気再循環 (<b>Recyc_Air</b>) ステートは、Stateflow チャートをトリガーする 2 つのスイッチによって制御されます。 必要に応じて、窓の効果的な除霜を促進するために、これら 2 つのステート内で内部遷移が実装されています。 除霜ステートがアクティブになると、空気の再循環はオフになります。</p><img vspace="5" hspace="5" src="../sldemo_auto_climatecontrol_02.png" alt=""> <p><b>図 2: </b> Stateflow の監視制御ロジック</p><h2>ヒーター モデルとエアコン モデル<a name="5"></a></h2><p>ヒーター モデルは、次に示す熱交換器の方程式から作成されました。</p><pre>Tout = Ts - (Ts-Tin)e^[(-pi*D*L*hc)/(m_dot*Cp)]</pre><p>ここで、</p><div><ul><li>Ts = 定数 (ラジエーター壁面温度)</li><li>D  = 0.004m (チャンネル直径)</li><li>L  = 0.05m (ラジエーターの厚さ)</li><li>N  = 30000 (チャンネル数)</li><li>k  = 0.026 W/mK = 定数 (空気の熱伝導率)</li><li>Cp = 1007 J/kgK = 定数 (空気の比熱)</li><li>層流 (hc = 3.66(k/D) = 23.8 W/m2K )</li></ul></div><p>さらに、ヒーター フラップの効果が考慮されています。 送風機の動作と同様に、必要な設定点温度と車内の現在温度の温度差が大きくなるほど、ヒーター フラップはより大きく開き、暖房効果はより大きくなります。</p><p>エアコン モデルは次の方程式から作成されました。</p><p>y*(w*Tcomp) = m_dot*(h4-h1)</p><p>ここで、</p><div><ul><li>y = 効率</li><li>m_dot = 質量流量</li><li>w = エンジンの速度</li><li>Tcomp = コンプレッサー トルク</li><li>h4, h1 = エンタルピー</li></ul></div><p>ここで、エアコンから出る空気の温度が、エンジン速度とコンプレッサー トルクによって決定されるエアコン システムのバンバン制御を行います。</p><img vspace="5" hspace="5" src="../sldemo_auto_climatecontrol_03.png" alt=""> <p><b>図 3: </b> ヒーター制御サブシステム</p><img vspace="5" hspace="5" src="../sldemo_auto_climatecontrol_04.png" alt=""> <p><b>図 4: </b> エアコン制御サブシステム</p><h2>車室内の熱伝達<a name="8"></a></h2><p>ドライバーが感じる気温は、次の要因すべての影響を受けます。</p><div><ul><li>通気孔から出る空気の温度</li><li>外気温度</li><li>乗車人数</li></ul></div><p>これらの要因が、車室内の熱力学モデルへの入力になります。 通気孔から出る空気の温度を考慮するには、通気孔から出る空気の温度と車内の現在温度の差を計算し、これにファン速度比 (質量流量) を掛けます。 次に、車内の 1 人につき 100W のエネルギーが追加されます。 最後に、外気温度と室内空気温度の差に、小さい方の質量流量を掛けて、外部から車内に放散される空気を考慮します。</p><p>内部力学モデルの出力は、運転席頭部の後ろに設置されたセンサーによって読み取られる温度の測定値として表示ブロックに送られます。</p><p class="footer">Copyright 1990-2007 The MathWorks, Inc.<br> Published with MATLAB&reg; 7.11</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!-- ##### SOURCE BEGIN ##### %% Simulating Automatic Climate Control Systems % % In this demo we use Simulink(R) and Stateflow(R) to simulate the working of  % an automatic climate control system in a car. You can enter a temperature  % value you would like the air in the car to reach by double clicking the  % User Setpoint in Celsius Block and entering the temperature value. You can % also set the External Temperature in Celsius in a similar way. The % numerical display on the right-hand side of the model shows the reading % of a temperature sensor placed behind the driver's head. This is the % temperature that the driver should be feeling. When the model is run and % the climate control is active, it is this display box whose value changes % to show the change of temperature in the car.     % Copyright 1990-2007 The MathWorks, Inc.  % $Revision: 1.1.4.9.2.1 $  $Date: 2010/07/29 21:29:10 $  %%  % open_system('sldemo_auto_climatecontrol.mdl') %% % *Figure 1:* The automatic climate control system.  %% The Stateflow(R) Controller % % The supervisory controller is implemented in Stateflow. Double clicking % the Stateflow chart shows how this supervisory control logic has % been formulated.   % % The *Heater_AC* state shows that when you enter a setpoint temperature  % that is greater than the current temperature in the car by at % least 0.5 deg C, the heater system will be switched on. The heater will % remain active until the current temperature in the car is within % 0.5 deg of the setpoint temperature. Similarly, when the user enters a % setpoint that is 0.5 deg C (or more) lower than the current car % temperature, the air conditioner is turned on and stays active until the % air temperature in the car is within 0.5 deg C of the % setpoint temperature, after which, the system will switch off. A dead % band of 0.5 deg has been implemented to avoid the problem of continuous % switching.           % % In the *Blower* State, the larger the difference between the setpoint % temperature and the current temperature, the harder the fan blows. This % ensures that the temperature will reach the required value in a % reasonable amount of time, despite the temperature difference. Once % again, when the air temperature in the car is within 0.5 % deg C of the setpoint temperature, the system will switch off.       % % The Air Distribution(*AirDist*) and Recycling Air States(*Recyc_Air*) are % controlled by the two switches that trigger the Stateflow chart. An % internal transition has been implemented within these two states to % facilitate effective defrosting of the windows when required. When the % defrost state is activated, the recycling air is turned off.        open_system('sldemo_auto_climatecontrol/Temperature Control Chart')  %% % *Figure 2:* The supervisory control logic in Stateflow.  %% Heater and Air Conditioner Models % % The heater model was built from the equation for a heater exchanger shown below: % %  Tout = Ts - (Ts-Tin)e^[(-pi*D*L*hc)/(m_dot*Cp)] % % Where: % % * Ts = constant (radiator wall temperature) % * D  = 0.004m (channel diameter) % * L  = 0.05m (radiator thickness) % * N  = 30000 (Number of channels) % * k  = 0.026 W/mK = constant (thermal conductivity of air) % * Cp = 1007 J/kgK = constant (specific heat of air) % * Laminar flow (hc = 3.66(k/D) = 23.8 W/m2K )  % % In addition, the effect of the heater flap is taken into account. Similar % to the operation of the blower, the greater the temperature difference % between the required setpoint temperature and the current temperature in % the car, the more the heater flap is opened and the greater the heating effect.    % % The air conditioner model was built from the equation below: % % y*(w*Tcomp) = m_dot*(h4-h1) % % Where: % % * y = efficiency % * m_dot = mass flow rate % * w = speed of the engine % * Tcomp = compressor torque % * h4, h1 = enthalpy  % % Here we have bang-bang control of the A/C system where the temperature of % the air that exits the A/C is determined by the engine speed and % compressor torque.     open_system('sldemo_auto_climatecontrol/Heater Control') %% % *Figure 3:* Heater control subsystem.  open_system('sldemo_auto_climatecontrol/AC Control') %% % *Figure 4:* A/C control subsystem.  %% Heat Transfer in the Cabin % % The temperature of the air felt by the driver is affected by all of  % these factors: % % * The temperature of the air exiting the vents % * The temperature of the outside air % * The number of people in the car  % % These factors are inputs into the thermodynamic model of the interior % of the cabin. We take into account the temperature of the air exiting  % the vents by calculating the difference between the vent air temperature % and the current temperature inside the car and multiplying it by the fan % speed proportion (mass flow rate). Then 100W of energy is added per person in % the car. Lastly, the difference between the temperature of the outside % air and the interior air temperature is multiplied by a lesser mass flow % rate to account for the air radiating into the car from the outside.         % % The output of the interior dynamics model is fed to the display block as % a measure of the temperature read by a sensor placed behind the driver's head.     bdclose all  ##### SOURCE END ##### --></body></html>